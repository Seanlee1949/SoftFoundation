!function(){var t=document.createElement("style");t.innerHTML=".block[data-v-74b77c90]{background:#000;position:relative}.swiper_video[data-v-74b77c90]{height:50rem}.swiper_item[data-v-74b77c90]{height:47.3rem}[data-v-74b77c90] .el-carousel__container{height:100%}[data-v-74b77c90] .el-carousel__button{display:block;width:1.4rem;height:1.4rem;border-radius:50%;background-color:rgba(255,255,255,.7);border:none;outline:0;padding:0;margin:0;cursor:pointer}[data-v-74b77c90] .is-active .el-carousel__button{background-color:rgba(63,142,200,.8)}.bottom_click[data-v-74b77c90]{position:absolute;bottom:11px;color:#fff}.bottom_click1[data-v-74b77c90]{left:47.7%;transform:translate(-47.7%)}.bottom_click2[data-v-74b77c90]{left:50%;transform:translate(-50%)}.bottom_click3[data-v-74b77c90]{left:52.2%;transform:translate(-52.2%)}.m-pop-echart .col[data-v-74b77c90],.m-tab-echartTable[data-v-74b77c90]{height:auto}.m-pop-echart .row[data-v-74b77c90]{display:flex}.m-pop-echart-f01 .inner1[data-v-74b77c90]{padding-bottom:32px}.m-box[data-v-74b77c90]{height:100%;padding-top:1.25rem}.mapDiv[data-v-74b77c90]{width:100%;height:100%}.ul-previewOnline .inner[data-v-74b77c90]{height:362px}.m-pop-echart-f01 .inner1[data-v-74b77c90]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-74b77c90]{margin-bottom:0}.m-datab1[data-v-74b77c90]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-74b77c90]{padding:0rem 1.125rem}.m-datab1 .top[data-v-74b77c90]{margin-top:1.25rem}.m-datab1[data-v-74b77c90]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-74b77c90]{padding:.1rem .15rem}.m-statusinfo .bottom .item[data-v-74b77c90]:first-child{width:20%}.m-statusinfo .info .item .tit[data-v-74b77c90]{margin-right:1rem}.btnpile[data-v-74b77c90]{width:150px}.item_center[data-v-74b77c90]{text-align:center}.m-datab1 .left[data-v-74b77c90]{margin-right:1rem!important}.el-col-12[data-v-20bae6d3][data-v-11004a90]{width:50%}.item_bottom_out[data-v-11004a90]{margin:0 .8rem 1.5rem;border:1.5px solid #cfcece;border-left:none;overflow:hidden}.item_bottomL[data-v-11004a90]{border-left:1.5px solid #cfcece;padding:.5rem 1.7rem 0;float:left}.item_b[data-v-11004a90]{padding:.5rem 0;display:block;text-align:center}.mapDiv[data-v-11004a90]{height:100%;width:100%}.m-box[data-v-11004a90]{padding-top:1.25rem}.m-pop-echart .col[data-v-11004a90],.m-tab-echartTable[data-v-11004a90]{height:auto}.m-pop-echart .row[data-v-11004a90]{display:flex}.m-box[data-v-11004a90]{height:100%}.m-pop-echart-f01 .inner1[data-v-11004a90]{padding:20px 32px 0}.m-statusinfo .bottom .item[data-v-11004a90]:first-child{width:25%}.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(1),.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(2),.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(3),.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(4),.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(5),.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(6){border-bottom:1px solid #cfcece}.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(2),.m-statusinfo .bottom .item[data-v-11004a90]:nth-child(3){width:12.5%}.m-statusinfo .bottom .item[data-v-11004a90]{width:16.58%;padding-bottom:5px}.m-pop-echart .col[data-v-20bae6d3][data-v-11004a90],.m-tab-echartTable[data-v-20bae6d3][data-v-11004a90]{height:100%}.el-col-12[data-v-11004a90]{width:100%}.btnpile[data-v-11004a90]{width:100px}.m-statusinfo .bottom .item[data-v-20bae6d3][data-v-11004a90]{padding-top:.5rem}.m-statusinfo .bottom[data-v-11004a90]{padding:0 0 .5rem}.m-statusinfo .top[data-v-11004a90]{padding-bottom:.5rem}.m-pop-echart-f01 .inner1[data-v-11004a90]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-11004a90]{margin-bottom:0}.m-datab1[data-v-11004a90]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-11004a90]{padding:0rem 1.125rem}.m-datab1 .top[data-v-11004a90]{margin-top:1.25rem}.m-datab1[data-v-11004a90]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-11004a90]{padding:.1rem .15rem}.m-pop-echart .row[data-v-19e9eae7]{display:flex}.m-box[data-v-19e9eae7]{height:100%;padding-top:1.25rem}.mapDiv[data-v-19e9eae7]{width:100%;height:100%}.ul-previewOnline .inner[data-v-19e9eae7]{height:362px}.m-statusinfo .top[data-v-19e9eae7]{padding-bottom:1.2rem}.m-statusinfo .bottom[data-v-19e9eae7]{padding:1.15rem 0 0}.m-statusinfo .bottom .item[data-v-19e9eae7]{width:25%;margin-bottom:10px}.m-pop-echart-f01 .inner1[data-v-19e9eae7]{padding:1.7rem 2rem .2rem}.m-datab1 .top[data-v-19e9eae7]{margin-bottom:0}.m-datab1[data-v-19e9eae7]{padding:.1rem 1.25rem 0rem}.m-datab1 .top[data-v-19e9eae7]{padding:0rem 1.125rem}.m-datab1 .top[data-v-19e9eae7]{margin-top:1.25rem}.m-datab1[data-v-19e9eae7]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-19e9eae7]{padding:.1rem .15rem}.item_center[data-v-19e9eae7]{text-align:center}.ul-status li[data-v-3d4fce1d]{margin-left:1rem}.m-pop-echart .col[data-v-3d4fce1d],.m-tab-echartTable[data-v-3d4fce1d]{height:auto}.m-pop-echart .row[data-v-3d4fce1d]{display:flex}.m-box[data-v-3d4fce1d]{height:100%}.m-pop-echart-f01 .inner1[data-v-3d4fce1d]{padding-bottom:32px}#allmap[data-v-3d4fce1d]{height:100%;width:100%}.ul-previewOnline .inner[data-v-3d4fce1d]{height:362px}.m-statusinfo .bottom .item[data-v-3d4fce1d]{width:25%;margin-bottom:5px}.m-statusinfo .top[data-v-3d4fce1d]{padding-bottom:.3rem}.m-pop-echart-f01 .inner1[data-v-3d4fce1d]{padding:1.5rem 2rem 0}.m-datab1 .top[data-v-3d4fce1d]{margin-bottom:0}.m-datab1[data-v-3d4fce1d]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-3d4fce1d]{padding:0rem 1.125rem}.m-datab1 .top[data-v-3d4fce1d]{margin-top:1.25rem}.m-datab1[data-v-3d4fce1d]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-3d4fce1d]{padding:.1rem .15rem}.m-statusinfo .bottom[data-v-3d4fce1d]{padding:.25rem 0 .2rem}.m-datab1 .left[data-v-3d4fce1d]{margin-right:1rem}.item_center[data-v-3d4fce1d]{text-align:center}.mapDiv[data-v-3d4fce1d]{width:100%;height:100%}.m-statusinfo .bottom h3[data-v-3d4fce1d]{margin-bottom:3px}.m-statusinfo .bottom .item[data-v-3d4fce1d]:nth-child(9),.m-statusinfo .bottom .item[data-v-3d4fce1d]:nth-child(10){width:50%;padding-top:.5rem;border-top:1px solid #dddddd;border-bottom:1px solid #dddddd;border-right:1px solid #dddddd;text-align:center}.m-statusinfo .bottom .item[data-v-3d4fce1d]:nth-child(10){border-right:none}.item_flow[data-v-3d4fce1d]{float:left;border-top:1px solid #dddddd;width:20%}.m-statusinfo[data-v-3d4fce1d]{padding-right:1.375rem}.mapDiv[data-v-2fa374d5]{width:100%;height:100%}.m-pop-echart .col[data-v-2fa374d5],.m-tab-echartTable[data-v-2fa374d5]{height:auto}.m-pop-echart .row[data-v-2fa374d5]{display:flex}.m-box[data-v-2fa374d5]{height:100%}.m-pop-echart-f01 .inner1[data-v-2fa374d5]{padding-bottom:32px}.m-statusinfo .bottom .item[data-v-2fa374d5]:first-child,.m-statusinfo .bottom .item[data-v-2fa374d5]:nth-child(2),.m-statusinfo .bottom .item[data-v-2fa374d5]:nth-child(3){width:33%}.m-statusinfo .bottom .item[data-v-2fa374d5]:nth-child(4),.m-statusinfo .bottom .item[data-v-2fa374d5]:nth-child(5){width:50%;padding-top:.5rem;border:1px solid #dddddd;border-left:none;text-align:center}.m-statusinfo .bottom .item[data-v-2fa374d5]:nth-child(5){border-right:none}.item_flow[data-v-2fa374d5]{float:left;border-top:1px solid #dddddd;width:20%}.m-statusinfo .bottom h3[data-v-2fa374d5]{margin-bottom:.5rem}.ul-previewOnline .inner[data-v-2fa374d5]{height:16rem}.m-statusinfo .top[data-v-2fa374d5]{padding-bottom:.5rem}.m-pop-echart-f01 .inner1[data-v-2fa374d5]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-2fa374d5]{margin-bottom:0}.m-datab1[data-v-2fa374d5]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-2fa374d5]{padding:0rem 1.125rem}.m-datab1 .top[data-v-2fa374d5]{margin-top:1.25rem}.m-datab1[data-v-2fa374d5]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-2fa374d5]{padding:.1rem .15rem}.item_center[data-v-2fa374d5]{text-align:center}.el-col-12[data-v-20d715d5][data-v-5336e958]{width:100%}.mapDiv[data-v-5336e958]{height:100%;width:100%}.m-pop-echart .row[data-v-5336e958]{display:flex}.m-box[data-v-5336e958]{height:100%;padding-top:1.25rem}.m-pop-echart-f01 .inner1[data-v-5336e958]{padding:20px 32px 0}.m-statusinfo .bottom .item[data-v-5336e958]:first-child{width:20%}.m-statusinfo .bottom .item[data-v-5336e958]:nth-child(2),.m-statusinfo .bottom .item[data-v-5336e958]:nth-child(3){width:15%}.m-statusinfo .bottom .item[data-v-5336e958]:nth-child(13),.m-statusinfo .bottom .item[data-v-5336e958]:nth-child(14),.m-statusinfo .bottom .item[data-v-5336e958]:nth-child(15),.m-statusinfo .bottom .item[data-v-5336e958]:nth-child(16),.m-statusinfo .bottom .item[data-v-5336e958]:nth-child(17){width:20%}.m-statusinfo .bottom .item[data-v-5336e958]{width:16.58%;padding-bottom:5px;border-bottom:1px solid #cfcece}.m-pop-echart .col[data-v-20d715d5][data-v-5336e958],.m-tab-echartTable[data-v-20d715d5][data-v-5336e958]{height:100%}.el-col-12[data-v-5336e958]{width:100%}.m-statusinfo .bottom[data-v-5336e958]{padding:1.25rem 0 1rem}.m-pop-echart .col[data-v-5336e958]{padding:.15rem}.mapDiv[data-v-e87852dc]{height:100%;width:100%}.m-pop-echart .col[data-v-e87852dc],.m-tab-echartTable[data-v-e87852dc]{height:auto}.m-pop-echart .row[data-v-e87852dc]{display:flex}.m-box[data-v-e87852dc]{height:100%}.m-pop-echart-f01 .inner1[data-v-e87852dc]{padding-bottom:32px}.m-statusinfo .bottom .item[data-v-e87852dc]{width:25%}.ul-previewOnline .inner[data-v-e87852dc]{height:16rem}.m-pop-echart-f01 .inner1[data-v-e87852dc]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-e87852dc]{margin-bottom:0}.m-datab1[data-v-e87852dc]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-e87852dc]{padding:0rem 1.125rem}.m-datab1 .top[data-v-e87852dc]{margin-top:1.25rem}.m-datab1[data-v-e87852dc]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-e87852dc]{padding:.1rem .15rem}.mapDiv[data-v-1e4e4ff7]{height:100%;width:100%}.m-pop-echart .col[data-v-1e4e4ff7],.m-tab-echartTable[data-v-1e4e4ff7]{height:auto}.m-pop-echart .row[data-v-1e4e4ff7]{display:flex}.m-box[data-v-1e4e4ff7]{height:100%}.m-pop-echart-f01 .inner1[data-v-1e4e4ff7]{padding-bottom:32px}.ul-previewOnline .inner[data-v-1e4e4ff7]{height:362px}.m-statusinfo .bottom .item[data-v-1e4e4ff7]{width:33%}.m-statusinfo .bottom .item[data-v-1e4e4ff7]:first-child,.m-statusinfo .bottom .item[data-v-1e4e4ff7]:nth-child(2),.m-statusinfo .bottom .item[data-v-1e4e4ff7]:nth-child(3){width:33%}.ul-previewOnline .inner[data-v-1e4e4ff7]{height:16rem}.m-statusinfo .bottom .item[data-v-1e4e4ff7]:nth-child(4),.m-statusinfo .bottom .item[data-v-1e4e4ff7]:nth-child(5){width:50%;padding-top:.5rem;border:1px solid #dddddd;border-left:none;text-align:center}.m-statusinfo .bottom .item[data-v-1e4e4ff7]:nth-child(5){border-right:none}.item_flow[data-v-1e4e4ff7]{float:left;border-top:1px solid #dddddd;width:20%}.m-statusinfo .bottom h3[data-v-1e4e4ff7]{margin-bottom:.5rem}.m-statusinfo .top[data-v-1e4e4ff7]{padding-bottom:.5rem}.m-pop-echart-f01 .inner1[data-v-1e4e4ff7]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-1e4e4ff7]{margin-bottom:0}.m-datab1[data-v-1e4e4ff7]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-1e4e4ff7]{padding:0rem 1.125rem}.m-datab1 .top[data-v-1e4e4ff7]{margin-top:1.25rem}.m-datab1[data-v-1e4e4ff7]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-1e4e4ff7]{padding:.1rem .15rem}.m-pop-echart .col[data-v-1e37dcdb],.m-tab-echartTable[data-v-1e37dcdb]{height:auto}.m-pop-echart .row[data-v-1e37dcdb]{display:flex}.m-box[data-v-1e37dcdb]{height:100%}.m-pop-echart-f01 .inner1[data-v-1e37dcdb]{padding-bottom:32px}#allmap[data-v-1e37dcdb]{height:100%;width:100%}.ul-previewOnline .inner[data-v-1e37dcdb]{height:15rem}.block[data-v-5f81280e]{background:#000;position:relative}.swiper_video[data-v-5f81280e]{height:50rem}.swiper_item[data-v-5f81280e]{height:47.3rem}[data-v-5f81280e] .el-carousel__container{height:100%}[data-v-5f81280e] .el-carousel__button{display:block;width:1.4rem;height:1.4rem;border-radius:50%;background-color:rgba(255,255,255,.7);border:none;outline:0;padding:0;margin:0;cursor:pointer}[data-v-5f81280e] .is-active .el-carousel__button{background-color:rgba(63,142,200,.8)}.bottom_click[data-v-5f81280e]{position:absolute;bottom:11px;color:#fff}.bottom_click1[data-v-5f81280e]{left:47.7%;transform:translate(-47.7%)}.bottom_click2[data-v-5f81280e]{left:50%;transform:translate(-50%)}.bottom_click3[data-v-5f81280e]{left:52.2%;transform:translate(-52.2%)}.dialog-content[data-v-5f81280e]{position:relative}.m-tab-addAsh[data-v-5f81280e]{padding-top:1.5rem}.m-footer-addAsh[data-v-5f81280e]{width:100%;position:absolute;bottom:0;right:0}.m-footer-addAsh .right[data-v-5f81280e]{float:right;font-size:0;line-height:60px}.m-pop-detail .dialog-header .left .g-tabs[data-v-5f81280e]{width:26.75rem}.mapDiv[data-v-5f81280e]{width:100%;height:100%}.m-pop-echart .col[data-v-5f81280e],.m-tab-echartTable[data-v-5f81280e]{height:auto}.m-pop-echart .row[data-v-5f81280e]{display:flex}.m-box[data-v-5f81280e]{height:100%}.m-pop-echart-f01 .inner1[data-v-5f81280e]{padding-bottom:32px}.ul-previewOnline .inner[data-v-5f81280e]{height:332px}.m-statusinfo .bottom .item[data-v-5f81280e]{width:25%}.ul-previewOnline .inner[data-v-5f81280e]{height:362px}.m-pop-echart-f01 .inner1[data-v-5f81280e]{padding:1.7rem 2rem 0}.m-pop-echart-f01 h2[data-v-5f81280e]{line-height:30px}.m-datab1 .top[data-v-5f81280e]{margin-bottom:0}.m-datab1[data-v-5f81280e]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-5f81280e]{padding:0rem 1.125rem}.m-datab1 .top[data-v-5f81280e]{margin-top:1.25rem}.m-datab1[data-v-5f81280e]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-5f81280e]{padding:.1rem .15rem}.item_center[data-v-5f81280e]{text-align:center}.mapDiv[data-v-88d3d1c4]{height:100%;width:100%}.m-pop-echart .col[data-v-88d3d1c4],.m-tab-echartTable[data-v-88d3d1c4]{height:auto}.m-pop-echart .row[data-v-88d3d1c4]{display:flex}.m-box[data-v-88d3d1c4]{height:100%;padding-top:1.25rem}.m-pop-echart-f01 .inner1[data-v-88d3d1c4]{padding-bottom:32px}.ul-previewOnline .inner[data-v-88d3d1c4]{height:362px}.m-pop-echart-f01 .inner1[data-v-88d3d1c4]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-88d3d1c4]{margin-bottom:0}.m-datab1[data-v-88d3d1c4]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-88d3d1c4]{padding:0rem 1.125rem}.m-datab1 .top[data-v-88d3d1c4]{margin-top:1.25rem}.m-datab1[data-v-88d3d1c4]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-88d3d1c4]{padding:.1rem .15rem}.item_center[data-v-88d3d1c4]{text-align:center}.m-statusinfo .bottom .item[data-v-88d3d1c4]{width:20%}.mapDiv[data-v-2420baec]{height:100%;width:100%}.m-pop-echart .col[data-v-2420baec],.m-tab-echartTable[data-v-2420baec]{height:auto}.m-pop-echart .row[data-v-2420baec]{display:flex}.m-box[data-v-2420baec]{height:100%;padding-top:1.25rem}.m-pop-echart-f01 .inner1[data-v-2420baec]{padding-bottom:32px}.ul-previewOnline .inner[data-v-2420baec]{height:18rem}.m-statusinfo .bottomdata[data-v-2420baec]{display:flex;justify-content:space-between}.m-pop-echart-f01 .inner1[data-v-2420baec]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-2420baec]{margin-bottom:0}.m-datab1[data-v-2420baec]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-2420baec]{padding:0rem 1.125rem}.m-datab1 .top[data-v-2420baec]{margin-top:1.25rem}.m-datab1[data-v-2420baec]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-2420baec]{padding:.1rem .15rem}.item_center[data-v-2420baec]{text-align:center}.m-pop-echart .col[data-v-3478c2be],.m-tab-echartTable[data-v-3478c2be]{height:auto}.m-pop-echart .row[data-v-3478c2be]{display:flex}.m-box[data-v-3478c2be]{height:100%}.m-pop-echart-f01 .inner1[data-v-3478c2be]{padding-bottom:32px}#allmap[data-v-3478c2be]{height:100%;width:100%}.ul-previewOnline .inner[data-v-3478c2be]{height:15rem}.picbox[data-v-1cee8908]{position:relative}.ashEchart[data-v-1cee8908]{position:absolute;height:364px;width:310px;bottom:0px;left:0px}.block[data-v-1cee8908]{background:#000;position:relative}.swiper_video[data-v-1cee8908]{height:50rem}.swiper_item[data-v-1cee8908]{height:47.3rem}[data-v-1cee8908] .el-carousel__container{height:100%}[data-v-1cee8908] .el-carousel__button{display:block;width:1.4rem;height:1.4rem;border-radius:50%;background-color:rgba(255,255,255,.7);border:none;outline:0;padding:0;margin:0;cursor:pointer}[data-v-1cee8908] .is-active .el-carousel__button{background-color:rgba(63,142,200,.8)}.bottom_click[data-v-1cee8908]{position:absolute;bottom:11px;color:#fff}.bottom_click1[data-v-1cee8908]{left:47.7%;transform:translate(-47.7%)}.bottom_click2[data-v-1cee8908]{left:50%;transform:translate(-50%)}.bottom_click3[data-v-1cee8908]{left:52.2%;transform:translate(-52.2%)}.m-statusinfo .bottomdata[data-v-1cee8908]{display:flex;justify-content:space-between}.m-pop-detail .dialog-header .left .g-tabs[data-v-1cee8908]{width:26.75rem}.mapDiv[data-v-1cee8908]{width:100%;height:100%}.m-box[data-v-1cee8908]{height:100%}.m-pop-echart .col[data-v-1cee8908],.m-tab-echartTable[data-v-1cee8908]{height:auto}.m-pop-echart .row[data-v-1cee8908]{display:flex}.m-pop-echart-f01 .inner1[data-v-1cee8908]{padding-bottom:32px}.ul-previewOnline .inner[data-v-1cee8908]{height:332px}.m-statusinfo .bottom .item[data-v-1cee8908]{width:25%}.ul-previewOnline .inner[data-v-1cee8908]{height:362px}.m-pop-echart-f01 .inner1[data-v-1cee8908]{padding:1.7rem 2rem 0}.m-pop-echart-f01 h2[data-v-1cee8908]{line-height:40px}.m-datab1 .top[data-v-1cee8908]{margin-bottom:0}.m-datab1[data-v-1cee8908]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-1cee8908]{padding:0rem 1.125rem}.m-datab1 .top[data-v-1cee8908]{margin-top:1.25rem}.m-datab1[data-v-1cee8908]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-1cee8908]{padding:.1rem .15rem}.item_center[data-v-1cee8908]{text-align:center}.m-pop-echart-two[data-v-1cee8908]{display:flex;flex-direction:row}.echart[data-v-1cee8908]{display:flex;flex-direction:column}.echart .col[data-v-1cee8908]{height:100%}.m-pop-echart-two .el-col-12[data-v-1cee8908]{width:100%}.m-datab1 .picbox .bg[data-v-1cee8908]{height:680px}.picbox .databar[data-v-1cee8908]{height:354px}.picbox .zt[data-v-1cee8908]{height:325px}.block[data-v-f784c432]{background:#000;position:relative}.swiper_video[data-v-f784c432]{height:50rem}.swiper_item[data-v-f784c432]{height:47.3rem}[data-v-f784c432] .el-carousel__container{height:100%}[data-v-f784c432] .el-carousel__button{display:block;width:1.4rem;height:1.4rem;border-radius:50%;background-color:rgba(255,255,255,.7);border:none;outline:0;padding:0;margin:0;cursor:pointer}[data-v-f784c432] .is-active .el-carousel__button{background-color:rgba(63,142,200,.8)}.bottom_click[data-v-f784c432]{position:absolute;bottom:11px;color:#fff}.bottom_click1[data-v-f784c432]{left:47.7%;transform:translate(-47.7%)}.bottom_click2[data-v-f784c432]{left:50%;transform:translate(-50%)}.bottom_click3[data-v-f784c432]{left:52.2%;transform:translate(-52.2%)}.m-pop-echart .col[data-v-f784c432],.m-tab-echartTable[data-v-f784c432]{height:auto}.m-pop-echart .row[data-v-f784c432]{display:flex}.m-pop-echart-f01 .inner1[data-v-f784c432]{padding-bottom:32px}.m-box[data-v-f784c432]{height:100%;padding-top:1.25rem}.mapDiv[data-v-f784c432]{width:100%;height:100%}.ul-previewOnline .inner[data-v-f784c432]{height:16rem}.m-pop-echart-f01 .inner1[data-v-f784c432]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-f784c432]{margin-bottom:0}.m-datab1[data-v-f784c432]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-f784c432]{padding:0rem 1.125rem}.m-datab1 .top[data-v-f784c432]{margin-top:1.25rem}.m-datab1[data-v-f784c432]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-f784c432]{padding:.1rem .15rem}.m-statusinfo .bottom .item[data-v-f784c432]:first-child{width:20%}.m-statusinfo .info .item .tit[data-v-f784c432]{margin-right:1rem}.btnpile[data-v-f784c432]{width:150px}.item_center[data-v-f784c432]{text-align:center}.m-datab1 .left[data-v-f784c432]{margin-right:1rem!important}.mapDiv[data-v-72e2f207]{height:100%;width:100%}.m-pop-echart .col[data-v-72e2f207],.m-tab-echartTable[data-v-72e2f207]{height:auto}.m-pop-echart .row[data-v-72e2f207]{display:flex}.m-box[data-v-72e2f207]{height:100%;padding-top:1.25rem}.m-pop-echart-f01 .inner1[data-v-72e2f207]{padding-bottom:32px}.ul-previewOnline .inner[data-v-72e2f207]{height:18rem}.m-statusinfo .bottomdata[data-v-72e2f207]{display:flex;justify-content:space-between}.m-pop-echart-f01 .inner1[data-v-72e2f207]{padding:1.7rem 2rem 0}.m-datab1 .top[data-v-72e2f207]{margin-bottom:0}.m-datab1[data-v-72e2f207]{padding:.1rem 1.25rem 0rem}.m-datab1.top[data-v-72e2f207]{padding:0rem 1.125rem}.m-datab1 .top[data-v-72e2f207]{margin-top:1.25rem}.m-datab1[data-v-72e2f207]{padding:.1rem 1.25rem .75rem}.m-pop-echart .col[data-v-72e2f207]{padding:.1rem .15rem}.item_center[data-v-72e2f207]{text-align:center}.m-pop-echart .col[data-v-320b7c88],.m-tab-echartTable[data-v-320b7c88]{height:auto}.m-pop-echart .row[data-v-320b7c88]{display:flex}.m-box[data-v-320b7c88]{height:100%}.m-pop-echart-f01 .inner1[data-v-320b7c88]{padding-bottom:32px}\n",document.head.appendChild(t),System.register(["./gTabs-legacy.4cace1f6.js","./api-legacy.c8aab7c6.js","./moment-legacy.d336d678.js","./b4-legacy.8bb01245.js","./c-i1-legacy.accd10c9.js","./index-legacy.a832f31f.js","./gTabs.vue_vue_type_style_index_0_scoped_true_lang-legacy.6ffcbfbe.js"],(function(t){"use strict";var e,s,i,a,l,n,r,o,c,m,d,p,h,u,v,g,f;return{setters:[function(t){e=t.g},function(t){s=t.e,i=t.p,a=t.d,l=t.b,n=t.c,r=t.f,o=t.q},function(t){c=t.h,m=t.i},function(t){d=t.b},function(t){p=t._,h=t.a,u=t.b,v=t.c,g=t.d},function(t){f=t.n},function(){}],execute:function(){var C={},b=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:d,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,designDepth:30,designUpSpeed:"-",designDownSpeed:"-",image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"停钻",timer:null,deviceKey:"",pileId:"",fields:"",pile:[{pileDescribe:"--",pileId:""}],defaultpile:"",real:{current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:100,y:0,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}],ispileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},startTimefilters:function(t){return t?null==t.startTime?"-":t.startTime:"-"},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},sta2filters:function(t){switch(t){case"1":return"喷浆";case"0":return"止喷";default:return t}},pilefilter:function(t){return null==t?"--":t}},watch:{centerDialogVisible1:function(t,e){this.tab2=0,this.timer&&clearInterval(this.timer),0==t&&(this.datachange(),this.videonull())}},methods:{datachange:function(){this.ispileIds=!0,this.designDepth=30,this.pile=[],this.defaultpile="",this.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},closePop:function(t){this[t]=!1},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){this.myChart01=m(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(this.getOption1(t,this.deep,this.flow))},getOption1:function(t,e,s){return{title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:24},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","流量"]},grid:{top:"23%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m    ",type:"value",nameLocation:"end",inverse:!0,max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"流量(L/min)",type:"value",nameLocation:"start",inverse:!1,max:120,min:0,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:e,markPoint:{data:[{type:"max"}]}},{name:"流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:s}]}},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getdata(),this.videonull()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history"),this.videonull(),clearInterval(this.timer)),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo"),this.videonull(),clearInterval(this.timer)),3==t&&(clearInterval(this.timer),this.datachange(),this.video())},getPileIds:function(){var t=this;i(this.selectItem.key).then((function(e){if(null!=e){t.pile=e;for(var s=!0,i=0;i<t.pile.length;i++)t.defaultpile==t.pile[i].pileId&&(t.defaultpile=t.pile[i].pileId,t.ispileIds=!1,s=!1);s&&(t.defaultpile=t.pile[0].pileId,t.ispileIds=!1)}}))},getdata:function(){var t=this;a(this.selectItem.key,this.defaultpile,"realTime,flow,deep,pipeStatus").then((function(e){for(var s=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=0;i<e.length;i++){var a=c(1e3*e[i].realTime).format("YYYY-MM-DD HH:mm:ss"),n=[],r=[];n.push(a,e[i].flow.toFixed(2)),r.push(a,e[i].deep.toFixed(2)),t.flow.push(n),t.deep.push(r)}t.initEchart01(!1);var o=e[e.length-1];null!=o&&("1"==o.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==o.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==o.pipeStatus?t.pileStatusStr="下钻":"4"==o.pipeStatus&&t.pilefilter,t.depth=o.deep,t.myFun(o.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.defaultpile).then((function(e){if(null!=e){1==t.ispileIds&&t.getPileIds(),t.real=e,t.coordinates.center=[t.real.longitude,t.real.latitude],t.coordinates.position=[t.real.longitude,t.real.latitude],t.setAngle(t.real.xAngle,t.real.yAngle),"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.ispileIds=!0,t.recordStatusClass="",t.real.deep="--",t.real.speed="--",t.real.current="--",t.real.flow="--"),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth?(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"):t.pipeStatusClass="",t.depth=t.real.deep,0==t.real.nozzleStatus?t.nozzleStatusClass="":t.nozzleStatusClass="on";var i=c(1e3*e.realTime).format("YYYY-MM-DD HH:mm:ss");if((0==t.flow.length||t.flow[t.flow.length-1][0]!==i)&&"--"!==e.flow){var a=[],l=[];a.push(i,e.flow.toFixed(2)),l.push(i,e.deep.toFixed(2)),t.flow.push(a),t.deep.push(l),t.myChart01.setOption(t.getOption1(!1,t.deep,t.flow))}t.real.lasttime=((e.realTime-e.startTime)/60).toFixed(0),t.myFun(t.real.deep)}else t.ispileIds=!0,t.designDepth=30,t.pile=[],t.defaultpile="",t.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},t.flow=[],t.deep=[],t.depth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pipeStatusClass="",t.nozzleStatusClass="",t.image="stop",t.myChart01.setOption(t.getOption1(!0,t.deep,t.flow)),t.myFun(t.real.deep);s.close()}))}),3e3),setTimeout((function(){s.close()}),6e3)}))},video:function(){this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.playerOptions=[];for(var t=0;t<this.cameraLive.length;t++){var e={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[t].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(e)}},videonull:function(){this.playerOptions=[{sources:[{type:"application/x-mpegURL",src:""}],notSupportedMessage:"此视频暂无法播放,请稍后再试"}]},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];switch(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null!=this.cameraLive&&(this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.videonull()),""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=d:this.coordinates.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABy0lEQVRIie3Wu2sVQRSA8V8cxX9BMDAp0mijBBvBx1WwnYB2okgU7MQHWIhFMASbiFpZWJiIveAWNoLEB1ho4W20EXQKQaxsJSyxuBu4XHT33rBJIfmaw545e76Z2WUYttgkxuoGc84ghrQNFzCP57ksZtZqYkiLWM5l8bj/3RhjrXh708xiSB3cx75/THasaQEji2NIT3Bm1KbDsK1h/MRGSIcR78ciVvuTMaSJGFInhjRRpQ7GkHa2Js5l8SOXxXkcwJu+oSO4UkW4iM8xpJPDiof6q9eIIc1jHNexG9+xgHN9Za9w2Xi3W9e7aasH+VLF01iq4iBH8bap0ajiNR6gU8VBVnB3o8Q38K2K/TzD3lwWs00NGg+Qv5HLYg5zEENawidcymXxctge6xLHkGZxFfeq1MIoUkbY6hjScb2/GW5joorrYpizehJ3MF2l3ueyWMGvanxd4toVx5Bu6X2/6bq61sW4hh1tS4cRH9I7iZqYbFWcy6Kby6KDU/haU3ozhvQ6hjTVirhvAk+xBw9ryg7jQwzpUQxpVyviSv4b7xrKxjCDj62JR+TFZou7OJbL4mzb4lUDt5Hq+afeZWAql8XyiD23+E/5A0HPcluNPvyEAAAAAElFTkSuQmCC"),this.index=s,i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getPileIds(),this.getdata(),this.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"-":JSON.parse(this.selectItem.content).designUpSpeed,this.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"-":JSON.parse(this.selectItem.content).designDownSpeed;break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},myFun:function(t){this.y=Number(t).toFixed(2),this.designDepth=null==JSON.parse(this.selectItem.content).designDepth?30:JSON.parse(this.selectItem.content).designDepth+5,this.ztTop=100-t/this.designDepth*98+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("钻杆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"pipeStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷浆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"nozzleStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计浆量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalSlurry"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalSlurry?"(L)":""))])])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计灰量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalAsh"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalAsh?"(kg)":""))])])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{ref:"barparent",staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),1==t.pile.length?s("div",{staticClass:"value"},[t._v(" "+t._s(t.pile[0].pileDescribe||"")+" ")]):t._e(),0==t.pile.length?s("div",{staticClass:"value"},[t._v("--")]):t._e(),t.pile.length>1?s("el-select",{staticClass:"btnpile",model:{value:t.defaultpile,callback:function(e){t.defaultpile=e},expression:"defaultpile"}},t._l(t.pile,(function(t){return s("el-option",{key:t.index,attrs:{label:t.pileDescribe,value:t.pileId}})})),1):t._e()],1),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])]),s("li",{class:t.pipeStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),s("li",{class:t.nozzleStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("sta2filters")(t.real.nozzleStatus)))])])])])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("水灰比")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.waterCementRatio)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("密度")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.density,3)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计下钻速度")]),s("div",{staticClass:"value"},[t._v(t._s(t.designDownSpeed)+" cm/min")])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计提钻速度")]),s("div",{staticClass:"value"},[t._v(t._s(t.designUpSpeed)+" cm/min")])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、流量时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("持续时长(min)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t.real.lasttime))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计浆量(L)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalSlurry,1)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计灰量(kg)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalAsh,1)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("段浆量(L)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.partSlurry,1)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("段灰量(kg)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.partAsh,1)))])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),-9999!=t.real.current?s("p",[t._v(" 电流"),s("em",[t._v(t._s(t._f("numfilters")(t.real.current))+"(A)")])]):t._e(),-9999!=t.real.flow?s("p",[t._v(" 流量"),s("em",[t._v(t._s(t._f("numfilters")(t.real.flow))+"(L/min)")])]):t._e(),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"})])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,_,"74b77c90",null,null);function _(t){for(var e in C)this[e]=C[e]}var S=function(){return b.exports}(),y={},w=f({components:{gTabs:e},props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data:function(){return{coordinates:{center:[0,0],zoom:14,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b10.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,bottomLdata:[],recordStatusClass:"",timer:null,deviceKey:"",pileId:"",pile:[{channelId:"--",pileId:""}],defaultpile:"",real:{channelId:2,density:0,densityAsh:0,densitySand:0,densityStuff1:0,densityStuff2:0,densityStuff3:0,deviceKey:"-",disAsh:-9999,disGrout:-9999,flow:0,flowIn:0,flowOut:0,holeLatitude:0,holeLongitude:0,latitude:0,lifting:0,longitude:0,nozzleStatus:0,paramType:"",partDescribe:"0",perAsh:0,perGrout:0,pileDescribe:"1",pileId:0,pressure:0,pressurePeak:0,processMethod:"",processMode:"",realTime:0,recordStatus:0,rssi4G:0,rssiLORA:0,sandAsh:0,startTime:0,totAsh:0,totGrout:0,version:"1.00",waterAsh:0,waterRate:0,xash1:0,xash2:0,xash3:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},o1filters:function(t){return null==t?"-":t},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return parseFloat(t).toFixed(2)},stafilters:function(t){switch(t){case 1:return"记录中";case 2:return"暂停";case 0:return"结束";default:return t}},parfilters:function(t){return 0==t?"二参数":1==t?"三参数":2==t?"四参数":"-"},metfilters:function(t){return 0==t?"大循环":1==t?"小循环":"-"},modefilters:function(t){return 0==t?"灌浆施工记录":1==t?"封孔施工记录":2==t?"简易压水施工记录":3==t?"单点压水施工记录":4==t?"五点压水施工记录":5==t?"裂隙压水施工记录":6==t?"帷幕灌浆":7==t?"固结灌浆":8==t?"岩溶注浆":"-"}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.watchData(),this.timer&&clearInterval(this.timer))}},methods:{watchData:function(){this.ispileIds=!0,this.pile=[],this.defaultpile="",this.real={channelId:2,density:0,densityAsh:0,densitySand:0,densityStuff1:0,densityStuff2:0,densityStuff3:0,deviceKey:"-",disAsh:-9999,disGrout:-9999,flow:0,flowIn:0,flowOut:0,holeLatitude:0,holeLongitude:0,latitude:0,lifting:0,longitude:0,nozzleStatus:0,paramType:"",partDescribe:"0",perAsh:0,perGrout:0,pileDescribe:"1",pileId:0,pressure:0,pressurePeak:0,processMethod:"",processMode:"",realTime:0,recordStatus:0,rssi4G:0,rssiLORA:0,sandAsh:0,startTime:0,totAsh:0,totGrout:0,version:"1.00",waterAsh:0,waterRate:0,xash1:0,xash2:0,xash3:0},this.flow=[],this.deep=[],void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),void 0===this.sirclemyChart01||this.sirclemyChart01._disposed||this.sirclemyChart01.dispose())},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["注浆","压力"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"注浆 ",type:"value",inverse:!1,nameLocation:"start",nameGap:20,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 压力",type:"value",inverse:!1,nameLocation:"start",nameGap:20,max:10,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"注浆",type:"line",showSymbol:!1,data:this.deep},{name:"压力",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},sircleEchart01:function(){var t={tooltip:{formatter:"{b} : {c}"},series:[{name:"Pressure",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}",fontSize:15},max:300,radius:"100%",data:[{value:this.real.flow.toFixed(2),name:"注浆"}]}]};this.sirclemyChart01=m(this.$refs.sirclemyChart01,null,{renderer:"svg"}),this.sirclemyChart01.setOption(t)},sircleEchart02:function(){var t={tooltip:{formatter:"{b} : {c}"},series:[{name:"Pressure",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}",fontSize:16},max:300,radius:"100%",data:[{value:this.real.flowIn.toFixed(2),name:"进浆"}]}]};this.sirclemyChart02=m(this.$refs.sirclemyChart02,null,{renderer:"svg"}),this.sirclemyChart02.setOption(t)},sircleEchart03:function(){var t={tooltip:{formatter:"{b} : {c}"},series:[{name:"Pressure",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}",fontSize:16},max:300,radius:"100%",data:[{value:this.real.flowOut.toFixed(2),name:"返浆"}]}]};this.sirclemyChart03=m(this.$refs.sirclemyChart03,null,{renderer:"svg"}),this.sirclemyChart03.setOption(t)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&this.timer&&(clearInterval(this.timer),this.watchData())},getpileIds:function(){var t=this;i(this.selectItem.key).then((function(e){if(null!=e){t.pile=e;for(var s=!0,i=0;i<t.pile.length;i++)t.defaultpile==t.pile[i].pileId&&(t.defaultpile=t.pile[i].pileId,t.ispileIds=!1,s=!1);s&&(t.defaultpile=t.pile[0].pileId,t.ispileIds=!1)}}))},getData:function(){var t=this;a(this.selectItem.key,this.defaultpile,"realTime,pressure,flow").then((function(e){for(var s=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=0;i<e.length;i++){var a=c(1e3*e[i].realTime).format("YYYY-MM-DD HH:mm:ss"),n=[],r=[];n.push(a,e[i].pressure.toFixed(2)),r.push(a,e[i].flow.toFixed(2)),t.flow.push(n),t.deep.push(r)}t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.timer=setInterval((function(){l(t.selectItem.key,t.defaultpile).then((function(e){if(null!=e){1==t.ispileIds&&t.getpileIds(),t.real=e,t.coordinates.center=[t.real.longitude,t.real.latitude],t.coordinates.position=[t.real.longitude,t.real.latitude],"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0);var i=c(1e3*e.realTime).format("YYYY-MM-DD HH:mm:ss");if(t.flow[t.flow.length-1][0]!=i){var a=[],l=[];a.push(i,e.pressure.toFixed(2)),l.push(i,e.flow.toFixed(2)),t.flow.push(a),t.deep.push(l),t.real.lasttime=((e.realTime-e.startTime)/60).toFixed(0)}t.initEchart01(!1),t.sircleEchart01(),t.sircleEchart02(),t.sircleEchart03()}else t.ispileIds=!0,t.initEchart01(!0);s.close()}))}),3e3),setTimeout((function(){s.close()}),6e3)}))},handleCommand:function(t){var e=this,s=this,i=t.split("-")[0],a=t.split("-")[1];if(this.selectItem=this.onlineList[i],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var l=0;l<this.cameraLive.length;l++){var n={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[l].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(n)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=require("@/assets/images/map/b10.png"):this.coordinates.icon=require("@/assets/images/map/a9.png")),a){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){e.sircleEchart01(),e.sircleEchart02(),e.sircleEchart03(),window.onresize=function(){s.myChart01.resize()}})),this.getpileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷浆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime||"","nozzleStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计浆量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime||"","totalSlurry"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalSlurry?"(L)":""))])])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计灰量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime||"","totalAsh"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalAsh?"(kg)":""))])])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",[s("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("通道")]),1==t.pile.length?s("div",{staticClass:"value"},[t._v(t._s(t.pile[0].pileDescribe||""))]):t._e(),0==t.pile.length?s("div",{staticClass:"value"},[t._v("--")]):t._e(),t.pile.length>1?s("el-select",{staticClass:"btnpile",model:{value:t.defaultpile,callback:function(e){t.defaultpile=e},expression:"defaultpile"}},t._l(t.pile,(function(t){return s("el-option",{key:t.index,attrs:{label:t.channelId,value:t.pileId}})})),1):t._e()],1),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])])])]),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("孔号")]),s("div",{staticClass:"value"},[t._v(t._s(t.real.pileDescribe))])]),s("div",{staticClass:"item"},[s("h3",[t._v("水灰比")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.waterAsh)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("灌浆模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("modefilters")(t.real.processMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("参数模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("parfilters")(t.real.paramType)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("灌浆方法")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("metfilters")(t.real.processMethod)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("持续时长")]),s("b",[t._v(t._s(t.real.lasttime)+"分钟")])]),s("div",{staticClass:"item"},[s("h3",[t._v("峰值压力")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.pressurePeak))+"mpa")])]),s("div",{staticClass:"item"},[s("h3",[t._v("累计浆量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.totGrout))+"L")])]),s("div",{staticClass:"item"},[s("h3",[t._v("累计灰量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.totAsh))+"kg")])]),s("div",{staticClass:"item"},[s("h3",[t._v("单位浆量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.perGrout))+"L")])]),s("div",{staticClass:"item"},[s("h3",[t._v("单位灰量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.perAsh))+"kg")])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("注浆压力曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top",staticStyle:{height:"50px"}},[s("h2",[t._v("实时数据")])]),s("div",{staticClass:"item_bottom_out"},[s("div",{staticClass:"item_bottomL"},[s("h3",[t._v("注浆L/min")]),s("b",{staticClass:"item_b"},[t._v(t._s(t._f("numfilters")(t.real.flow)))])]),s("div",{staticClass:"item_bottomL"},[s("h3",[t._v("进浆L/min")]),s("b",{staticClass:"item_b"},[t._v(t._s(t._f("numfilters")(t.real.flowIn)))])]),s("div",{staticClass:"item_bottomL"},[s("h3",[t._v("返浆L/min")]),s("b",{staticClass:"item_b"},[t._v(t._s(t._f("numfilters")(t.real.flowOut)))])]),s("div",{staticClass:"item_bottomL"},[s("h3",[t._v("压力mpa")]),s("b",{staticClass:"item_b"},[t._v(t._s(t._f("numfilters")(t.real.pressure)))])]),s("div",{staticClass:"item_bottomL"},[s("h3",[t._v("密度g/cm³")]),s("b",{staticClass:"item_b"},[t._v(t._s(t._f("numfilters")(t.real.density)))])])]),s("div",{staticStyle:{width:"100%",height:"50%"}},[s("div",{ref:"sirclemyChart01",style:{width:"33%",height:"100%",float:"left"}}),s("div",{ref:"sirclemyChart02",style:{width:"33%",height:"100%",float:"left"}}),s("div",{ref:"sirclemyChart03",style:{width:"33%",height:"100%",float:"left"}}),s("div",{staticStyle:{clear:"both"}})])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:" sizes,slot, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,I,"11004a90",null,null);function I(t){for(var e in y)this[e]=y[e]}var x=function(){return w.exports}(),k={},P=f({components:{gTabs:e},props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,designUpSpeed:"-",recordStatusClass:"",pipeStatusClass:"",nozzleStatusClass:"",depth:0,pileStatusStr:"停钻",image:"stop",pagecount:100,timer:null,deviceKey:"",pileId:"",pile:[],real:{air:0,airPressure:0,deep:0,density:0,deviceKey:"-",latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partPulp:0,pileDescribe:"-",pileId:0,pipeMode:"",pipeStatus:"0",pulp:0,pulpPressure:0,pumpMode:"",realTime:0,recodeInterval:0,recordMode:"0",recordStatus:"3",returnPulp:0,returnPulpPressure:0,rotateSpeed:0,signal4g:23,signalLora:0,speed:0,startTime:0,totalAir:0,totalAsh:0,totalPulp:0,totalReturnPulp:0,totalWater:0,version:"0",vertical:0,water:0,waterCementRatio:0,waterPressure:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],isPileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},startTimefilters:function(t){return t?null==t.startTime?"-":t.startTime:"-"},pilefilter:function(t){return null==t?"--":t},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("HH:mm:ss")},pulpfilters:function(t){},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},sta1filters:function(t){return"1"==t?"下钻":"2"==t?"提钻":"3"==t?"复下":"4"==t?"复提":"停止"},sta2filters:function(t){switch(t){case"1":return"喷浆";case"0":return"止喷";default:return t}},recordfilters:function(t){switch(t){case"1":return"深度模式";case"2":return"时间模式";case"0":return"-";default:return t}},intervalfilters:function(t){switch(t.recordMode){case"1":return t.recodeInterval+"cm";case"2":return t.recodeInterval+"s";case"0":return"-";default:return t}},pumpfilters:function(t){return"1"==t?"单管":"2"==t?"二重管":"3"==t?"三重管":""==t?"-":void 0},pipfilters:function(t){return"1"==t?"单杆":"2"==t?"接杆":"-"}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData:function(){this.isPileIds=!0,this.pile=[],this.real={air:0,airPressure:0,deep:0,density:0,deviceKey:"-",latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partPulp:0,pileDescribe:"-",pileId:0,pipeMode:"",pipeStatus:"0",pulp:0,pulpPressure:0,pumpMode:"",realTime:0,recodeInterval:0,recordMode:"0",recordStatus:"3",returnPulp:0,returnPulpPressure:0,rotateSpeed:0,signal4g:23,signalLora:0,speed:0,startTime:0,totalAir:0,totalAsh:0,totalPulp:0,totalReturnPulp:0,totalWater:0,version:"0",vertical:0,water:0,waterCementRatio:0,waterPressure:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){this.myChart01=m(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(this.getOption1(t,this.deep,this.flow))},getOption1:function(t,e,s){return{title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"45%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["浆量","浆压"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"浆量 ",type:"value",inverse:!1,nameLocation:"start",max:80,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 浆压",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"浆量",type:"line",showSymbol:!1,data:s},{name:"浆压",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:e}]}},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getPileId:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.isPileIds=!1)}))},getData:function(){var t=this,e=this;a(this.selectItem.key,this.pileId,"realTime,pulp,pulpPressure,pipeStatus").then((function(s){for(var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=0;a<s.length;a++){var n=c(1e3*s[a].realTime).format("YYYY-MM-DD HH:mm:ss"),r=[],o=[];r.push(n,s[a].pulp.toFixed(2)),o.push(n,s[a].pulpPressure.toFixed(2)),t.flow.push(r),t.deep.push(o)}t.initEchart01(!1);var m=s[s.length-1];null!=m&&("1"==m.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==m.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==m.pipeStatus?t.pileStatusStr="下钻":"4"==m.pipeStatus&&t.pilefilter,t.depth=m.deep,e.myFun(m.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.isPileIds&&t.getPileId(),t.real=s,t.setAngle(t.real.xAngle,t.real.yAngle),t.coordinates.position=[t.real.longitude,t.real.latitude],t.coordinates.center=[t.real.longitude,t.real.latitude],"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.isPileIds=!0),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth?(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"):t.pipeStatusClass="",t.depth=t.real.deep,0==t.real.nozzleStatus?t.nozzleStatusClass="":t.nozzleStatusClass="on";var a=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(t.flow[t.flow.length-1][0]!=a){var l=[],n=[];l.push(a,s.pulp.toFixed(2)),n.push(a,s.pulpPressure.toFixed(2)),t.flow.push(l),t.deep.push(n),t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),t.myChart01.setOption(t.getOption1(!1,t.deep,t.flow)),e.myFun(t.real.deep)}}else t.isPileIds=!0,t.pile=[],t.real={air:0,airPressure:0,deep:0,density:0,deviceKey:"-",latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partPulp:0,pileDescribe:"-",pileId:0,pipeMode:"",pipeStatus:"0",pulp:0,pulpPressure:0,pumpMode:"",realTime:0,recodeInterval:0,recordMode:"0",recordStatus:"3",returnPulp:0,returnPulpPressure:0,rotateSpeed:0,signal4g:23,signalLora:0,speed:0,startTime:0,totalAir:0,totalAsh:0,totalPulp:0,totalReturnPulp:0,totalWater:0,version:"0",vertical:0,water:0,waterCementRatio:0,waterPressure:0,xAngle:0,yAngle:0,lasttime:0},t.flow=[],t.deep=[],t.depth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pipeStatusClass="",t.nozzleStatusClass="",t.myChart01.setOption(t.getOption1(!0,t.deep,t.flow)),t.image="stop",e.myFun(t.real.deep);i.close()}))}),3e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]]),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"-":JSON.parse(this.selectItem.content).designUpSpeed,this.getPileId(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("钻杆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"pipeStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷浆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"nozzleStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计浆量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalSlurry"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalSlurry?"(L)":""))])])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计灰量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalAsh"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalAsh?"(kg)":""))])])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pilefilter")(t.pile.pileDescribe)))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])]),s("li",{class:t.pipeStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),s("li",{class:t.nozzleStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("sta2filters")(t.real.nozzleStatus)))])])])])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("水灰比")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.waterCementRatio)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("recordfilters")(t.real.recordMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("喷射模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pumpfilters")(t.real.pumpMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计喷射压力")]),s("div",{staticClass:"value"},[t._v("- mpa")])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计提钻速度")]),s("div",{staticClass:"value"},[t._v(t._s(t.designUpSpeed)+" cm/min")])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录间隔")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("intervalfilters")(t.real)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("钻杆模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pipfilters")(t.real.pipeMode)))])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("浆量、浆压曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("持续时长")]),s("b",{staticClass:"item_center"},[t._v(t._s(t.real.lasttime)+" min")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("喷射时长")]),s("b",{staticClass:"item_center"},[t._v("- min")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计浆量")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalPulp,1))+" L")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计灰量")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalAsh,1))+" kg")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计水量")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalWater,1))+" L")])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("流量"),s("em",[t._v(t._s(t._f("numfilters")(t.real.pulp))+"(L/min)")])]),s("p",[t._v("压力"),s("em",[t._v(t._s(t._f("numfilters")(t.real.pulpPressure))+"(Mpa)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,D,"19e9eae7",null,null);function D(t){for(var e in k)this[e]=k[e]}var z=function(){return P.exports}(),T={},N=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,designUpSpeed:"-",designDownSpeed:"-",recordStatusClass:"",pipeStatusClass:"",nozzleStatusClass:"",depth:0,pileStatusStr:"停钻",image:"stop",timer:null,deviceKey:"",pileId:"",pile:[],real:{air:0,airPressure:0,altitude:0,antennaHeight:0,averageAsh:0,averageSlurry:0,deep:0,deepMode:"0",density:0,deviceKey:"-",deviceMode:1,flow:0,flow1:0,flow2:0,flow3:0,flow4:0,flow5:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partFlow:0,partFlow1:0,partFlow2:0,partFlow3:0,partFlow4:0,partFlow5:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure1:0,pressure2:0,pressure3:0,pressure4:0,pressure5:0,qfRtk:0,realTime:0,recordInterval:"1",recordMode:"0",recordStatus:"3",speed:0,starRtk:0,startTime:0,totalAir:0,totalAsh:0,totalFlow:0,totalFlow1:0,totalFlow2:0,totalFlow3:0,totalFlow4:0,totalFlow5:0,totalSlurry:0,version:"-",verticality:0,waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipeTime:function(t,e){return t?"1970-01-01 08:00:00"==t[e]||null==t[e]?"-":t[e]:"-"},ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},pilefilter:function(t){return null==t?"--":t},startTimefilters:function(t){return t?null==t.startTime?"-":t.startTime:"-"},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},sta2filters:function(t){return"1"===t?"喷浆":"止喷"},recordfilters:function(t){switch(t){case"0":return"深度模式";case"1":return"时间模式"}},intervalfilters:function(t){return"0"===t.recordInterval?"1"===t.recordMode?"5s":"20cm":"1"===t.recordInterval?"1"===t.recordMode?"10s":"25cm":"2"===t.recordInterval?"1"===t.recordMode?"30s":"50cm":"3"===t.recordInterval?"1"===t.recordMode?"60s":"100cm":void 0},deepModefilters:function(t){return"1"===t?"RTK":"编码器"},qfRtkfilters:function(t){switch(t){case 1:return"单点解";case 2:return"伪距差分";case 4:return"固定解";case 5:return"浮动解";default:return"无效"}},devicefilters:function(t){return 1!==t?"压力(MPa)":"电流(A)"}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData:function(){this.ispileIds=!0,this.pile=[],this.real={air:0,airPressure:0,altitude:0,antennaHeight:0,averageAsh:0,averageSlurry:0,deep:0,deepMode:"0",density:0,deviceKey:"-",deviceMode:1,flow:0,flow1:0,flow2:0,flow3:0,flow4:0,flow5:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partFlow:0,partFlow1:0,partFlow2:0,partFlow3:0,partFlow4:0,partFlow5:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure1:0,pressure2:0,pressure3:0,pressure4:0,pressure5:0,qfRtk:0,realTime:0,recordInterval:"1",recordMode:"0",recordStatus:"3",speed:0,starRtk:0,startTime:0,totalAir:0,totalAsh:0,totalFlow:0,totalFlow1:0,totalFlow2:0,totalFlow3:0,totalFlow4:0,totalFlow5:0,totalSlurry:0,version:"-",verticality:0,waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.depth=0,this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.myChart01.dispose(),this.image="stop"},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){this.myChart01=m(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(this.getoption1(t,this.deep,this.flow))},getoption1:function(t,e,s){return{title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","总流量"]},grid:{top:"25%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 总流量(L/min)",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]},max:300}],series:[{name:"深度",type:"line",showSymbol:!1,data:e,markPoint:{data:[{type:"max"}]}},{name:"总流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:s}]}},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getpileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this;a(this.selectItem.key,this.pileId,"realTime,flow,deep,pipeStatus").then((function(s){for(var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=0;a<s.length;a++){var n=c(1e3*s[a].realTime).format("YYYY-MM-DD HH:mm:ss"),r=[],o=[];r.push(n,s[a].flow.toFixed(2)),o.push(n,s[a].deep.toFixed(2)),t.flow.push(r),t.deep.push(o)}t.initEchart01(!1);var m=s[s.length-1];null!=m&&("1"==m.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==m.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==m.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"4"==m.pipeStatus&&(t.pilefilter,t.image="up"),t.depth=m.deep,e.myFun(m.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getpileIds(),t.real=s,t.coordinates.position=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],t.coordinates.center=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],t.setAngle(t.real.xAngle,t.real.yAngle),"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth?(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"):t.real.pipeStatusClass,t.depth=t.real.deep,"1"==t.real.nozzleStatus?t.nozzleStatusClass="on":t.nozzleStatusClass="";var a=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(t.flow[t.flow.length-1][0]!==a){var l=[],n=[];l.push(a,s.flow.toFixed(2)),n.push(a,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.myChart01.setOption(t.getoption1(!1,t.deep,t.flow))}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.flow=[],t.deep=[],t.depth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pipeStatusClass="",t.nozzleStatusClass="",t.ispileIds=!0,t.myChart01.setOption(t.getoption1(!1,t.deep,t.flow)),e.myFun(t.real.deep);i.close()}))}),3e3),setTimeout((function(){i.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=require("@/assets/images/map/b2.png"):this.coordinates.icon=require("@/assets/images/map/a2.png")),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"-":JSON.parse(this.selectItem.content).designUpSpeed,this.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"-":JSON.parse(this.selectItem.content).designDownSpeed,this.getpileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/30*98+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipeTime")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("钻杆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"pipeStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷浆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"nozzleStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计浆量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalSlurry"))),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalSlurry?"(L)":""))])])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计灰量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalAsh"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalAsh?"(kg)":""))])])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.work,callback:function(e){t.$set(t.form,"work",e)},expression:"form.work"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",[s("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pilefilter")(t.pile.pileDescribe)))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status",staticStyle:{width:"20rem",float:"right"}},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])]),s("li",{class:t.pipeStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),s("li",{class:t.nozzleStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("sta2filters")(t.real.nozzleStatus)))])])])]),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("水灰比")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.waterCementRatio)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("recordfilters")(t.real.recordMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("深度模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("deepModefilters")(t.real.deepMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计提钻速度")]),s("div",{staticClass:"value"},[t._v(t._s(t.designUpSpeed)+" cm/min")])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计下钻速度")]),s("div",{staticClass:"value"},[t._v(t._s(t.designDownSpeed)+" cm/min")])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录间隔")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("intervalfilters")(t.real)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("解析状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("qfRtkfilters")(t.real.qfRtk)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("流量(L/min)")]),s("ul",{staticClass:"item_ul_flow"},[s("li",{staticClass:"item_flow"},[s("h6",[t._v("1")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.flow1)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("2")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.flow2)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("3")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.flow3)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("4")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.flow4)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("5")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.flow5)))])]),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"item"},[s("h3",[t._v(t._s(t._f("devicefilters")(t.real.deviceMode)))]),s("ul",[s("li",{staticClass:"item_flow"},[s("h6",[t._v("1")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.pressure1)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("2")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.pressure2)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("3")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.pressure3)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("4")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.pressure4)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("5")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.pressure5)))])]),s("div",{staticStyle:{clear:"both"}})])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、流量时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"},[s("h2",[t._v("电子地图")])]),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("持续时长(min)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t.real.lasttime))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("密度(g/cm³)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.density)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计浆量(L)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalSlurry,1)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计灰量(kg)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalAsh,1)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("段浆量(L)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.averageSlurry,1)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("段灰量(kg)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.averageAsh,1)))])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("总流量"),s("em",[t._v(t._s(t._f("numfilters")(t.real.flow))+"(L/min)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,L,"3d4fce1d",null,null);function L(t){for(var e in T)this[e]=T[e]}var A=function(){return N.exports}(),O={},J=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",image:"stop",depth:0,pileStatusStr:"停钻",timer:null,deviceKey:"",pileId:"",fields:"",pile:[],real:{deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"1",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"-",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"0",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"0",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},recordfilters:function(t){switch(t){case"1":return"时间模式";case"2":return"深度模式";default:return t}},intervalfilters:function(t){return"0"===t.recordInterval?"1"===t.recordMode?"5s":"20cm":"1"===t.recordInterval?"1"===t.recordMode?"10s":"25cm":"2"===t.recordInterval?"1"===t.recordMode?"30s":"50cm":"3"===t.recordInterval?"1"===t.recordMode?"60s":"100cm":void 0}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData:function(){this.ispileIds=!0,this.pile=[],this.real={deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"1",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"-",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"0",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"0",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","压桩力"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"压桩力",type:"value",inverse:!1,nameLocation:"start",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"压桩力",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getdata()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getPileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getdata:function(){var t=this,e=this;a(this.selectItem.key,this.pileId,"realTime,pressure,deep,pipeStatus").then((function(s){for(var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=0;a<s.length;a++){var n=c(1e3*s[a].realTime).format("YYYY-MM-DD HH:mm:ss"),r=[],o=[];r.push(n,s[a].pressure.toFixed(2)),o.push(n,s[a].deep.toFixed(2)),t.flow.push(r),t.deep.push(o)}t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1);var d=s[s.length-1];null!=d&&("1"==d.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==d.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==d.pipeStatus?t.pileStatusStr="下钻":"4"==d.pipeStatus&&t.pilefilter,t.depth=d.deep,e.myFun(d.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getPileIds(),t.real=s,t.setAngle(t.real.xAngle,t.real.yAngle),t.coordinates.position=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],t.coordinates.center=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth?(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"):t.pipeStatusClass="",t.depth=t.real.deep;var a=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(t.flow[t.flow.length-1][0]!==a){var l=[],n=[];l.push(a,s.pressure.toFixed(2)),n.push(a,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.ispileIds=!0,t.pile=[],t.real={deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"1",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"-",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"0",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"0",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0,lasttime:0},t.flow=[],t.deep=[],t.depth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pipeStatusClass="",t.nozzleStatusClass="",t.initEchart01(!0),t.image="stop",e.myFun(t.real.deep);i.close()}))}),3e3),setTimeout((function(){i.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=require("@/assets/images/map/b1.png"):this.coordinates.icon=require("@/assets/images/map/a1.png")),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getPileIds(),this.getdata();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",[s("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t.pile.pileDescribe))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])])])]),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"bottom left_bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("recordfilters")(t.real.recordMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录间隔")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("intervalfilters")(t.real)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("桩长(m)")]),s("ul",{staticClass:"item_ul_flow"},[s("li",{staticClass:"item_flow"},[s("h6",[t._v("1")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length1)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("2")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length2)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("3")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length3)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("4")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length4)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("5")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length5)))])])])]),s("div",{staticClass:"item"},[s("h3",[t._v("时长(s)")]),s("ul",{staticClass:"item_ul_flow"},[s("li",{staticClass:"item_flow"},[s("h6",[t._v("1")]),s("p",[t._v(t._s(t.real.time1))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("2")]),s("p",[t._v(t._s(t.real.time2))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("3")]),s("p",[t._v(t._s(t.real.time3))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("4")]),s("p",[t._v(t._s(t.real.time4))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("5")]),s("p",[t._v(t._s(t.real.time5))])])])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、压力时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"},[s("h2",[t._v("电子地图")])]),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("持续时长(min)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t.real.lasttime))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("最大深度(m)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.maxDeep)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("液压力(MPa)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.waterPressure)))])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("垂直度(%)")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.verticality)))])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("压桩力"),s("em",[t._v(t._s(t._f("numfilters")(t.real.pressure))+"(MPa)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,$,"2fa374d5",null,null);function $(t){for(var e in O)this[e]=O[e]}var M=function(){return J.exports}(),F={},V=f({components:{gTabs:e},props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b3.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",timer:null,deviceKey:"",pileId:"",pile:[],real:{recordStatus:3,startTime:0,xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},pilefilter:function(t){return null==t?"--":t},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),null==t?"-":isNaN(t)?t:parseFloat(t).toFixed(e)},stafilters:function(t){switch(t){case 1:return"记录中";case 2:return"暂停";case 3:return"结束";default:return t}},parfilters:function(t){return 0==t?"二参数":1==t?"三参数":1==t?"四参数":"-"},metfilters:function(t){return 0==t?"大循环":1==t?"小循环":"-"},modefilters:function(t){return 0==t?"灌浆施工记录":1==t?"封孔施工记录":2==t?"简易压水施工记录":3==t?"单点压水施工记录":4==t?"五点压水施工记录":5==t?"裂隙压水施工记录":6==t?"帷幕灌浆":7==t?"固结灌浆":8==t?"岩溶注浆":"-"}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.timer&&clearInterval(this.timer),this.getwatchData())}},methods:{getwatchData:function(){this.ispileIds=!0,this.flow=[],this.deep=[],void 0===this.myChart01||this.myChart01._disposed||this.myChart01.dispose()},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:28},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"3%",right:"10%",data:["注浆","压力"]},grid:{top:"22%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"注浆   ",type:"value",inverse:!1,nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0}},{name:"  压力",type:"value",inverse:!1,nameLocation:"start",max:10,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"注浆",type:"line",showSymbol:!1,data:this.deep},{name:"压力",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getPileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[1],t.ispileIds=!1)}))},getData:function(){var t=this;a(this.selectItem.key,this.pileId,"realTime,pressure,flow").then((function(e){for(var s=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=0;i<e.length;i++){var a=c(1e3*e[i].realTime).format("YYYY-MM-DD HH:mm:ss"),n=[],r=[];n.push(a,e[i].pressure.toFixed(2)),r.push(a,e[i].flow.toFixed(2)),t.flow.push(n),t.deep.push(r)}t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(e){if(null!=e){t.real=e,1==t.ispileIds&&t.getPileIds(),"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0);var i=c(1e3*e.realTime).format("YYYY-MM-DD HH:mm:ss");if(0!=t.flow.length||t.flow[t.flow.length-1][0]!=i){var a=[],l=[];a.push(i,e.pressure.toFixed(2)),l.push(i,e.flow.toFixed(2)),t.flow.push(a),t.deep.push(l),t.initEchart01(!1)}t.real.lasttime=((e.realTime-e.startTime)/60).toFixed(0)}else t.ispileIds=!0,t.flow=[],t.deep=[],t.initEchart01(!0);s.close()}))}),3e3),setTimeout((function(){s.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=require("@/assets/images/map/b3.png"):this.coordinates.icon=require("@/assets/images/map/a3.png")),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getPileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷浆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"nozzleStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计浆量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalSlurry"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalSlurry?"(L)":""))])])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计灰量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalAsh"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalAsh?"(kg)":""))])])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",[s("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("孔号")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pilefilter")(t.pile.pileDescribe)))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])])])]),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("孔号")]),s("div",{staticClass:"value"},[t._v(t._s(t.real.pileDescribe))])]),s("div",{staticClass:"item"},[s("h3",[t._v("水灰比")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.waterAsh)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("灌浆模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("modefilters")(t.real.processMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("参数模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("parfilters")(t.real.paramType)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("灌浆方法")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("metfilters")(t.real.processMethod)))])]),s("div",{staticClass:"item"},[s("p",[t._v("持续时长")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.lasttime,0))+" 分钟")])]),s("div",{staticClass:"item"},[s("p",[t._v("峰值压力")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.pressurePeak))+" mpa")])]),s("div",{staticClass:"item"},[s("p",[t._v("累计浆量")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.totGrout))+" L")])]),s("div",{staticClass:"item"},[s("p",[t._v("累计灰量")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.totAsh))+" kg")])]),s("div",{staticClass:"item"},[s("p",[t._v("单位浆量")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.perGrout))+" L")])]),s("div",{staticClass:"item"},[s("p",[t._v("单位灰量")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.perAsh))+" kg")])]),s("div",{staticClass:"item"},[s("p",[t._v("注浆")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.flow))+" L/min")])]),s("div",{staticClass:"item"},[s("p",[t._v("进浆")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.flowIn))+" L/min")])]),s("div",{staticClass:"item"},[s("p",[t._v("返浆")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.flowOut))+" L/min")])]),s("div",{staticClass:"item"},[s("p",[t._v("压力")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.pressure))+" map")])]),s("div",{staticClass:"item"},[s("p",[t._v("密度")]),s("p",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.density))+" g/cm³")])])])])])]),s("el-col",{staticClass:"col",staticStyle:{height:"100%"},attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("注浆压力曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"}),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,Y,"5336e958",null,null);function Y(t){for(var e in F)this[e]=F[e]}var H=function(){return V.exports}(),U={},j=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:d,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",image:"stop",depth:0,pileStatusStr:"停钻",timer:null,deviceKey:"",pileId:"",pile:[],real:[],flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return c(1e3*t).format("HH:mm:ss")},numfilters:function(t){return""==t?"-":parseFloat(t).toFixed(2)},num2filters:function(t){return parseFloat(t).toFixed(1)},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},recordfilters:function(t){return"1"===t?"时间模式":"深度模式"},intervalfilters:function(t){return"0"===t.recordInterval?"1"===t.recordMode?"5s":"20cm":"1"===t.recordInterval?"1"===t.recordMode?"10s":"25cm":"2"===t.recordInterval?"1"===t.recordMode?"30s":"50cm":"3"===t.recordInterval?"1"===t.recordMode?"60s":"100cm":void 0},modefilters:function(t){return"0"===t?"单杆模式":"1"===t?"接杆模式":"RTK"}},watch:{centerDialogVisible1:function(t,e){this.timer&&clearInterval(this.timer),0==t&&this.getwatchData()}},methods:{getwatchData:function(){this.ispileIds=!0,this.pile=[],this.defaultpile="",this.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"21%",left:"4%",right:"4%",bottom:"12%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"   电流A",type:"value",inverse:!1,nameLocation:"start",max:300,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getPileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this;a(this.selectItem.key,this.pileId,"realTime,current1,deep,pipeStatus").then((function(s){for(var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=0;a<s.length;a++){var n=c(1e3*s[a].realTime).format("YYYY-MM-DD HH:mm:ss"),r=[],o=[];r.push(n,s[a].current1.toFixed(2)),o.push(n,s[a].deep.toFixed(2)),t.flow.push(r),t.deep.push(o)}t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1);var d=s[s.length-1];null!=d&&("1"==d.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==d.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==d.pipeStatus?t.pileStatusStr="下钻":"4"==d.pipeStatus&&t.pilefilter,t.depth=d.deep,e.myFun(d.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getPileIds(),t.real=s,"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth?(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"):t.pipeStatusClass="",t.depth=t.real.deep;var a=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(0==t.flow.length||t.flow[t.flow.length-1][0]!=a){var l=[],n=[];l.push(a,s.current1.toFixed(2)),n.push(a,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.ispileIds=!0,t.flow=[],t.deep=[],t.pile=[],t.defaultpile="",t.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},t.depth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.image="stop",t.initEchart01(!0),e.myFun(t.real.deep);i.close()}))}),3e3),setTimeout((function(){i.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus,this.coordinates.icon=d),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getPileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t.pile.pileDescribe))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])])])])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("recordfilters")(t.real.recordMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录间隔")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("intervalfilters")(t.real)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("传感器模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("modefilters")(t.real.deepMode)))])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、电流时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"},[s("h2",[t._v("电子地图")])]),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("num2filters")(t.real.xAngle)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("num2filters")(t.real.yAngle)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",[t._v("持续时长")]),s("b",[t._v(t._s(t.real.lasttime)+"分钟")])]),s("div",{staticClass:"item"},[s("p",[t._v("最大深度")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.maxDeep))+"m")])]),s("div",{staticClass:"item"},[s("p",[t._v("填料量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.totalWeight))+"kg")])]),s("div",{staticClass:"item"},[s("p",[t._v("垂直度")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.verticality))+"%")])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("电流"),s("em",[t._v(t._s(t._f("numfilters")(t.real.current1))+"(A)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,W,"e87852dc",null,null);function W(t){for(var e in U)this[e]=U[e]}var K=function(){return j.exports}(),E={},R=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:d,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",image:"stop",depth:0,pileStatusStr:"停钻",timer:null,deviceKey:"",pileId:"",pile:[],realls:[],real:{deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"2",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"1",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"1.01",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return parseFloat(t).toFixed(2)},num1filters:function(t){return parseFloat(t).toFixed(3)},num2filters:function(t){return parseFloat(t).toFixed(1)},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},recordfilters:function(t){switch(t){case"1":return"时间模式";case"0":return"深度模式";default:return t}},intervalfilters:function(t){return"0"===t.recordInterval?"1"===t.recordMode?"5s":"20cm":"1"===t.recordInterval?"1"===t.recordMode?"10s":"25cm":"2"===t.recordInterval?"1"===t.recordMode?"30s":"50cm":"3"===t.recordInterval?"1"===t.recordMode?"60s":"100cm":void 0}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.getwatchDate(),this.timer&&clearInterval(this.timer))}},methods:{getwatchDate:function(){this.ispileIds=!0,this.pile=[],this.real={deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"2",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"1",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"1.01",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","次数"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m ",type:"value",inverse:!0,max:80,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"    次数",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep},{name:"次数",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchDate())},getPileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this;a(this.selectItem.key,this.pileId,"realTime,hammerTimes,deep,pipeStatus").then((function(s){for(var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=0;a<s.length;a++){var n=c(1e3*s[a].realTime).format("YYYY-MM-DD HH:mm:ss"),r=[],o=[];r.push(n,s[a].hammerTimes),o.push(n,s[a].deep.toFixed(2)),t.flow.push(r),t.deep.push(o)}t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1);var d=s[s.length-1];null!=d&&("1"==d.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==d.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==d.pipeStatus?t.pileStatusStr="下钻":"4"==d.pipeStatus&&t.pilefilter,t.depth=d.deep,e.myFun(d.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getPileIds(),t.real=s,t.setAngle(t.real.xAngle,t.real.yAngle),"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth?(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"):(t.pipeStatusClass="",t.image="stop"),t.depth=t.real.deep;var a=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(0==t.flow.length||t.flow[t.flow.length-1][0]!=a){var l=[],n=[];l.push(a,s.hammerTime),n.push(a,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.ispileIds=!0,t.initEchart01(!0),e.myFun(t.real.deep);i.close()}))}),3e3),setTimeout((function(){i.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus,this.coordinates.icon=d),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getPileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime "}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth "}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh "}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding "}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth "}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed "}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed "}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",[s("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t.pile.pileDescribe))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])])])]),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("recordfilters")(t.real.recordMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录间隔")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("intervalfilters")(t.real)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("桩长(m)")]),s("ul",{staticClass:"item_ul_flow"},[s("li",{staticClass:"item_flow"},[s("h6",[t._v("1")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length1)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("2")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length2)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("3")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length3)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("4")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length4)))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("5")]),s("p",[t._v(t._s(t._f("numfilters")(t.real.length5)))])])])]),s("div",{staticClass:"item"},[s("h3",[t._v("时长(s)")]),s("ul",{staticClass:"item_ul_flow"},[s("li",{staticClass:"item_flow"},[s("h6",[t._v("1")]),s("p",[t._v(t._s(t.real.time1))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("2")]),s("p",[t._v(t._s(t.real.time2))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("3")]),s("p",[t._v(t._s(t.real.time3))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("4")]),s("p",[t._v(t._s(t.real.time4))])]),s("li",{staticClass:"item_flow"},[s("h6",[t._v("5")]),s("p",[t._v(t._s(t.real.time5))])])])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、次数时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"},[s("h2",[t._v("电子地图")])]),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("num2filters")(t.real.xAngle)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("num2filters")(t.real.yAngle)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",[t._v("持续时长")]),s("b",[t._v(t._s(t.real.lasttime)+"分钟")])]),s("div",{staticClass:"item"},[s("p",[t._v("最大深度")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.maxDeep))+"m")])]),s("div",{staticClass:"item"},[s("p",[t._v("锤击次数")]),s("b",[t._v(t._s(t.real.hammerTimes))])]),s("div",{staticClass:"item"},[s("p",[t._v("垂直度")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.verticality))+"%")])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("加速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(m/s)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,q,"1e4e4ff7",null,null);function q(t){for(var e in E)this[e]=E[e]}var B=function(){return R.exports}(),Z={},G=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data:function(){return{timer:null,deviceKey:"",pileId:"",fields:"",selectItem:[],centerDialogVisible:!1,form:{name:"",company:"",min:"",length:"",weight:"",margin:"",radius:"",upspeed:"",downspeed:""}}},methods:{handleCommand:function(t){var e=t.split("-")[0],s=t.split("-")[1];switch(this.selectItem=this.onlineList[e],s){case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.min,callback:function(e){t.$set(t.form,"min",e)},expression:"form.min"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.length,callback:function(e){t.$set(t.form,"length",e)},expression:"form.length"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.margin,callback:function(e){t.$set(t.form,"margin",e)},expression:"form.margin"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.radius,callback:function(e){t.$set(t.form,"radius",e)},expression:"form.radius"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.upspeed,callback:function(e){t.$set(t.form,"upspeed",e)},expression:"form.upspeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.downspeed,callback:function(e){t.$set(t.form,"downspeed",e)},expression:"form.downspeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,X,"1e37dcdb",null,null);function X(t){for(var e in Z)this[e]=Z[e]}var Q=function(){return G.exports}(),tt={},et=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b7.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,currentPage:1,pagesSize:10,totalpage:0,addWeight:[{beginTime:1642063786,deviceKey:"MP01123412341234",endTime:1642063797,realTime:1642063798,version:"1.00",weight:2.155098}],image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"停钻",timer:null,deviceKey:"",pileId:"",pile:[],real:{current:0,deep:0,deviceKey:"",latitude:0,longitude:0,machineKey:"0",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"",pileId:0,pipeStatus:"0",pressure:0,realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,version:"0",vertical:0,weight:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{timefilters:function(t){return c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},pilefilter:function(t){return null==t?"--":t},ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},sta2filters:function(t){return"1"===t?"喷灰":"止喷"}},watch:{centerDialogVisible1:function(t,e){this.tab2=0,this.timer&&clearInterval(this.timer),0==t&&this.getwatchData()}},methods:{getwatchData:function(){this.ispileIds=!0,this.pile=[],this.real={current:0,deep:0,deviceKey:"",latitude:0,longitude:0,machineKey:"0",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"",pileId:0,pipeStatus:"0",pressure:0,realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,version:"0",vertical:0,weight:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},handleCurrentChangeweight:function(t){var e=this,s=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.currentPage=t,n(this.currentPage,this.pagesSize,this.selectItem.key).then((function(t){e.addWeight=t.content,e.totalpage=t.totalElements,s.close()}))},toWeightFirstPage:function(){this.handleCurrentChangeweight(1)},toWeightLastPage:function(){this.handleCurrentChangeweight(Math.ceil(this.totalpage/this.pagesSize))},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:30},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","灰量"]},grid:{top:"22%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m  ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 灰量kg",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"灰量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this,s=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){s.myChart01.resize()}})),this.getData()),3==t&&n(1,10,this.selectItem.key).then((function(t){e.addWeight=t.content,e.totalpage=t.totalElements})),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),4==t&&this.timer&&(clearInterval(this.timer),this.getwatchData())},getPileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this;a(this.selectItem.key,this.pileId,"realTime,totalAsh,deep,pipeStatus").then((function(s){for(var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=0;a<s.length;a++){var n=c(1e3*s[a].realTime).format("YYYY-MM-DD HH:mm:ss"),r=[],o=[];r.push(n,s[a].totalAsh.toFixed(2)),o.push(n,s[a].deep.toFixed(2)),t.flow.push(r),t.deep.push(o)}t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1);var d=s[s.length-1];"1"==d.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==d.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==d.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"4"==d.pipeStatus&&(t.pilefilter,t.image="up"),t.depth=d.deep,e.myFun(d.deep),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getPileIds(),t.real=s,t.setAngle(t.real.xAngle,t.real.yAngle),t.coordinates.position=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],t.coordinates.center=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.ispileIds=!0,t.recordStatusClass="",t.real.deep="--",t.real.speed="--",t.real.current="--",t.real.pressure="--"),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth&&(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"),t.depth=t.real.deep,1==t.real.nozzleStatus?t.nozzleStatusClass="on":t.nozzleStatusClass="";var a=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(t.flow[t.flow.length-1][0]!==a){var l=[],n=[];l.push(a,s.totalAsh.toFixed(2)),n.push(a,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.ispileIds=!0,t.pile=[],t.real={current:0,deep:0,deviceKey:"",latitude:0,longitude:0,machineKey:"0",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"",pileId:0,pipeStatus:"0",pressure:0,realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,version:"0",vertical:0,weight:0,xAngle:0,yAngle:0,lasttime:0},t.flow=[],t.deep=[],t.depth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pipeStatusClass="",t.nozzleStatusClass="",t.initEchart01(!0),t.image="stop",t.myFun(t.real.deep);i.close()}))}),3e3)}))},handleCommand:function(t){var e=t.split("-")[0],s=t.split("-")[1];if(this.selectItem=this.onlineList[e],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"后台灰罐"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"后台灰罐"},{name:"实时监控"}],this.playerOptions=[];for(var i=0;i<this.cameraLive.length;i++){var a={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[i].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(a)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=require("@/assets/images/map/b7.png"):this.coordinates.icon=require("@/assets/images/map/a6.png")),s){case"0":this.centerDialogVisible1=!0,this.getPileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("钻杆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"pipeStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷灰状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"nozzleStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计灰量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalAsh"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalAsh?"(kg)":""))])])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pilefilter")(t.pile.pileDescribe)))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])]),s("li",{class:t.pipeStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),s("li",{class:t.nozzleStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("sta2filters")(t.real.nozzleStatus)))])])])])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计下钻速度")]),s("div",{staticClass:"value"},[t._v("- cm/min")])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计提钻速度")]),s("div",{staticClass:"value"},[t._v("- cm/min")])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、灰量时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"},[s("h2",[t._v("电子地图")])]),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("持续时长")]),s("b",{staticClass:"item_center"},[t._v(t._s(t.real.lasttime)+" min")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("最大深度")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.maxDeep,1))+" m")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计灰量")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.totalAsh,1))+" kg")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("段灰量")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.partAsh))+" kg")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("灰罐余量")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.weight))+" kg")])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("电流"),s("em",[t._v(t._s(t._f("numfilters")(t.real.current))+"(A)")])]),s("p",[t._v("喷灰压力"),s("em",[t._v(t._s(t._f("numfilters")(t.real.pressure))+"(Mpa)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table m-tab-addAsh"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.addWeight,border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"200",align:"center"}}),s("el-table-column",{attrs:{prop:"beginTime",label:"开始时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("timefilters")(e.row.beginTime))+" ")]}}])}),s("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("timefilters")(e.row.endTime))+" ")]}}])}),s("el-table-column",{attrs:{prop:"weight",label:"加灰量(kg)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.weight))+" ")]}}])})],1),s("el-footer",{staticClass:"m-footer-addAsh"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-size":t.pagesSize,layout:"slot, prev, pager, next",total:t.totalpage},on:{"current-change":t.handleCurrentChangeweight}},[s("button",{staticClass:"lastPage",on:{click:t.toWeightFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-size":t.pagesSize,layout:"slot,jumper",total:t.totalpage},on:{"current-change":t.handleCurrentChangeweight}},[s("button",{staticClass:"lastPage",on:{click:t.toWeightLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:4==t.tab2,expression:"tab2 == 4"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,st,"5f81280e",null,null);function st(t){for(var e in tt)this[e]=tt[e]}var it=function(){return et.exports}(),at={},lt=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b8.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"停钻",timer:null,deviceKey:"",pileId:"",pile:[],real:{recordStatus:"3",nozzleStatus:"0",pipeStatus:"0",startTime:0,xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return null==t?"-":parseFloat(t).toFixed(2)},num1filters:function(t){return parseFloat(t).toFixed(3)},num2filters:function(t){return parseFloat(t).toFixed(1)},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},sta1filters:function(t){return"1"==t?"下钻":"2"==t?"提钻":"3"==t?"复下":"4"==t?"复提":"停止"},sta2filters:function(t){switch(t){case"1":return"喷浆";case"0":return"止喷";default:return t}}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData:function(){this.ispileIds=!0,this.pile=[],this.real={recordStatus:"3",nozzleStatus:"0",pipeStatus:"0",startTime:0,xAngle:0,yAngle:0},this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","流量"]},grid:{top:"23%",left:"4%",right:"5.5%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m  ",type:"value",inverse:!0,max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"流量(L/min)",type:"value",inverse:!1,nameLocation:"start",max:100,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep},{name:"流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getpileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this;a(this.selectItem.key,this.pileId,"realTime,flow,deep,pipeStatus").then((function(s){for(var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=0;a<s.length;a++){var n=c(1e3*s[a].realTime).format("YYYY-MM-DD HH:mm:ss"),r=[],o=[];r.push(n,s[a].flow.toFixed(2)),o.push(n,s[a].deep.toFixed(2)),t.flow.push(r),t.deep.push(o)}t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1);var d=s[s.length-1];null!=d&&("1"==d.pipeStatus?(t.pileStatusStr="下钻",t.image="down"):"2"==d.pipeStatus?(t.pileStatusStr="提钻",t.image="up"):"3"==d.pipeStatus?t.pileStatusStr="下钻":"4"==d.pipeStatus&&t.pilefilter,t.depth=d.deep,e.myFun(d.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getpileIds(),t.real=s,"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0),t.real.deep>t.depth?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.deep<t.depth?(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up"):t.pipeStatusClass="",t.depth=t.real.deep,0==t.real.nozzleStatus?t.nozzleStatusClass="":t.nozzleStatusClass="on";var a=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(0==t.flow.length||t.flow[t.flow.length-1][0]!=a){var l=[],n=[];l.push(a,s.flow.toFixed(2)),n.push(a,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.ispileIds=!0,t.flow=[],t.deep=[],t.initEchart01(!0),e.myFun(t.real.deep);i.close()}))}),3e3),setTimeout((function(){i.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=require("@/assets/images/map/b8.png"):this.coordinates.icon=require("@/assets/images/map/a8.png")),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getpileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("钻杆")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"pipeStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷浆")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"nozzleStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计浆量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalSlurry"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalSlurry?"(L)":""))])])]),s("div",{staticClass:"item"},[s("h4",[t._v("累计灰量")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"totalAsh"))+" "),s("span",[t._v(t._s(e.realtime&&null!=e.realtime.totalAsh?"(kg)":""))])])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t.pile.pileDescribe))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])]),s("li",{class:t.pipeStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),s("li",{class:t.nozzleStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("sta2filters")(t.real.nozzleStatus)))])])])])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("水灰比")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.waterCementRatio)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计下钻速度")]),s("div",{staticClass:"value"},[t._v("- cm/min")])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计提钻速度")]),s("div",{staticClass:"value"},[t._v("- cm/min")])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、流量时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"}),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:g,alt:""}})]),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("num2filters")(t.real.xAngle)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("num2filters")(t.real.yAngle)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",[t._v("持续时长")]),s("b",[t._v(t._s(t.real.lasttime)+"分钟")])]),s("div",{staticClass:"item"},[s("p",[t._v("最大深度")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.maxDeep))+"m")])]),s("div",{staticClass:"item"},[s("p",[t._v("累计浆量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.totalSlurry))+"L")])]),s("div",{staticClass:"item"},[s("p",[t._v("累计灰量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.totalAsh))+"kg")])]),s("div",{staticClass:"item"},[s("p",[t._v("段浆量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.partSlurry))+"L")])]),s("div",{staticClass:"item"},[s("p",[t._v("段灰量")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.partAsh))+"kg")])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("流量1"),s("em",[t._v(t._s(t._f("numfilters")(t.real.flow))+"(L/min)")])]),s("p",[t._v("流量2"),s("em",[t._v(t._s(t._f("numfilters")(t.real.flow))+"(L/min)")])]),s("p",[t._v("总流量"),s("em",[t._v(t._s(t._f("numfilters")(t.real.flow))+"(L/min)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,nt,"88d3d1c4",null,null);function nt(t){for(var e in at)this[e]=at[e]}var rt=function(){return lt.exports}(),ot={},ct=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:d,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,ztdepth:0,pileStatusSpeed:"速度",pileStatusStr:"停钻",recordStatusClass:"",pileStatusClass:"",image:"stop",timer:null,deviceKey:"",pileId:"",pile:[],real:{startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0,maxCurrents:0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},pilefilter:function(t){return null==t?"--":t},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},recordModefilters:function(t){return"0"==t?"深度模式":"1"==t?"时间模式":void 0},Intervalfilters:function(t){if("0"==t.recordMode){if("0"==t.recordInterval)return"20cm";if("1"==t.recordInterval)return"25cm";if("2"==t.recordInterval)return"50cm";if("3"==t.recordInterval)return"100cm"}else if("1"==t.recordMode){if("0"==t.recordInterval)return"5s";if("1"==t.recordInterval)return"10s";if("2"==t.recordInterval)return"30s";if("3"==t.recordInterval)return"60s"}},numfilters:function(t,e){return null==t?"-":(null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e))},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},downSpeed:function(t){return t>0?parseFloat(t).toFixed(2):0},upSpeed:function(t){return t<0?parseFloat(t).toFixed(2):0}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData:function(){this.ispileIds=!0,this.flow=[],this.deep=[],this.pile=[],this.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},this.ztdepth=0,this.pileStatusStr="停钻",this.pileStatusSpeed="速度",this.recordStatusClass="",this.pileStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"4%",right:"4%",bottom:"5%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m ",type:"value",inverse:!0,max:30,axisLine:{show:!0},nameTextstyle:{padding:[15,0,0,15]}},{name:" 电流(A)",type:"value",inverse:!1,nameLocation:"start",max:300,nameTextstyle:{padding:[25,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getpileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this,s=[];a(this.selectItem.key,this.pileId,"realTime,current,deep").then((function(i){for(var a=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=0;n<i.length;n++){s.push(i[n].current);var r=c(1e3*i[n].realTime).format("YYYY-MM-DD HH:mm:ss"),o=[],d=[];o.push(r,i[n].current.toFixed(2)),d.push(r,i[n].deep.toFixed(2)),t.flow.push(o),t.deep.push(d)}t.maxCurrents=Math.max.apply(Math,s),t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1);var p=i[i.length-1];null!=p&&(t.ztdepth=p.deep,e.myFun(p.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getpileIds(),t.real=s,s.current>t.maxCurrents&&(t.maxCurrents=s.current),t.setAngle(t.real.xAngle,t.real.yAngle),t.coordinates.position=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],t.coordinates.center=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0),t.real.deep>t.ztdepth?(t.pileStatusStr="钻孔",t.pileStatusSpeed="钻孔速度",t.pileStatusClass="on",t.image="down"):t.real.deep<t.ztdepth&&(t.pileStatusStr="起拔",t.pileStatusSpeed="起拔速度",t.pileStatusClass="on",t.image="up"),t.ztdepth=t.real.deep;var i=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(0==t.flow.length||t.flow[t.flow.length-1][0]!=i){var l=[],n=[];l.push(i,s.current.toFixed(2)),n.push(i,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.ispileIds=!0,t.flow=[],t.deep=[],t.pile=[],t.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},t.ztdepth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pileStatusClass="",t.initEchart01(!0),e.myFun(t.real.deep);a.close()}))}),3e3),setTimeout((function(){a.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]]),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getpileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pilefilter")(t.pile.pileDescribe)))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])]),s("li",{class:t.pileStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])])])]),s("div",{staticStyle:{clear:"both"}})]),s("div",{staticClass:"bottom bottomdata"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("电流")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.current))+" A")])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("recordModefilters")(t.real.recordMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录间隔")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("Intervalfilters")(t.real)))])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、电流时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"}),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",[t._v("持续时长")]),s("b",[t._v(t._s(t.real.lasttime)+"分钟")])]),s("div",{staticClass:"item"},[s("p",[t._v("最大深度")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.maxDeep))+"m")])]),s("div",{staticClass:"item"},[s("p",[t._v("最大电流")]),s("b",[t._v(t._s(t._f("numfilters")(t.maxCurrents))+"A")])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v(t._s(t.pileStatusSpeed)),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("电流"),s("em",[t._v(t._s(t._f("numfilters")(t.real.current))+"(A)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,mt,"2420baec",null,null);function mt(t){for(var e in ot)this[e]=ot[e]}var dt=function(){return ct.exports}(),pt={},ht=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data:function(){return{timer:null,deviceKey:"",pileId:"",fields:"",selectItem:[],centerDialogVisible:!1,form:{name:"",company:"",min:"",length:"",weight:"",margin:"",radius:"",upspeed:"",downspeed:""}}},methods:{handleCommand:function(t){var e=t.split("-")[0],s=t.split("-")[1];switch(this.selectItem=this.onlineList[e],s){case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top",staticStyle:{background:"#0B85E3"}},[s("div",{staticClass:"right"},[s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.min,callback:function(e){t.$set(t.form,"min",e)},expression:"form.min"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.length,callback:function(e){t.$set(t.form,"length",e)},expression:"form.length"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.margin,callback:function(e){t.$set(t.form,"margin",e)},expression:"form.margin"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.radius,callback:function(e){t.$set(t.form,"radius",e)},expression:"form.radius"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.upspeed,callback:function(e){t.$set(t.form,"upspeed",e)},expression:"form.upspeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.downspeed,callback:function(e){t.$set(t.form,"downspeed",e)},expression:"form.downspeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,ut,"3478c2be",null,null);function ut(t){for(var e in pt)this[e]=pt[e]}var vt=function(){return ht.exports}(),gt={},ft=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b7.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,lastTime:0,StartTime:"停止中",StatusPileStarts:"结束",StatusAsh:"止喷",image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"停钻",timer:null,deviceKey:"",pileId:"",pile:[],real:{ash:0,ashedDepth:0,current:0,dataType:1,depth:0,deviceKey:"2019032201",jianli:"JL00000001",latitude:33,longitude:45,pileDescribe:"",pileId:0,pileWidth:0,pressure:0,realTime:0,speed:0,storeSeq:1,userName:"TEST",xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}],ispileIds:!0,MaxDeeps:0,ashErrornum:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],videoCamera:!1}},filters:{timefilters:function(t){return c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},pilefilter:function(t){return null==t?"--":t},ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return"停止中"==t?"停止中":c(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)}},watch:{centerDialogVisible1:function(t,e){this.tab2=0,this.timer&&clearInterval(this.timer),0==t&&(this.videofalse(),this.getwatchData())}},methods:{getwatchData:function(){this.lastTime=0,this.MaxDeeps=0,this.ispileIds=!0,this.pile=[],this.real={ash:0,ashedDepth:0,current:0,dataType:1,depth:0,deviceKey:"2019032201",jianli:"JL00000001",latitude:33,longitude:45,pileDescribe:"",pileId:0,pileWidth:0,pressure:0,realTime:0,speed:0,storeSeq:1,userName:"TEST",xAngle:0,yAngle:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="停钻",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.MaxDeeps=0,void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:30},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","灰量"]},grid:{top:"15%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m  ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 灰量kg",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"灰量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},initEchart02:function(){var t={title:{textStyle:{color:"#101D34",fontSize:30},left:"center",top:"center"},tooltip:{trigger:"axis"},grid:{top:"1%",left:"4%",right:"1%",bottom:"1%",containLabel:!0},yAxis:{type:"category",data:[0,"1m","2m","3m","4m","5m","6m","7m","8m","9m","10m","11m","12m","13m","14m","15m","16m","17m","18m","19m","20m","21m","22m","23m","24m","25m","26m","27m","28m","29m","30m"],inverse:!0,position:"right"},xAxis:{type:"value",axisLine:{show:!0},inverse:!0},series:[{data:this.ashErrornum,type:"line",showSymbol:!1}]};this.myChart02.setOption(t)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData(),this.videofalse()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history"),this.videofalse(),clearInterval(this.timer)),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo"),this.videofalse(),clearInterval(this.timer)),3==t&&(this.timer&&(clearInterval(this.timer),this.getwatchData()),this.video())},getPileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this,s=[];a(this.selectItem.key,"","realTime,depth,ash").then((function(i){for(var a=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=0;n<i.length;n++){s.push(i[n].depth);var r=c(1e3*i[n].realTime).format("YYYY-MM-DD HH:mm:ss"),o=[],d=[];o.push(r,i[n].ash.toFixed(2)),d.push(r,i[n].depth.toFixed(2)),t.flow.push(o),t.deep.push(d),null==t.ashErrornum[Math.ceil(i[n].depth-1)]&&(t.ashErrornum[Math.ceil(i[n].depth-1)]=0),t.ashErrornum[Math.ceil(i[n].depth-1)]+=Number(i[n].ash.toFixed(2))}t.MaxDeeps=""==s?0:Math.max.apply(Math,s),t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1),t.myChart02=m(t.$refs.myChart02,null,{renderer:"svg"}),t.initEchart02();var p=i[i.length-1];null==p?(t.StatusAsh="止喷",t.nozzleStatusClass=""):(t.depth=p.depth,t.StartTime=i[0].realTime,t.lastTime=((p.realTime-i[0].realTime)/60).toFixed(1),e.myFun(p.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getPileIds(),t.real=s,s.depth>t.MaxDeeps&&(t.MaxDeeps=s.depth),t.setAngle(t.real.xAngle,t.real.yAngle),t.coordinates.position=[s.longitude,s.latitude],t.coordinates.center=[s.longitude,s.latitude],null!=t.real?(t.recordStatusClass="on",t.StatusPileStarts="开始"):(t.recordStatusClass="",t.StatusPileStarts="结束",t.ispileIds=!0),0!=t.real.ash?(t.StatusAsh="喷灰",t.nozzleStatusClass="on"):(t.StatusAsh="止喷",t.nozzleStatusClass=""),t.real.speed>0?(t.pileStatusStr="下钻",t.pipeStatusClass="on",t.image="down"):t.real.speed<0&&(t.pileStatusStr="提钻",t.pipeStatusClass="on",t.image="up");var i=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(0==t.flow.length||t.flow[t.flow.length-1][0]!==i){var l=[],n=[];l.push(i,s.ash.toFixed(2)),n.push(i,s.depth.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}e.myFun(t.real.depth)}else t.ispileIds=!0,t.pile=[],t.real={ash:0,ashedDepth:0,current:0,dataType:1,depth:0,deviceKey:"2019032201",jianli:"JL00000001",latitude:33,longitude:45,pileDescribe:"",pileId:0,pileWidth:0,pressure:0,realTime:0,speed:0,storeSeq:1,userName:"TEST",xAngle:0,yAngle:0},t.flow=[],t.deep=[],t.depth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pipeStatusClass="",t.nozzleStatusClass="",t.initEchart01(!0),t.image="stop",t.myFun(t.real.depth);a.close()}))}),3e3)}))},video:function(){this.playerOptions=[];for(var t=0;t<this.cameraLive.length;t++){var e={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[t].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(e)}},videofalse:function(){this.playerOptions=[{sources:[{type:"application/x-mpegURL",src:""}],notSupportedMessage:"此视频暂无法播放,请稍后再试"}]},handleCommand:function(t){var e=t.split("-")[0],s=t.split("-")[1];switch(this.selectItem=this.onlineList[e],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null!=this.cameraLive&&(this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.videofalse()),""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],0==this.selectItem.onlineStatus?this.coordinates.icon=require("@/assets/images/map/b7.png"):this.coordinates.icon=require("@/assets/images/map/a6.png")),s){case"0":this.centerDialogVisible1=!0,this.getPileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("钻杆状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"pipeStatus")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("喷灰状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"nozzleStatus")))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01 m-pop-echart-two"},[s("el-row",{staticClass:"row echart"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pilefilter")(t.pile.pileDescribe)))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.StatusPileStarts))])]),s("li",{class:t.pipeStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),s("li",{class:t.nozzleStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.StatusAsh))])])])])]),s("div",{staticClass:"bottom bottomdata"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.StartTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("设计桩径")]),s("div",{staticClass:"value"},[t._v(t._s(t.real.pileWidth))])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、灰量时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("持续时长")]),s("b",{staticClass:"item_center"},[t._v(t._s(t.lastTime)+"min")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("最大深度")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.MaxDeeps))+" m")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("累计灰量")]),s("b",{staticClass:"item_center"},[t._v("- kg")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"item_center"},[t._v("段灰量")]),s("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.real.ash))+" kg")])])])]),s("div",{staticClass:"picbox"},[s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.depth))+"(m)")])]),s("p",[t._v("速度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("电流"),s("em",[t._v(t._s(t._f("numfilters")(t.real.current))+"(A)")])]),s("p",[t._v("喷灰压力"),s("em",[t._v(t._s(t._f("numfilters")(t.real.pressure))+"(Mpa)")])])])])]),s("div",{staticClass:"ashEchart"},[s("div",{staticStyle:{width:"100%",height:"100%"}},[s("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,Ct,"1cee8908",null,null);function Ct(t){for(var e in gt)this[e]=gt[e]}var bt=function(){return ft.exports}(),_t={},St=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data:function(){return{index:0,designDepth:30,deviceKey:"",pileId:"",fields:"",pile:[{pileDescribe:"--",pileId:""}],selectItem:[],centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""}}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},startTimefilters:function(t){return t?null==t.startTime?"-":t.startTime:"-"},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},sta2filters:function(t){switch(t){case"1":return"喷浆";case"0":return"止喷";default:return t}},pilefilter:function(t){return null==t?"--":t}},methods:{closePop:function(t){this[t]=!1},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},handleCommand:function(t){var e=t.split("-")[0],s=t.split("-")[1];switch(this.selectItem=this.onlineList[e],this.index=e,s){case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,yt,"f784c432",null,null);function yt(t){for(var e in _t)this[e]=_t[e]}var wt=function(){return St.exports}(),It={},xt=f({props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:e},data:function(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"卫星",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,ztdepth:0,pileStatusSpeed:"速度",pileStatusStr:"停钻",recordStatusClass:"",pileStatusClass:"",image:"stop",timer:null,deviceKey:"",pileId:"",pile:[],real:{startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0,maxCurrents:0}},filters:{ofiltersPipe:function(t,e){return t?null==t[e]?"-":t[e]:"-"},pilefilter:function(t){return null==t?"--":t},datafilters:function(t){return 0==t?"停止中":c(1e3*t).format("YYYY-MM-DD HH:mm:ss")},recordModefilters:function(t){return"0"==t?"深度模式":"1"==t?"时间模式":void 0},Intervalfilters:function(t){if("0"==t.recordMode){if("0"==t.recordInterval)return"20cm";if("1"==t.recordInterval)return"25cm";if("2"==t.recordInterval)return"50cm";if("3"==t.recordInterval)return"100cm"}else if("1"==t.recordMode){if("0"==t.recordInterval)return"5s";if("1"==t.recordInterval)return"10s";if("2"==t.recordInterval)return"30s";if("3"==t.recordInterval)return"60s"}},numfilters:function(t,e){return null==t?"-":(null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e))},stafilters:function(t){switch(t){case"1":return"记录中";case"2":return"暂停";case"3":return"结束";default:return t}},downSpeed:function(t){return t>0?parseFloat(t).toFixed(2):0},upSpeed:function(t){return t<0?parseFloat(t).toFixed(2):0}},watch:{centerDialogVisible1:function(t,e){0==t&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData:function(){this.ispileIds=!0,this.flow=[],this.deep=[],this.pile=[],this.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},this.ztdepth=0,this.pileStatusStr="停钻",this.pileStatusSpeed="速度",this.recordStatusClass="",this.pileStatusClass="",void 0===this.myChart01||this.myChart01._disposed||(this.myChart01.dispose(),this.image="stop")},setAngle:function(t,e){var s={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=m(this.$refs.angle)),this.angle.setOption(s)},initEchart01:function(t){var e={title:{show:t,text:"暂无数据",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"4%",right:"4%",bottom:"5%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m ",type:"value",inverse:!0,max:30,axisLine:{show:!0},nameTextstyle:{padding:[15,0,0,15]}},{name:" 电流(A)",type:"value",inverse:!1,nameLocation:"start",max:300,nameTextstyle:{padding:[25,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(e)},changeHandle:function(t){var e=this;this.tab2=t,0==t&&(this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getData()),1==t&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),2==t&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),3==t&&(clearInterval(this.timer),this.getwatchData())},getpileIds:function(){var t=this;i(this.selectItem.key).then((function(e){null!=e&&(t.pile=e[0],t.ispileIds=!1)}))},getData:function(){var t=this,e=this,s=[];a(this.selectItem.key,this.pileId,"realTime,current,deep").then((function(i){for(var a=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=0;n<i.length;n++){s.push(i[n].current);var r=c(1e3*i[n].realTime).format("YYYY-MM-DD HH:mm:ss"),o=[],d=[];o.push(r,i[n].current.toFixed(2)),d.push(r,i[n].deep.toFixed(2)),t.flow.push(o),t.deep.push(d)}t.maxCurrents=Math.max.apply(Math,s),t.myChart01=m(t.$refs.myChart01,null,{renderer:"svg"}),t.initEchart01(!1);var p=i[i.length-1];null!=p&&(t.ztdepth=p.deep,e.myFun(p.deep)),t.timer=setInterval((function(){l(t.selectItem.key,t.pileId).then((function(s){if(null!=s){1==t.ispileIds&&t.getpileIds(),t.real=s,s.current>t.maxCurrents&&(t.maxCurrents=s.current),t.setAngle(t.real.xAngle,t.real.yAngle),t.coordinates.position=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],t.coordinates.center=[t.selectItem.position.split(",")[0],t.selectItem.position.split(",")[1]],"1"==t.real.recordStatus?t.recordStatusClass="on":"2"==t.real.recordStatus?t.recordStatusClass="pause":"3"==t.real.recordStatus&&(t.recordStatusClass="",t.ispileIds=!0),t.real.deep>t.ztdepth?(t.pileStatusStr="钻孔",t.pileStatusSpeed="钻孔速度",t.pileStatusClass="on",t.image="down"):t.real.deep<t.ztdepth&&(t.pileStatusStr="起拔",t.pileStatusSpeed="起拔速度",t.pileStatusClass="on",t.image="up"),t.ztdepth=t.real.deep;var i=c(1e3*s.realTime).format("YYYY-MM-DD HH:mm:ss");if(0==t.flow.length||t.flow[t.flow.length-1][0]!=i){var l=[],n=[];l.push(i,s.current.toFixed(2)),n.push(i,s.deep.toFixed(2)),t.flow.push(l),t.deep.push(n),t.initEchart01(!1)}t.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0),e.myFun(t.real.deep)}else t.ispileIds=!0,t.flow=[],t.deep=[],t.pile=[],t.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},t.ztdepth=0,t.pileStatusStr="停钻",t.recordStatusClass="",t.pileStatusClass="",t.initEchart01(!0),e.myFun(t.real.deep);a.close()}))}),3e3),setTimeout((function(){a.close()}),6e3)}))},handleCommand:function(t){var e=this,s=t.split("-")[0],i=t.split("-")[1];if(this.selectItem=this.onlineList[s],this.cameraLive=JSON.parse(this.selectItem.cameraLive),null==this.cameraLive)this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"}];else{this.tab2List=[{name:"运行状况"},{name:"历史记录"},{name:"预警信息"},{name:"实时监控"}],this.playerOptions=[];for(var a=0;a<this.cameraLive.length;a++){var l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"此视频暂无法播放,请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(""==this.selectItem.position?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]]),i){case"0":this.centerDialogVisible1=!0,this.$nextTick((function(){window.onresize=function(){e.myChart01.resize()}})),this.getpileIds(),this.getData();break;case"1":sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break;case"2":sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break;case"3":this.$router.push("/previewOnline#");break;case"4":this.centerDialogVisible=!0,this.form.projectName=null==JSON.parse(this.selectItem.content).projectName?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=null==JSON.parse(this.selectItem.content).worker?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=null==JSON.parse(this.selectItem.content).minPileTime?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=null==JSON.parse(this.selectItem.content).designDepth?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=null==JSON.parse(this.selectItem.content).designAsh?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=null==JSON.parse(this.selectItem.content).designPilePadding?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=null==JSON.parse(this.selectItem.content).pileWidth?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=null==JSON.parse(this.selectItem.content).designUpSpeed?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=null==JSON.parse(this.selectItem.content).designDownSpeed?"":JSON.parse(this.selectItem.content).designDownSpeed}},destroyed:function(){this.timer&&clearInterval(this.timer)},onSubmit:function(){var t=this;s(this.form,this.selectItem.id).then((function(e){t.onlineList[t.index].content=JSON.stringify(t.form)})),this.centerDialogVisible=!1},closePop:function(t){this[t]=!1},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/40*100+"%"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("el-container",{staticClass:"row-con row-previewOnline"},[s("div",{staticClass:"m-previewOnline"},[s("ul",{staticClass:"ul-previewOnline"},t._l(t.onlineList,(function(e,i){return s("li",{key:e.id,class:{offline:1==!e.onlineStatus}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"top"},[s("div",{staticClass:"right"},[s("div",{staticClass:"status"},[s("span",{staticClass:"icon"}),1==e.onlineStatus?s("span",{staticClass:"value"},[t._v("在线")]):s("span",{staticClass:"value"},[t._v("离线")])]),s("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.handleCommand}},[s("span",{staticClass:"more icon-more"}),s("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:i+"-0"}},[s("span",{staticClass:"icon icon01"}),s("span",{staticClass:"name"},[t._v("运行状态")])]),s("el-dropdown-item",{attrs:{command:i+"-1"}},[s("span",{staticClass:"icon icon02"}),s("span",{staticClass:"name"},[t._v("历史记录")])]),s("el-dropdown-item",{attrs:{command:i+"-2"}},[s("span",{staticClass:"icon icon03"}),s("span",{staticClass:"name"},[t._v("预警信息")])]),s("el-dropdown-item",{attrs:{command:i+"-3"}},[s("span",{staticClass:"icon icon04"}),s("span",{staticClass:"name"},[t._v("转场记录")])]),s("el-dropdown-item",{attrs:{command:i+"-4"}},[s("span",{staticClass:"icon icon05"}),s("span",{staticClass:"name"},[t._v("设计参数")])])],1)],1)],1),s("div",{staticClass:"left"},[s("div",{staticClass:"pic",style:{"background-image":"url("+t.iconImg+")"}}),s("div",{staticClass:"type"},[t._v(t._s(e.typeName||""))]),s("div",{staticClass:"name"},[t._v(t._s(e.name||""))])])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"item"},[s("h4",[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(e.key||""))])]),s("div",{staticClass:"item"},[s("h4",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"startTime")))])]),s("div",{staticClass:"item"},[s("h4",[t._v("记录状态")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("ofiltersPipe")(e.realtime,"recordStatus")))])])])])])})),0)])]),s("el-dialog",{staticClass:"m-pop",attrs:{title:"设计参数-"+t.selectItem.key,visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticClass:"m-params-edit"},[s("div",{staticClass:"g-notifacition"},[s("span",{staticClass:"icon"}),s("span",{staticClass:"value"},[t._v("设计参数只有管理员可以修改")])]),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form}},[s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:24}},[s("h3",[t._v("工程名称")]),s("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("施工单位")]),s("el-input",{attrs:{placeholder:"请输入施工单位"},model:{value:t.form.worker,callback:function(e){t.$set(t.form,"worker",e)},expression:"form.worker"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("最短成桩时间(min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入最短成桩时间"},model:{value:t.form.minPileTime,callback:function(e){t.$set(t.form,"minPileTime",e)},expression:"form.minPileTime"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计桩长(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计桩长"},model:{value:t.form.designDepth,callback:function(e){t.$set(t.form,"designDepth",e)},expression:"form.designDepth"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("水泥掺量(kg/m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入水泥掺量"},model:{value:t.form.designAsh,callback:function(e){t.$set(t.form,"designAsh",e)},expression:"form.designAsh"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩间距(m)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩间距"},model:{value:t.form.designPilePadding,callback:function(e){t.$set(t.form,"designPilePadding",e)},expression:"form.designPilePadding"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("桩径(cm)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入桩径"},model:{value:t.form.pileWidth,callback:function(e){t.$set(t.form,"pileWidth",e)},expression:"form.pileWidth"}})],1)],1),s("el-form-item",{staticClass:"item"},[s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计提钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计提钻速度"},model:{value:t.form.designUpSpeed,callback:function(e){t.$set(t.form,"designUpSpeed",e)},expression:"form.designUpSpeed"}})],1),s("el-col",{attrs:{span:12}},[s("h3",[t._v("设计下钻速度(cm/min)")]),s("el-input",{attrs:{type:"number",min:0,placeholder:"请输入设计下钻速度"},model:{value:t.form.designDownSpeed,callback:function(e){t.$set(t.form,"designDownSpeed",e)},expression:"form.designDownSpeed"}})],1)],1),s("el-form-item",{staticClass:"item submit"},[s("el-col",{attrs:{span:24}},[s("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),s("el-button",{staticClass:"btn",on:{click:function(e){return t.closePop("centerDialogVisible")}}},[t._v("取消")])],1)],1)],1)],1)]),s("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible1},on:{"update:visible":function(e){t.centerDialogVisible1=e}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"left"},[s("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),s("div",{staticClass:"dialog-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[s("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner inner1"},[s("div",{staticClass:"m-statusinfo"},[s("div",{staticClass:"top"},[s("h3",[t._v(t._s(t.selectItem.name))]),s("div",{staticClass:"info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("桩号")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("pilefilter")(t.pile.pileDescribe)))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"tit"},[t._v("设备编号")]),s("div",{staticClass:"value"},[t._v(t._s(t.selectItem.key))])])]),s("div",{staticClass:"status"},[s("ul",{staticClass:"ul-status"},[s("li",{class:t.recordStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t._f("stafilters")(t.real.recordStatus)))])]),s("li",{class:t.pileStatusClass},[s("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])])])]),s("div",{staticStyle:{clear:"both"}})]),s("div",{staticClass:"bottom bottomdata"},[s("div",{staticClass:"item"},[s("h3",[t._v("开始时间")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.real.startTime)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("电流")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.real.current))+" A")])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录模式")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("recordModefilters")(t.real.recordMode)))])]),s("div",{staticClass:"item"},[s("h3",[t._v("记录间隔")]),s("div",{staticClass:"value"},[t._v(t._s(t._f("Intervalfilters")(t.real)))])])])])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("h2",[t._v("深度、电流时间曲线")]),s("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),s("el-row",{staticClass:"row"},[s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"m-box m-map"},[s("div",{staticClass:"top"}),s("div",{staticClass:"con"},[s("div",{staticClass:"mapDiv"},[s("tdt-map",{attrs:{center:t.coordinates.center,zoom:t.coordinates.zoom,controls:t.coordinates.controls}},[s("tdt-marker",{attrs:{position:t.coordinates.position,icon:t.coordinates.icon,draggable:t.coordinates.draggable}}),s("tdt-control",{attrs:{position:"topright",visible:t.coordinates.visible}})],1)],1)])])]),s("el-col",{staticClass:"col",attrs:{span:12}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"m-datab1"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("div",{ref:"angle",staticClass:"icon"}),s("div",{staticClass:"t1"},[s("p",[t._v("X"),s("b",[t._v(t._s(t._f("numfilters")(t.real.xAngle,1)))])]),s("p",[t._v("Y"),s("b",[t._v(t._s(t._f("numfilters")(t.real.yAngle,1)))])])])]),s("div",{staticClass:"oh"},[s("div",{staticClass:"item"},[s("p",[t._v("持续时长")]),s("b",[t._v(t._s(t.real.lasttime)+"分钟")])]),s("div",{staticClass:"item"},[s("p",[t._v("最大深度")]),s("b",[t._v(t._s(t._f("numfilters")(t.real.maxDeep))+"m")])]),s("div",{staticClass:"item"},[s("p",[t._v("最大电流")]),s("b",[t._v(t._s(t._f("numfilters")(t.maxCurrents))+"A")])])])]),s("div",{staticClass:"picbox"},[s("img",{staticClass:"bg",attrs:{src:p,alt:""}}),s("div",{staticClass:"databar"},[s("div",{staticClass:"data",style:{bottom:t.ztTop}},[s("img",{class:t.image,attrs:{src:h,alt:""}}),s("img",{staticClass:"zt",attrs:{src:u,alt:""}}),s("div",{staticClass:"info"},[s("p",[s("b",[t._v(t._s(t.pileStatusStr))])]),s("p",[t._v("深度"),s("em",[t._v(t._s(t._f("numfilters")(t.real.deep))+"(m)")])]),s("p",[t._v(t._s(t.pileStatusSpeed)),s("em",[t._v(t._s(t._f("numfilters")(t.real.speed))+"(cm/min)")])]),s("p",[t._v("电流"),s("em",[t._v(t._s(t._f("numfilters")(t.real.current))+"(A)")])]),s("img",{staticClass:"line",attrs:{src:v,alt:""}})])])])])])])])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tab2,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tab2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tab2,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[s("div",{staticClass:"block"},[s("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},t._l(t.cameraLive,(function(e,i){return s("el-carousel-item",{key:i,staticClass:"swiper_item",attrs:{label:i+1}},[s("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:t.playerOptions[i]}})],1)})),1)],1)])])]),s("el-footer",{staticClass:"m-selectAll"},[s("div",{staticClass:"right"},[s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"sizes,slot,  prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[s("i",{staticClass:"el-icon-d-arrow-left"})])]),s("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage4,"page-sizes":[4,8,12,16],"page-size":t.pageSize,layout:"slot , jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[s("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[s("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,kt,"72e2f207",null,null);function kt(t){for(var e in It)this[e]=It[e]}var Pt={},Dt=f({name:"previewOnline",components:{gTabs:e,JBZ:S,GH:x,GYXPZ:z,GFZ:A,GZ:M,GJ:H,CGSZ:K,CP:B,HTZJ:Q,FPZ:it,DK:rt,CFG:dt,XWZ:vt,ZKFPZ:bt,DP:wt,LG:function(){return xt.exports}()},data:function(){return{tab:"JBZ",iconImg:"",pageSize:8,total:0,currentPage4:1,tabList:[{label:"固化土",name:"0"},{label:"粉喷桩",name:"1"},{label:"高压旋喷桩",name:"2"},{label:"工法桩",name:"3"},{label:"沉管砂桩",name:"4"},{label:"搅拌桩",name:"5"}],onlineList:[{id:"1",icon:"@/assets/images/previewOnline/icon-list01.png",typeName:"搅拌桩",name:"双头搅拌桩测试",key:"MX02808020020100",startTime:"2021-04-14 10:34",createAt:1540102966,online:!0,status:1,zuangan:"下钻",penhui:"喷灰",weight:126.26}],selectItem:{}}},mounted:function(){var t=this;r().then((function(e){t.tabList=e,null!=sessionStorage.type?t.tab=sessionStorage.type:t.tab=t.tabList[0].name,t.iconImg="/src/assets/images/previewOnline/"+t.tab+".png",o(t.pageSize,0,t.tab).then((function(e){t.onlineList=e.result.records,t.total=e.result.total}))}))},filters:{datafilters:function(t){return c(1e3*t).format("YYYY-MM-DD HH:mm:ss")}},methods:{handleSizeChange:function(t){var e=this;this.pageSize=t,o(this.pageSize,0,this.tab).then((function(t){e.onlineList=t.result.records,e.total=t.result.total}))},handleCurrentChange:function(t){var e=this,s=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.currentPage4=t,o(this.pageSize,this.currentPage4,this.tab).then((function(t){e.onlineList=t.result.records,e.total=t.result.total,s.close()})),setTimeout((function(){s.close()}),6e3)},toFirstPage:function(){this.handleCurrentChange(1)},toLastPage:function(){this.handleCurrentChange(Math.ceil(this.total/this.pageSize))},handleClick:function(){var t=this,e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.iconImg="@assets/images/previewOnline/"+this.tab+".png",this.currentPage4=1,o(this.pageSize,0,this.tab).then((function(s){t.onlineList=s.result.records,t.total=s.result.total,sessionStorage.type=t.tab,e.close()})),setTimeout((function(){e.close()}),6e3)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-history"},[s("div",{staticClass:"m-topNav"},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabList,(function(t){return s("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}})})),1)],1),s(t.tab,{tag:"component",attrs:{iconImg:t.iconImg,onlineList:t.onlineList,pageSize:t.pageSize,total:t.total,currentPage4:t.currentPage4,handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange,toLastPage:t.toLastPage,toFirstPage:t.toFirstPage}})],1)}),[],!1,zt,"320b7c88",null,null);function zt(t){for(var e in Pt)this[e]=Pt[e]}t("default",function(){return Dt.exports}())}}}))}();
