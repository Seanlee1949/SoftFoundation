!function(){var t=document.createElement("style");t.innerHTML=".export_echart[data-v-864fe36a]{cursor:pointer;font-size:.75rem;background:#409eff;text-align:center;width:80px;height:32px;line-height:32px;margin-top:14px;border-radius:4px;color:#fff;float:left}.m-tab-echartTable[data-v-864fe36a]{position:relative}.echatrs[data-v-864fe36a]{position:absolute;top:0;left:-2000px;width:800px;height:660px}.backplayBottom[data-v-864fe36a]{margin-top:5px;background:#fff;height:3rem;display:flex;justify-content:space-between}.iconBack[data-v-864fe36a]{color:#211b1b;font-size:28px;font-weight:700;line-height:3.2rem}.progress_bar[data-v-864fe36a]{width:74%;margin-top:20px}.selectspeed[data-v-864fe36a]{width:120px;margin-top:10px}.backEchart[data-v-864fe36a]{background:#fff;height:20rem;margin:5px 0 5px 5px;border-radius:10px}.m-statusinfo[data-v-864fe36a]{background:#fff;box-shadow:none}.m-datab1 .top[data-v-864fe36a]{margin-bottom:0}.picbox .data[data-v-864fe36a]{bottom:97%}.picbox .databar[data-v-864fe36a]{bottom:7px}.m-datab1[data-v-864fe36a]{background:#fff;border-radius:10px;margin-left:5px;padding-top:.8rem}.mapDiv[data-v-864fe36a]{width:100%;height:100%}.moreConditions[data-v-864fe36a]{display:flex;width:100%;justify-content:space-around;padding-bottom:20px}.moreConditions .item[data-v-864fe36a],.moreConditions .items[data-v-864fe36a]{line-height:40px}.moreConditions .input[data-v-864fe36a]{width:38%}.el-button--primary[data-v-864fe36a]{margin-left:25px;margin-right:5px}.el-checkbox[data-v-864fe36a]{width:20%}.more[data-v-864fe36a]{margin-left:1.75rem;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4MUQ5MUJCNkEzRkYxMUVCQTE1NUVDNDc5MDNFOTc4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4MUQ5MUJCN0EzRkYxMUVCQTE1NUVDNDc5MDNFOTc4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgxRDkxQkI0QTNGRjExRUJBMTU1RUM0NzkwM0U5Nzg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgxRDkxQkI1QTNGRjExRUJBMTU1RUM0NzkwM0U5Nzg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+B0oTKQAAAE9JREFUeNpi/P//PwM1ARMDlcGogUPUQE8gfgbFnoQUMxKRDkEGSULZz4FYippeZqSGl1OA+AUQPwXiZGp4eTQdjibs0YQ9mg5HgoEAAQYAMKsdCdjHQ/QAAAAASUVORK5CYII=) center center no-repeat;background-size:contain;float:left;border-radius:.3125rem;-webkit-border-radius:.3125rem;-moz-border-radius:.3125rem;-ms-border-radius:.3125rem;-o-border-radius:.3125rem;overflow:hidden;transition:all .3s;-webkit-transition:all .3s;-moz-transition:all .3s;-ms-transition:all .3s;-o-transition:all .3s;cursor:pointer}.jbThead[data-v-864fe36a]{font-size:14px;color:#515a6e}.ul-detail .inner[data-v-864fe36a]{padding:.625rem 0 .625rem .3rem}.ul-detail .s3 .tit[data-v-864fe36a]{min-width:10em}.ul-detail .s1 .tit[data-v-864fe36a]{margin-right:0;min-width:5em}.valuepile[data-v-864fe36a]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ul-detail li[data-v-864fe36a]{padding:0 1.3rem 0 0}.ul-detail li[data-v-864fe36a]:first-child{padding-left:1.3rem}.m-tab-echartTable[data-v-2aa5e0fe]{position:relative}.echartdownLoad[data-v-2aa5e0fe]{position:absolute;top:0;left:-2000px;width:800px;height:660px}.ul-detail li[data-v-2aa5e0fe]{width:33%}.el-checkbox[data-v-2aa5e0fe]{width:20%}.el-button--primary[data-v-2aa5e0fe]{margin-left:25px;margin-right:5px}.el-table thead[data-v-2aa5e0fe]{color:#333}.cell[data-v-2aa5e0fe]{font-size:14px}.ul-detail li[data-v-2aa5e0fe]{padding:0 1.3rem 0 0}.ul-detail li[data-v-2aa5e0fe]:first-child{padding-left:1.3rem}.m-statusinfo .bottom[data-v-5677d65c]{display:flex;justify-content:space-between}.mapDiv[data-v-5677d65c]{padding:.75rem 1.25rem;height:100%}.backplayBottom[data-v-5677d65c]{background:#fff;border-radius:10px;margin-top:5px;height:4rem;display:flex;justify-content:space-between}.iconBack[data-v-5677d65c]{color:#000;font-size:26px;font-weight:700;line-height:4rem}.progress_bar[data-v-5677d65c]{width:75%;margin-top:25px}.selectspeed[data-v-5677d65c]{margin-top:15px;width:120px}.play_back[data-v-5677d65c]{height:50%;display:flex;justify-content:space-between}.m-statusinfo[data-v-5677d65c]{background:#fff}.play_col[data-v-5677d65c]{background:#fff;margin:5px;border-radius:10px}.backEchart[data-v-5677d65c]{height:18.3rem}.m-datab1[data-v-5677d65c]{padding-top:.75rem}.m-datab1 .top[data-v-5677d65c]{margin-bottom:0}.picbox .data[data-v-5677d65c]{bottom:96%}.picbox .databar[data-v-5677d65c]{bottom:10px}.m-tab-echartTable[data-v-5677d65c]{position:relative}.outEcharts[data-v-5677d65c]{position:absolute;top:0;left:-2000px;height:600px;width:600px}.export_echart[data-v-5677d65c]{cursor:pointer;font-size:12px;background:#409eff;text-align:center;width:80px;height:32px;line-height:32px;margin-top:14px;border-radius:4px;color:#fff;float:left;margin-right:10px}.col_3[data-v-5677d65c]{width:100%}.ul-detail li[data-v-5677d65c]{width:33%}.wp[data-v-5677d65c]{width:100%}.el-button--primary[data-v-5677d65c]{margin-left:25px}.el-checkbox[data-v-5677d65c]{width:20%}.m-filter .filter .btn[data-v-5677d65c]{margin-left:2.5rem}.el-button--primary[data-v-5677d65c]{margin-left:45px;margin-right:5px}.ul-detail .tit[data-v-5677d65c]{min-width:8em}.ul-detail .s3 .tit[data-v-5677d65c],.ul-detail .s4 .tit[data-v-5677d65c]{min-width:10em}.ul-detail li[data-v-5677d65c]{padding:0 1.4rem 0 0}.ul-detail li[data-v-5677d65c]:first-child{padding-left:1.4rem}.el-table[data-v-69f6c9fc]{padding:0 30px}.el-table th>.cell[data-v-69f6c9fc]{color:#333!important;font-size:16px!important;font-weight:400}.el-table tbody tr[data-v-69f6c9fc]{width:100%;border-radius:20px;margin-bottom:12px}.el-col-12[data-v-69f6c9fc]{width:100%}.m-table-save.el-table tr th[data-v-69f6c9fc]:nth-child(2),.m-table-save.el-table tr td[data-v-69f6c9fc]:nth-child(2){width:6.5%}.jbThead[data-v-69f6c9fc]{font-size:14px;color:#515a6e}.m-table-save.el-table tr th[data-v-69f6c9fc]:first-child,.m-table-save.el-table tr td[data-v-69f6c9fc]:first-child{padding-left:0rem}.ul-detail .inner[data-v-69f6c9fc]{padding:.625rem 0 .625rem .3rem}.ul-detail li[data-v-69f6c9fc]{padding:0 1.3rem 0 0}.ul-detail li[data-v-69f6c9fc]:first-child{padding-left:1.3rem}.m-tab-echartTable[data-v-82417c5e]{position:relative}.echartdownLoad[data-v-82417c5e]{position:absolute;top:0;left:-2000px;width:800px;height:660px}.ul-detail li[data-v-82417c5e]{width:33%}.el-button--primary[data-v-82417c5e]{margin-left:45px;margin-right:5px}.m-filter .filter .btn[data-v-82417c5e]{margin-left:2.5rem}.el-checkbox[data-v-82417c5e]{width:20%}.ul-detail li[data-v-82417c5e]{padding:0 1.3rem 0 0}.ul-detail li[data-v-82417c5e]:first-child{padding-left:1.6rem}.ul-detail .s3 .tit[data-v-82417c5e]{min-width:8em}.m-pop-echart-two[data-v-82417c5e]{display:flex;flex-direction:row}.m-pop-echart-two .row[data-v-82417c5e]{flex:.5}.m-pop-echart-two .inner[data-v-82417c5e]{flex:1;background:#fff}.m-pop-echart-two .el-col-12[data-v-82417c5e]{width:100%}.m-tab-echartTable[data-v-7c08a513]{position:relative}.reportEchart[data-v-7c08a513]{position:absolute;top:0;left:-1000px;width:800px;height:800px}.echarts_report[data-v-7c08a513]{width:100px;height:40px;line-height:40px;margin-top:10px;border-radius:20px;color:#fff;text-align:center;background:#409eff;float:left;margin-right:10px;cursor:pointer}.mapDiv[data-v-7c08a513]{height:100%;padding:.75rem 1.25rem}.map[data-v-7c08a513]{height:100%}.backplayBottom[data-v-7c08a513]{background:#fff;border-radius:10px;margin-top:5px;height:4rem;display:flex;justify-content:space-between}.iconBack[data-v-7c08a513]{color:#000;font-size:26px;font-weight:700;line-height:4rem}.progress_bar[data-v-7c08a513]{width:75%;margin-top:25px}.selectspeed[data-v-7c08a513]{margin-top:15px;width:120px}.play_back[data-v-7c08a513]{height:50%;display:flex;justify-content:space-between}.m-statusinfo[data-v-7c08a513]{background:#fff}.play_col[data-v-7c08a513]{background:#fff;margin:5px;border-radius:10px}.backEchart[data-v-7c08a513]{height:18.3rem}.m-datab1[data-v-7c08a513]{padding-top:.75rem}.m-datab1 .top[data-v-7c08a513]{margin-bottom:0}.picbox .data[data-v-7c08a513]{bottom:96%}.picbox .databar[data-v-7c08a513]{bottom:10px}.ul-detail li[data-v-7c08a513]{width:33%}.el-checkbox[data-v-7c08a513]{width:20%}.el-button--primary[data-v-7c08a513]{margin-left:25px}.el-button--primary[data-v-7c08a513]{margin-left:25px;margin-right:5px}.m-filter .filter .btn[data-v-7c08a513]{margin-left:2.5rem}.ul-detail .tit[data-v-7c08a513]{min-width:5em}.ul-detail .s2 .tit[data-v-7c08a513]{min-width:8em}.ul-detail .s3 .tit[data-v-7c08a513],.ul-detail .s4 .tit[data-v-7c08a513]{min-width:10em}.ul-detail li[data-v-7c08a513]{padding:0 1.3rem 0 0}.ul-detail li[data-v-7c08a513]:first-child{padding-left:1.6rem}.m-filter .filter .btn[data-v-90e2c994][data-v-7c08a513]{margin-left:20px}.ul-detail li[data-v-c5dd8cd0]{width:33%}.el-button--primary[data-v-c5dd8cd0]{margin-left:45px;margin-right:5px}.m-filter .filter .btn[data-v-c5dd8cd0]{margin-left:2.5rem}.el-checkbox[data-v-c5dd8cd0]{width:20%}.ul-detail li[data-v-c5dd8cd0]{padding:0 1.3rem 0 0}.ul-detail li[data-v-c5dd8cd0]:first-child{padding-left:1.6rem}.ul-detail .s3 .tit[data-v-c5dd8cd0]{min-width:8em}.m-pop-echart-two[data-v-c5dd8cd0]{display:flex;flex-direction:row}.m-pop-echart-two .row[data-v-c5dd8cd0]{flex:.5}.m-pop-echart-two .inner[data-v-c5dd8cd0]{flex:1;background:#fff}.m-pop-echart-two .el-col-12[data-v-c5dd8cd0]{width:100%}.ul-detail .s3 .tit[data-v-09e1c22d]{min-width:7rem}.ul-detail .inner[data-v-09e1c22d]{padding:.625rem 0 .625rem .3rem}.ul-detail li[data-v-09e1c22d]{padding:0 1.2rem 0 0}.ul-detail li[data-v-09e1c22d]:first-child{padding-left:1.2rem}.el-col-12[data-v-6e843281]{width:100%}.ul-detail li[data-v-6e843281]{width:33%}.ul-detail li[data-v-6e843281]{padding:0 1.4rem 0 0}.ul-detail li[data-v-6e843281]:first-child{padding-left:1.6rem}.el-col-12[data-v-7b4337ab]{width:100%}.ul-detail li[data-v-7b4337ab]{width:33%}.ul-detail li[data-v-7b4337ab]{padding:0 1.3rem 0 0}.ul-detail li[data-v-7b4337ab]:first-child{padding-left:1.5rem}.ul-detail .s2 .tit[data-v-7b4337ab]{min-width:6em}.m-tab-echartTable[data-v-9143bf74]{position:relative}.echartDownload[data-v-9143bf74]{position:absolute;top:0;left:-2000px;width:800px;height:660px}.col_3[data-v-9143bf74]{width:100%}.el-checkbox[data-v-9143bf74]{width:20%}.el-button--primary[data-v-9143bf74]{margin-left:45px;margin-right:5px}.m-filter .filter .btn[data-v-9143bf74]{margin-left:2.5rem}.ul-detail li[data-v-9143bf74]{padding:0 1.3rem 0 0}.ul-detail li[data-v-9143bf74]:first-child{padding-left:1.3rem}.ul-detail .inner[data-v-9143bf74]{padding:.625rem .5rem}.el-col-12[data-v-73c67c4e]{width:100%}.el-button--primary[data-v-73c67c4e]{margin-left:25px;margin-right:5px}.el-checkbox[data-v-73c67c4e]{width:20%}.more[data-v-73c67c4e]{margin-left:1.75rem;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4MUQ5MUJCNkEzRkYxMUVCQTE1NUVDNDc5MDNFOTc4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4MUQ5MUJCN0EzRkYxMUVCQTE1NUVDNDc5MDNFOTc4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgxRDkxQkI0QTNGRjExRUJBMTU1RUM0NzkwM0U5Nzg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgxRDkxQkI1QTNGRjExRUJBMTU1RUM0NzkwM0U5Nzg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+B0oTKQAAAE9JREFUeNpi/P//PwM1ARMDlcGogUPUQE8gfgbFnoQUMxKRDkEGSULZz4FYippeZqSGl1OA+AUQPwXiZGp4eTQdjibs0YQ9mg5HgoEAAQYAMKsdCdjHQ/QAAAAASUVORK5CYII=) center center no-repeat;background-size:contain;float:left;border-radius:.3125rem;-webkit-border-radius:.3125rem;-moz-border-radius:.3125rem;-ms-border-radius:.3125rem;-o-border-radius:.3125rem;overflow:hidden;transition:all .3s;-webkit-transition:all .3s;-moz-transition:all .3s;-ms-transition:all .3s;-o-transition:all .3s;cursor:pointer}.jbThead[data-v-73c67c4e]{font-size:14px;color:#515a6e}.ul-detail .inner[data-v-73c67c4e]{padding:.625rem 0 .625rem .3rem}.ul-detail .s3 .tit[data-v-73c67c4e]{min-width:10em}.ul-detail .s1 .tit[data-v-73c67c4e]{margin-right:0;min-width:5em}.valuepile[data-v-73c67c4e]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ul-detail li[data-v-73c67c4e]{padding:0 1.3rem 0 0;width:33%}.ul-detail li[data-v-73c67c4e]:first-child{padding-left:1.3rem}.m-tab-echartTable[data-v-dfbcf6bc]{position:relative}.echatrs[data-v-dfbcf6bc]{position:absolute;top:0;left:-2000px;width:800px;height:660px}.ul-detail li[data-v-dfbcf6bc]{width:33%}.el-checkbox[data-v-dfbcf6bc]{width:20%}.el-button--primary[data-v-dfbcf6bc]{margin-left:25px;margin-right:5px}.el-table thead[data-v-dfbcf6bc]{color:#333}.cell[data-v-dfbcf6bc]{font-size:14px}.ul-detail li[data-v-dfbcf6bc]{padding:0 1.3rem 0 0}.ul-detail li[data-v-dfbcf6bc]:first-child{padding-left:1.3rem}.ul-detail li[data-v-09ef00dd]{width:33%}.ul-detail li[data-v-09ef00dd]{padding:0 1.3rem 0 0}.ul-detail li[data-v-09ef00dd]:first-child{padding-left:1.5rem}.ul-detail li[data-v-42f01ce6]{width:33%}.el-button--primary[data-v-42f01ce6]{margin-left:45px;margin-right:5px}.m-filter .filter .btn[data-v-42f01ce6]{margin-left:2.5rem}.el-checkbox[data-v-42f01ce6]{width:20%}.ul-detail li[data-v-42f01ce6]{padding:0 1.3rem 0 0}.ul-detail li[data-v-42f01ce6]:first-child{padding-left:1.6rem}.ul-detail .s3 .tit[data-v-42f01ce6]{min-width:8em}.m-pop-echart-two[data-v-42f01ce6]{display:flex;flex-direction:row}.m-pop-echart-two .row[data-v-42f01ce6]{flex:.5}.m-pop-echart-two .inner[data-v-42f01ce6]{flex:1;background:#fff}.m-pop-echart-two .el-col-12[data-v-42f01ce6]{width:100%}\n",document.head.appendChild(t),System.register(["./api-legacy.57550f3a.js","./gTabs-legacy.aef3a624.js","./moment-legacy.d336d678.js","./report-legacy.dac82056.js","./c-i1-legacy.02a2b16c.js","./index-legacy.3dc6c170.js","./b4-legacy.8bb01245.js","./gTabs.vue_vue_type_style_index_0_scoped_true_lang-legacy.6ffcbfbe.js"],(function(t){"use strict";var e,a,i,s,l,r,n,o,c,m,d,h,p,u,v;return{setters:[function(t){e=t.g,a=t.f,i=t.q},function(t){s=t.g},function(t){l=t.h,r=t.i,n=t.c},function(t){o=t.r},function(t){c=t._,m=t.a,d=t.b,h=t.c,p=t.d},function(t){u=t.n},function(t){v=t.b},function(){}],execute:function(){var f=["pileDescribe","deviceKey","beginTime","endTime","designDepth","depth","frDepth","reDepth","waterCementRatio","cumulativePulp","averagePulp","cumulativeAsh","averageAsh","pileTopCurrent","maxCurrent","downSpeed","upSpeed","averageCurrent","maxDownSpeed","maxUpSpeed","xAngle","pileTime","tTypeLength","tTypePulp","tTypeAsh","bottomPartPulp","bottomPartAsh","emDepth"],b={},g=u({components:{gTabs:s,report:o},name:"carrousel",props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage"],data:function(){return{options:[{value:"ordinary",label:"正常"},{value:"fast",label:"快速"},{value:"topspeed",label:"极速"}],value:"ordinary",datalength:[],totalPartTime:0,f:0,t:0,PlaybackTime:"",pileDeep:0,icon:"el-icon-video-pause",percentage:0,color:"#000",playbackTimeDepth:[],playbackTimeFlow:[],LastTime:0,totalPartPulp:0,totalPartAsh:0,ztTop:100,pileStatusStr:"停钻",pileDownStatus:"结束",pulpStatus:"止喷",image:"stop",playBack:null,dingshi:null,y:0,dataNum:[],recordStatusClass:"",pipeStatusClass:"",nozzleStatusClass:"",map:null,pileDepth:"",pileDepth2:"",pileAsh:"",pileAsh2:"",pileTime:"",pileTime2:"",cumulativePileAsh:"",cumulativePileAsh2:"",depthReport:[],pulpReport:{},ashReport:{},upspeed:{},downspeed:{},partcurrent:{},report:"report",checkedData:[],totalChecked:!1,startDate:"",endDate:"",pileDescribe:"",deviceKey:"",checkedId:[],checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","designDepth","depth","pileTime","cumulativePulp","averageAsh","cumulativeAsh","downSpeed","upSpeed","pileTopCurrent"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"设备编号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"designDepth",label:"设计桩长",formatter:this.designnumFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"frDepth",label:"初搅深度(m)",formatter:this.numFormatter},{prop:"reDepth",label:"复搅深度(m)",formatter:this.numFormatter},{prop:"waterCementRatio",label:"水灰比(:1)",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)",formatter:this.numsFormatter},{prop:"averagePulp",label:"平均浆量(L/m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numsFormatter},{prop:"averageAsh",label:"平均灰量(kg/m)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"桩端电流(A)",formatter:this.numsFormatter},{prop:"maxCurrent",label:"最大电流(A)",formatter:this.numsFormatter},{prop:"downSpeed",label:"下钻速度(cm/min)",formatter:this.numsFormatter},{prop:"upSpeed",label:"提钻速度(cm/min)",formatter:this.numsFormatter},{prop:"averageCurrent",label:"平均电流(A)",formatter:this.numFormatter},{prop:"maxDownSpeed",label:"最大钻速(cm/min)",formatter:this.numsFormatter},{prop:"maxUpSpeed",label:"最大提速(cm/min)",formatter:this.numsFormatter},{prop:"xAngle",label:"最大斜度(%)",formatter:this.numsFormatter},{prop:"pileTime",label:"成桩时间(min)\t",formatter:this.minFormatter},{prop:"tTypeLength",label:"扩大头桩长(m)\t",formatter:this.numFormatter},{prop:"tTypePulp",label:"扩大头浆量(L)",formatter:this.numFormatter},{prop:"tTypeAsh",label:"扩大头灰量(kg)",formatter:this.numFormatter},{prop:"bottomPartPulp",label:"下部桩浆量(L)",formatter:this.numsFormatter},{prop:"bottomPartAsh",label:"下部桩灰量(kg)",formatter:this.numFormatter},{prop:"emDepth",label:"空搅深度(m)",formatter:this.numFormatter}],isIndeterminate:!1,dialogFormVisible:!1,dialogFormVisibleMore:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"设备编号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"designDepth",label:"设计桩长",formatter:this.designnumFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)",formatter:this.numsFormatter},{prop:"averageAsh",label:"平均灰量(kg/m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numsFormatter},{prop:"pileTopCurrent",label:"桩端电流(A)",formatter:this.numsFormatter},{prop:"downSpeed",label:"下钻速度(cm/min)",formatter:this.numsFormatter},{prop:"upSpeed",label:"提钻速度(cm/min)",formatter:this.numsFormatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],tempCols:[],centerDialogVisible:!1,data:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"},{name:"历史回放"}],firstDowntime:[],firstDowntime2:[],inquire:[],totalNum:0,echartAll:[],echartsAll:[],show:!1}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},minfilters:function(t){return(parseFloat(t)/60).toFixed(2)},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},num3filters:function(t){return parseFloat(t).toFixed(2)},num5filters:function(t){return t<0?"提钻":"下钻"}},watch:{centerDialogVisible:function(t,e){if(window.onresize=null,0==t){if(this.show=!1,this.playBackClear(),clearInterval(this.playBack),this.tab2=0,this.selectItem=[],this.data=[],this.upspeed=[],this.downspeed=[],this.ashReport=[],this.depthReport=[],this.partcurrent=[],void 0===this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose(),this.myChart06.dispose(),this.myChart07.dispose(),this.myChart08.dispose()}}},mounted:function(){var t=this;sessionStorage.pileDepth=this.pileDepth,sessionStorage.cumulativePileAsh=this.cumulativePileAsh,sessionStorage.pileTime=this.pileTime,setTimeout((function(){t.deviceKey=t.device}),2e3)},methods:{download:function(){var t=document.createElement("a");t.href=this.myChart06.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},playBackClear:function(){this.value="ordinary",this.datalength=[],this.totalPartTime=0,this.f=0,this.t=0,this.PlaybackTime="",this.pileDeep=0,this.icon="el-icon-video-pause",this.percentage=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,this.ztTop=100,this.pileStatusStr="停钻",this.pileDownStatus="结束",this.pulpStatus="止喷",this.image="stop",this.y=0,this.dataNum=[],this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",clearInterval(this.playBack),clearInterval(this.dingshi),void 0===this.myChart05||this.myChart05._disposed||this.myChart05.dispose()},columnWidth:function(t){return 4==t||5==t||6==t||7==t||8==t||9==t?120:10==t||11==t||12==t?150:void 0},exportAll:function(){this.tableToExcel("statisticsTableRecord","-搅拌桩-统计报表")},downLoad:function(t){switch(t){case 0:this.tableToExcel("statisticsTablePrint",l(1e3*this.selectItem.beginTime).format("YYYY-MM-DD")+"-搅拌桩-打印版");break;case 1:this.tableToExcel("statisticsTable",l(1e3*this.selectItem.beginTime).format("YYYY-MM-DD")+"-搅拌桩-综合版");break;case 2:this.tableToExcel("statisticsTabledetailed",l(1e3*this.selectItem.beginTime).format("YYYY-MM-DD")+"-搅拌桩_详细版")}},tableToExcel:function(t,e){var a;t.nodeType||(t=document.getElementById(t)),t&&(a={worksheet:e||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href="data:application/vnd.ms-excel;base64,"+this.base64(this.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e <style type="text/css">table td {height: 25px;font-family: 宋体;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px;mso-number-format:"@"; }</style></head><body ><table class="excelTable">{table}</table></body></html>',a)),document.getElementById("simulation").download=e+".xls",document.getElementById("simulation").click())},base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("JBZ",0,this.deviceKey,this.pageSize,this.pileDescribe,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.pileDescribe,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.pileDescribe="",this.startDate="",this.endDate=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},numsFormatter:function(t,e,a,i){return parseFloat(a).toFixed(1)},designnumFormatter:function(t,e,a,i){return null==a?"--":parseFloat(a).toFixed(2)},handleCheckAllChange:function(t){this.checkedFileds=t?f:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},moreConditions:function(){this.dialogFormVisibleMore=!0},moreDetermine:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("JBZ",0,this.device,this.pageSize,this.pileDescribe,this.startDate,this.endDate,this.pileDepth,this.cumulativePileAsh,this.pileTime,this.pileDepth2,this.pileAsh,this.pileAsh2,this.cumulativePileAsh2,this.pileTime2).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.device,t.pileDescribe,t.startDate,t.endDate,t.inquire,t.totalNum,t.pileDepth2,t.pileAsh,t.pileAsh2,t.cumulativePileAsh2,t.pileTime2,t.pileDepth,t.pileTime,t.cumulativePileAsh),a.close()})),this.dialogFormVisibleMore=!1},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initechart06:function(){var t=this.data,e={title:{text:"深度、密度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","密度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度(m)  ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 密度(g/cm³)",nameLocation:"end",inverse:!0,type:"value",splitLine:{show:!1},nameTextStyle:{padding:[10,20,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]})),animation:!1},{name:"密度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDensity.toFixed(3)+""]})),animation:!1}]};this.myChart06=r(this.$refs.myChart06,null,{devicePixelRatio:2.5}),this.myChart06.setOption(e),this.echartsAll.push(this.myChart06)},initechart07:function(){var t=this.data,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度(m)       ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"      电流(A)",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]})),animation:!1},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent.toFixed(2)]})),animation:!1}]};this.myChart07=r(this.$refs.myChart07,null,{devicePixelRatio:2.5}),this.myChart07.setOption(e),this.echartsAll.push(this.myChart07)},initechart08:function(){var t=this.data,e={title:{text:"流量、速度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["流量","速度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"流量(L/min)",type:"value",nameLocation:"start",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]},max:150,min:0},{name:"速度(cm/min)      ",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp/e.partTime*60).toFixed(2)]})),animation:!1},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]})),animation:!1}]};this.myChart08=r(this.$refs.myChart08,null,{devicePixelRatio:2.5}),this.myChart08.setOption(e),this.echartsAll.push(this.myChart08)},initEchart01:function(){var t=this.data,e={title:{text:"深度、密度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","密度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{type:"png"}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度(m)  ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 密度(g/cm³)",nameLocation:"end",inverse:!0,type:"value",splitLine:{show:!1},nameTextStyle:{padding:[10,20,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))},{name:"密度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDensity.toFixed(3)+""]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echartAll.push(this.myChart01)},initEchart02:function(){var t=this.data,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"深度(m)       ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"      电流(A)",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echartAll.push(this.myChart02)},initEchart03:function(){var t=this.data,e={title:{text:"流量、速度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["流量","速度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"流量(L/min)",type:"value",nameLocation:"start",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]},max:150,min:0},{name:"速度(cm/min)      ",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp/e.partTime*60).toFixed(2)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]}))}]};this.myChart03=r(this.$refs.myChart03,null,{devicePixelRatio:2.5}),this.myChart03.setOption(e),this.echartAll.push(this.myChart03)},initEchart04:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].partDeep-1)]&&(t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0),t[Math.ceil(this.selectItem.data[e].partDeep-1)]+=this.selectItem.data[e].partAsh;var a={title:{text:"成桩灰量分布",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}Kg"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"灰量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart04=r(this.$refs.myChart04,null,{renderer:"svg"}),this.myChart04.setOption(a)},initEchart05:function(){var t={title:{text:"深度、流量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","流量"]},grid:{top:"15%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度(m)  ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},max:30,nameTextStyle:{padding:[10,0,0,15]}},{name:" 流量(L/min)",nameLocation:"start",type:"value",splitLine:{show:!1},max:120,min:0,nameTextStyle:{padding:[10,20,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.playbackTimeDepth},{name:"流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.playbackTimeFlow}]};this.myChart05.setOption(t)},setAngle:function(t,e){var a={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-20",max:"20",axisLabel:{show:!1}},yAxis:{type:"value",min:"-20",max:"20",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=r(this.$refs.angle)),this.angle.setOption(a)},changeHandle:function(t){var e=this,a=this;if(this.tab2=t,0===t&&(this.show=!1,this.playBackClear()),1===t&&(this.show=!0,this.$nextTick((function(){e.initechart06(),e.initechart07(),e.initechart08(),n(e.echartsAll),e.initEchart04(),e.initEchart01(),e.initEchart02(),e.initEchart03(),n(e.echartAll),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}})),this.playBackClear()),2===t){this.show=!1,this.$nextTick((function(){e.myChart05=r(e.$refs.myChart05,null,{renderer:"svg"}),e.initEchart05(),window.onresize=function(){a.myChart05.resize(),a.map.checkResize()}})),null==this.selectItem.xAngle&&(this.selectItem.xAngle=0),null==this.selectItem.yAngle&&(this.selectItem.yAngle=0),this.setAngle(this.selectItem.xAngle,this.selectItem.yAngle),this.datalength=this.selectItem.data;for(var i=0;i<this.datalength.length;i++)this.totalPartTime+=this.datalength[i].partTime;this.PlaybackTime=this.selectItem.beginTime,this.playbackTimeDepth.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),0]),this.playbackTimeFlow.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),0]),this.dingshi=setInterval((function(){e.dataHistoryBack2()}),3e3),this.playBack=setInterval((function(){e.dataHistoryBack()}),3e3)}},dataHistoryBack:function(){this.percentage=Number((this.LastTime/this.totalPartTime*100).toFixed(1)),this.pileDownStatus="开始",this.recordStatusClass="on",this.myFun(this.datalength[this.f++].partDeep),this.f==this.datalength.length&&(this.percentage=100,this.pileDownStatus="结束",this.icon="el-icon-video-play",this.recordStatusClass="",clearInterval(this.playBack))},dataHistoryBack2:function(){this.dataNum=this.datalength[this.t++],this.PlaybackTime+=this.dataNum.partTime,this.playbackTimeDepth.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),this.dataNum.partDeep]),this.playbackTimeFlow.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),(this.dataNum.partPulp/this.dataNum.partTime*60).toFixed(2)]),this.LastTime+=this.dataNum.partTime,this.totalPartPulp+=this.dataNum.partPulp,this.totalPartAsh+=this.dataNum.partAsh,this.pileDeep<this.dataNum.partDeep?(this.pileStatusStr="下钻",this.image="down",this.pulpStatus="喷浆"):(this.pileStatusStr="提钻",this.image="up",this.pulpStatus="止喷"),this.pileDeep=this.dataNum.partDeep,this.pipeStatusClass="on",this.nozzleStatusClass="on",this.initEchart05(),this.t==this.datalength.length&&(this.pipeStatusClass="",this.nozzleStatusClass="",this.pileStatusStr="停钻",this.image="stop",this.pulpStatus="止喷",clearInterval(this.dingshi))},change:function(){var t=this;"结束"!=this.pileDownStatus&&("fast"==this.value?(clearInterval(this.playBack),clearInterval(this.dingshi),this.dingshi=setInterval((function(){t.dataHistoryBack2()}),2e3),this.playBack=setInterval((function(){t.dataHistoryBack()}),2e3)):"topspeed"==this.value?(clearInterval(this.playBack),clearInterval(this.dingshi),this.dingshi=setInterval((function(){t.dataHistoryBack2()}),1e3),this.playBack=setInterval((function(){t.dataHistoryBack()}),1e3)):"ordinary"==this.value&&(clearInterval(this.playBack),clearInterval(this.dingshi),this.dingshi=setInterval((function(){t.dataHistoryBack2()}),3e3),this.playBack=setInterval((function(){t.dataHistoryBack()}),3e3)))},backPlay:function(){var t=this;if("el-icon-video-pause"==this.icon)clearInterval(this.playBack),clearInterval(this.dingshi),this.icon="el-icon-video-play";else if("el-icon-video-play"==this.icon){if("结束"==this.pileDownStatus)this.value="ordinary",this.f=0,this.t=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,this.ztTop=100,this.pileStatusStr="停钻",this.pileDownStatus="结束",this.pulpStatus="止喷",this.image="stop",this.y=0,this.dataNum=[],this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",clearInterval(this.playBack),clearInterval(this.dingshi),this.dingshi=setInterval((function(){t.dataHistoryBack2()}),3e3),this.playBack=setInterval((function(){t.dataHistoryBack()}),3e3);else{var e=3e3;"ordinary"==this.value?e=3e3:"fast"==this.value?e=2e3:"topspeed"==this.value&&(e=1e3),this.dingshi=setInterval((function(){t.dataHistoryBack2()}),e),this.playBack=setInterval((function(){t.dataHistoryBack()}),e)}this.icon="el-icon-video-pause"}},stop:function(){var t=this;this.value="ordinary",this.f=0,this.t=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,this.ztTop=100,this.pileStatusStr="停钻",this.pileDownStatus="结束",this.pulpStatus="止喷",this.image="stop",this.y=0,this.dataNum=[],this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",clearInterval(this.playBack),clearInterval(this.dingshi),this.dingshi=setInterval((function(){t.dataHistoryBack2()}),3e3),this.playBack=setInterval((function(){t.dataHistoryBack()}),3e3)},handleCommand:function(t){var e=this;this.selectItem=this.tableData[t],this.centerDialogVisible=!0;for(var a,i=this.selectItem.beginTime,s=[],r=[],n=[],o=[],c=[],m=[],d=new Map,h=new Map,p=0;p<this.tableData[t].data.length;p++){i+=this.tableData[t].data[p].partTime,a=l(1e3*i).format("YYYY-MM-DD HH:mm:ss"),this.data.push(a),0!=this.tableData[t].data[p].partDeep&&this.depthReport.push(Math.ceil(this.tableData[t].data[p].partDeep));for(var u=0;u<this.depthReport.length;u++)for(var v=u+1;v<this.depthReport.length;v++)this.depthReport[u]==this.depthReport[v]&&(this.depthReport.splice(v,1),v--);if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)+.25){var f={key:Math.floor(this.tableData[t].data[p].partDeep)+.25,value:Number(this.tableData[t].data[p].partPulp)};s.push(f);var b={};s.forEach((function(t){b[t.key]?b[t.key]+=t.value:b[t.key]=t.value}))}if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)+.5){var g={key:Math.floor(this.tableData[t].data[p].partDeep)+.5,value:Number(this.tableData[t].data[p].partPulp.toFixed(2))};r.push(g);var C={};r.forEach((function(t){C[t.key]?C[t.key]+=t.value:C[t.key]=t.value}))}if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)+.75){var y={key:Math.floor(this.tableData[t].data[p].partDeep)+.75,value:Number(this.tableData[t].data[p].partPulp.toFixed(2))};n.push(y);var x={};n.forEach((function(t){x[t.key]?x[t.key]+=t.value:x[t.key]=t.value}))}if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)){var _={key:Math.floor(this.tableData[t].data[p].partDeep),value:Number(this.tableData[t].data[p].partPulp.toFixed(2))};o.push(_);var w={};o.forEach((function(t){w[t.key]?w[t.key]+=t.value:w[t.key]=t.value}))}if(null==c[Math.ceil(this.tableData[t].data[p].partDeep-1)]&&(c[Math.ceil(this.tableData[t].data[p].partDeep-1)]=0),c[Math.ceil(this.tableData[t].data[p].partDeep-1)]+=Number(this.tableData[t].data[p].partAsh.toFixed(2)),null==m[Math.ceil(this.tableData[t].data[p].partDeep-1)]&&(m[Math.ceil(this.tableData[t].data[p].partDeep-1)]=0),m[Math.ceil(this.tableData[t].data[p].partDeep-1)]=Number(this.tableData[t].data[p].partCurrent.toFixed(2)),this.tableData[t].data[p].partDeep>0&&this.tableData[t].data[p].partDownSpeed>0)if(null==d.get(Math.ceil(this.tableData[t].data[p].partDeep))){var k=[];k.push(this.tableData[t].data[p].partDownSpeed),d.set(Math.ceil(this.tableData[t].data[p].partDeep),k)}else{var D=d.get(Math.ceil(this.tableData[t].data[p].partDeep));D.push(this.tableData[t].data[p].partDownSpeed),d.set(Math.ceil(this.tableData[t].data[p].partDeep),D)}if(this.tableData[t].data[p].partDownSpeed<0)if(null==h.get(Math.ceil(this.tableData[t].data[p].partDeep))){var S=[];S.push(this.tableData[t].data[p].partDownSpeed),h.set(Math.ceil(this.tableData[t].data[p].partDeep),S)}else{var I=h.get(Math.ceil(this.tableData[t].data[p].partDeep));I.push(this.tableData[t].data[p].partDownSpeed),h.set(Math.ceil(this.tableData[t].data[p].partDeep),I)}}for(var T=[],F=0;F<m.length;F++){var A={key:F,value:m[F]};T.push(A)}T.forEach((function(t){e.partcurrent[t.key]?e.partcurrent[t.key]+=t.value:e.partcurrent[t.key]=t.value}));var L=[];h.forEach((function(t){L.push(t)}));for(var P=[],z=0,M=0;M<L.length;M++){for(var E=0;E<L[M].length;E++)z+=L[M][E];var N=Math.abs((z/L[M].length).toFixed(2));P.push(N),z=0}P=P.reverse();for(var Y=[],H=0;H<P.length;H++){var R={key:H,value:P[H]};Y.push(R)}Y.forEach((function(t){e.upspeed[t.key]?e.upspeed[t.key]+=t.value:e.upspeed[t.key]=t.value}));var $=[];d.forEach((function(t){$.push(t)}));for(var K=[],V=0,W=0;W<$.length;W++){for(var B=0;B<$[W].length;B++)V+=$[W][B];var j=Number((V/$[W].length).toFixed(2));K.push(j),V=0}for(var O=[],U=0;U<K.length;U++){var Z={key:U,value:K[U]};O.push(Z)}O.forEach((function(t){e.downspeed[t.key]?e.downspeed[t.key]+=t.value:e.downspeed[t.key]=t.value}));for(var G=[],q=0;q<c.length;q++){var J={key:q,value:c[q]};G.push(J)}G.forEach((function(t){e.ashReport[t.key]?e.ashReport[t.key]+=t.value:e.ashReport[t.key]=t.value})),this.depthReport.unshift(0),this.depthReport.splice(this.depthReport.length-1,1),this.pulpReport=Object.assign(b,C,x,w)},selectionChange:function(t){this.checkedData=t.reverse();for(var e=[],a=0;a<t.length;a++)e.push(t[a].data);for(var i=[],s=[],r=[],n=[],o=0;o<e.length;o++){for(var c=0;c<e[o].length;c++)e[o][c].partDownSpeed>0&&i.push([e[o][c].partDeep,e[o][c].partTime,e[o][c].partDownSpeed]),e[o][c].partDownSpeed<0&&n.push([e[o][c].partDeep,e[o][c].partTime,e[o][c].partDownSpeed]);s.push(i),r.push(n),n=[],i=[]}for(var m=[],d=0;d<s.length;d++){for(var h=1;h<s[d].length;h++)if(s[d][h-1][0]>s[d][h][0])var p=h;0!=p&&null!=p||(p=s[d].length),m.push(p),p=0}for(var u=[],v=[],f=0;f<s.length;f++)u.push(s[f].slice(0,m[f])),v.push(s[f].slice(m[f]));for(var b=0,g=0,C=0;C<u.length;C++){for(var y=0;y<u[C].length;y++)b+=u[C][y][1],g+=u[C][y][1]*u[C][y][2];g/b=="Infinity"||0==u[C].length?this.checkedData[C].speed1=0:this.checkedData[C].speed1=(g/b).toFixed(2),b=0,g=0}for(var x=0,_=0,w=0;w<v.length;w++){for(var k=0;k<v[w].length;k++)x+=v[w][k][1],_+=v[w][k][1]*v[w][k][2];_/x=="Infinity"||0==v[w].length?this.checkedData[w].speed2=0:this.checkedData[w].speed2=(_/x).toFixed(2),x=0,_=0}for(var D=[],S=0;S<r.length;S++){for(var I=1;I<r[S].length;I++)if(r[S][I-1][0]<r[S][I][0])var T=I;0!=T&&null!=T||(T=r[S].length),D.push(T),T=0}for(var F=[],A=[],L=0;L<r.length;L++)F.push(r[L].slice(0,D[L])),A.push(r[L].slice(D[L]));for(var P=0,z=0,M=0;M<F.length;M++){for(var E=0;E<F[M].length;E++)P+=F[M][E][1],z+=F[M][E][1]*F[M][E][2];z/P=="Infinity"||0==F[M].length?this.checkedData[M].speed3=0:this.checkedData[M].speed3=Math.abs((z/P).toFixed(2)),P=0,z=0}for(var N=0,Y=0,H=0;H<A.length;H++){for(var R=0;R<A[H].length;R++)N+=A[H][R][1],Y+=A[H][R][1]*A[H][R][2];Y/N=="Infinity"||0==A[H].length?this.checkedData[H].speed4=0:this.checkedData[H].speed4=Math.abs((Y/N).toFixed(2)),N=0,Y=0}this.checkedData.startDate=l(1e3*this.checkedData[0].beginTime).format("YYYY-MM-DD HH:mm:ss"),this.checkedData.endDate=l(1e3*this.checkedData[this.checkedData.length-1].endTime).format("YYYY-MM-DD HH:mm:ss"),this.checkedData.milePartNo=this.checkedData[this.checkedData.length-1].milePartNo,this.checkedId=[];for(var $=0;$<t.length;$++)this.checkedId.push(t[$]._id);t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/this.selectItem.depth.toFixed(2)*100+"%"},loadmap:function(){var t=window.T;this.map=new t.Map("mapDiv"),this.map.centerAndZoom(new t.LngLat(this.selectItem.longitude,this.selectItem.latitude),10);var e=new t.Control.MapType([{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:window.TMAP_NORMAL_MAP},{title:"卫星",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:window.TMAP_SATELLITE_MAP}]);this.map.addControl(e);var a=new t.LngLat(this.selectItem.longitude,this.selectItem.latitude),i=new t.Icon({iconUrl:"@/assets/images/map/b4.png"}),s=new t.Marker(a,i);this.map.addOverLay(s),this.map.enableScrollWheelZoom()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a(t.report,{tag:"component",attrs:{firstDowntime2:t.firstDowntime2,firstDowntime:t.firstDowntime,partcurrent:t.partcurrent,downspeed:t.downspeed,upspeed:t.upspeed,ashReport:t.ashReport,selectItem:t.selectItem,checkedData:t.checkedData,depthReport:t.depthReport,pulpReport:t.pulpReport}}),a("a",{attrs:{id:"simulation",href:""}}),a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.moreConditions()}}},[t._v("更多条件")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.pileDescribe,callback:function(e){t.pileDescribe=e},expression:"pileDescribe"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticClass:"jbThead",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id",align:"center","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.columnWidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"160px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"更多条件",width:"40%",visible:t.dialogFormVisibleMore},on:{"update:visible":function(e){t.dialogFormVisibleMore=e}}},[a("div",[a("el-form",{staticClass:"more-filterbox"},[a("div",{staticClass:"moreConditions"},[a("div",{staticClass:"items"},[t._v(t._s("     ")+"施工桩长(m)")]),a("el-input",{staticClass:"input",model:{value:t.pileDepth,callback:function(e){t.pileDepth=e},expression:"pileDepth"}}),a("div",{staticClass:"item"},[t._v("至")]),a("el-input",{staticClass:"input",model:{value:t.pileDepth2,callback:function(e){t.pileDepth2=e},expression:"pileDepth2"}})],1),a("div",{staticClass:"moreConditions"},[a("div",{staticClass:"items"},[t._v("平均灰量(kg/m)")]),a("el-input",{staticClass:"input",model:{value:t.pileAsh,callback:function(e){t.pileAsh=e},expression:"pileAsh"}}),a("div",{staticClass:"item"},[t._v("至")]),a("el-input",{staticClass:"input",model:{value:t.pileAsh2,callback:function(e){t.pileAsh2=e},expression:"pileAsh2"}})],1),a("div",{staticClass:"moreConditions"},[a("div",{staticClass:"items"},[t._v(t._s("    ")+"累计灰量(kg)")]),a("el-input",{staticClass:"input",model:{value:t.cumulativePileAsh,callback:function(e){t.cumulativePileAsh=e},expression:"cumulativePileAsh"}}),a("div",{staticClass:"item"},[t._v("至")]),a("el-input",{staticClass:"input",model:{value:t.cumulativePileAsh2,callback:function(e){t.cumulativePileAsh2=e},expression:"cumulativePileAsh2"}})],1),a("div",{staticClass:"moreConditions"},[a("div",{staticClass:"items"},[t._v(t._s("     ")+"成桩时长(s)")]),a("el-input",{staticClass:"input",model:{value:t.pileTime,callback:function(e){t.pileTime=e},expression:"pileTime"}}),a("div",{staticClass:"item"},[t._v("至")]),a("el-input",{staticClass:"input",model:{value:t.pileTime2,callback:function(e){t.pileTime2=e},expression:"pileTime2"}})],1)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisibleMore=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.moreDetermine()}}},[t._v("确 定")])],1)])],1),a("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[t.show?a("div",{staticClass:"export_echart",on:{click:t.download}},[t._v("图片下载")]):t._e(),a("el-dropdown",{attrs:{placement:"top-start"},on:{command:t.downLoad}},[a("span",{staticClass:"more"},[t._v("报表下载 ")]),a("el-dropdown-menu",{staticClass:"g-dropdown"},[a("el-dropdown-item",{attrs:{command:0}},[a("span",{staticClass:"icon icon01"}),a("span",{staticClass:"name"},[t._v("打印版")])]),a("el-dropdown-item",{attrs:{command:1}},[a("span",{staticClass:"icon icon02"}),a("span",{staticClass:"name"},[t._v("综合版")])]),a("el-dropdown-item",{attrs:{command:2}},[a("span",{staticClass:"icon icon03"}),a("span",{staticClass:"name"},[t._v("详细版")])])],1)],1)],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value valuepile",attrs:{title:this.selectItem.pileDescribe}},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+"(m)")])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("初搅深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.frDepth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("复搅深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.reDepth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("空搅深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.emDepth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("下钻速度(cm/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("提钻速度(cm/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed,1)))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("水灰比(:1)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.waterCementRatio)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均浆量(L/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePulp)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均灰量(kg/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averageAsh)))])])])]),a("li",{staticClass:"s4"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间(min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩端电流(A)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrent,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度(%)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.xAngle,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大电流(A)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxCurrent,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("喷浆压力(MPa)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePressure)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{property:"partId",label:"序号","min-width":"4.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度(m)","min-width":"8.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp",label:"段浆量(L)","min-width":"8.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAsh",label:"段灰量(kg)","min-width":"8.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAsh))+" ")]}}])}),a("el-table-column",{attrs:{property:"partCurrent",label:"段电流(A)","min-width":"8.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partCurrent,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDensity",label:"段密度(g/cm³)","min-width":"10.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDensity,3))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"速度(cm/min)","min-width":"9.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPressure",label:"段喷压(MPa)","min-width":"9.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPressure,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长(s)","min-width":"8.83%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"4.66%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num5filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart",attrs:{id:"echarts"}},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1)],1),a("div",{staticClass:"echatrs",attrs:{id:"echartss"}},[a("div",{ref:"myChart06",style:{width:"100%",height:"33.33%"}}),a("div",{ref:"myChart07",style:{width:"100%",height:"33.33%"}}),a("div",{ref:"myChart08",style:{width:"100%",height:"33.33%"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tab2,expression:"tab2===2"}],staticClass:"m-tab-table"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner inner1 backEchart"},[a("div",{staticClass:"m-statusinfo"},[a("div",{staticClass:"top"},[a("h3",[t._v(t._s(t.selectItem.deviceTypeName))]),a("div",{staticClass:"info"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(" "+t._s(t.selectItem.pileDescribe)+" ")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("设备编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])])]),a("div",{staticClass:"status"},[a("ul",{staticClass:"ul-status"},[a("li",{class:t.recordStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pileDownStatus))])]),a("li",{class:t.pipeStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),a("li",{class:t.nozzleStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pulpStatus))])])])])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"item"},[a("h3",[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("h3",[t._v("水灰比")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.waterCementRatio)))])]),a("div",{staticClass:"item"},[a("h3",[t._v("密度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.dataNum.partDensity,3))+" g/cm³")])]),a("div",{staticClass:"item"},[a("h3",[t._v("设计下钻速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.designDownSpeed,2))+" cm/min")])]),a("div",{staticClass:"item"},[a("h3",[t._v("设计提钻速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.designUpSpeed,2))+" cm/min")])])])])])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner backEchart"},[a("div",{ref:"myChart05",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"m-box m-map",staticStyle:{height:"27rem"}},[a("div",{staticClass:"con"},[a("div",{staticClass:"mapDiv",attrs:{id:"mapDiv"}})])])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{staticClass:"m-datab1",staticStyle:{height:"27rem"}},[a("div",{staticClass:"top"},[a("div",{staticClass:"left"},[a("div",{ref:"angle",staticClass:"icon"}),a("div",{staticClass:"t1"},[a("p",[t._v("X"),a("b",[t._v(t._s(t._f("numfilters")(t.selectItem.xAngle)))])]),a("p",[t._v("Y"),a("b",[t._v(t._s(t._f("numfilters")(t.selectItem.yAngle)))])])])]),a("div",{staticClass:"oh"},[a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("持续时长(min)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("minfilters")(t.LastTime)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("累计浆量(L)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.totalPartPulp)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("累计灰量(kg)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.totalPartAsh)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("段浆量(L)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.dataNum.partPulp)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("段灰量(kg)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.dataNum.partAsh)))])])])]),a("div",{staticClass:"picbox"},[a("img",{staticClass:"bg",attrs:{src:c,alt:""}}),a("div",{staticClass:"databar"},[a("div",{staticClass:"data",style:{bottom:t.ztTop}},[a("img",{class:t.image,attrs:{src:m,alt:""}}),a("img",{staticClass:"zt",attrs:{src:d,alt:""}}),a("div",{staticClass:"info"},[a("p",[a("b",[t._v(t._s(t.pileStatusStr))])]),a("p",[t._v("深度"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partDeep))+"(m)")])]),a("p",[t._v("速度"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partDownSpeed))+"(cm/min)")])]),a("p",[t._v(" 电流"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partCurrent))+"(A)")])]),a("p",[t._v(" 流量"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partPulp/t.dataNum.partTime*60))+"(L/min)")])]),a("img",{staticClass:"line",attrs:{src:h,alt:""}})])])])])])])])],1),a("div",{staticClass:"backplayBottom"},[a("el-progress",{staticClass:"progress_bar",attrs:{"show-text":!1,"stroke-width":15,percentage:t.percentage,color:t.color}}),a("i",{staticClass:"iconBack el-icon-refresh-right",on:{click:t.stop}}),a("i",{staticClass:"iconBack",class:t.icon,on:{click:t.backPlay}}),a("el-select",{staticClass:"selectspeed",attrs:{size:"small",placeholder:"正常"},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,staticClass:"selectspeedOpt",attrs:{label:t.label,value:t.value}})})),1)],1)],1)])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v(" 全选 ")])],1),a("div",{staticClass:"item"},[a("div",{staticClass:"export",attrs:{id:"simulations",href:""},on:{click:t.exportAll}},[t._v("导出 ")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, jumper, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,C,"864fe36a",null,null);function C(t){for(var e in b)this[e]=b[e]}var y=function(){return g.exports}(),x=["pileDescribe","deviceKey","beginTime","endTime","depth","pileTime","frDepth","reDepth","emDepth","pileTopCurrent","cumulativeAsh","maxCurrent","downSpeed","upSpeed","maxAngle","averageAsh","averageCurrent"],_={},w=u({components:{gTabs:s,report:o},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{checkedData:[],depthReport:[],ashReport:{},pulpReport:{},upspeed:{},downspeed:{},partcurrent:{},report:"report",totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","depth","cumulativeAsh","pileTopCurrent","maxAngle","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter},{prop:"frDepth",label:"初搅深度(m)",formatter:this.numFormatter},{prop:"reDepth",label:"复搅深度(m)",formatter:this.numFormatter},{prop:"emDepth",label:"空搅深度(m)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"桩端电流(A)",formatter:this.num11Formatter},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"maxAngle",label:"最大斜度",formatter:this.num1Formatter},{prop:"maxCurrent",label:"最大电流(A)",formatter:this.numFormatter},{prop:"downSpeed",label:"下钻速度(cm/min)",formatter:this.numFormatter},{prop:"upSpeed",label:"提钻速度(cm/min)",formatter:this.numFormatter},{prop:"averageAsh",label:"平均灰量(kg/m)",formatter:this.numFormatter},{prop:"averageCurrent",label:"平均电流(A)",formatter:this.numFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"桩端电流(A)",formatter:this.num11Formatter},{prop:"maxAngle",label:"最大斜度",formatter:this.num1Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],tempCols:[],centerDialogVisible:!1,data:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:[],totalNum:0,echart:[],echartload:[],showbtn:!1}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},minfilters:function(t){return(parseFloat(t)/60).toFixed(2)},num1filters:function(t){return parseFloat(t).toFixed(2)+"%"},num3filters:function(t){return Math.abs(parseFloat(t).toFixed(2))},num5filters:function(t){return t<0?"提钻":"下钻"}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.showbtn=!1,this.tab2=0,this.upspeed=[],this.downspeed=[],this.partcurrent=[],this.ashReport=[],this.depthReport=[],null==this.myChart01)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose(),this.myChart06.dispose(),this.myChart07.dispose(),this.myChart08.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{download:function(){var t=document.createElement("a");t.href=this.myChart06.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},tablewidth:function(t){if(1==t||2==t||3==t)return 170},exportAll:function(){this.tableToExcel("FPZstatisticsTableRecord","粉喷桩桩-导出")},downLoad:function(t){switch(t){case 0:this.tableToExcel("FPZstatisticsTablePrint","粉喷桩桩-打印版");break;case 1:this.tableToExcel("FPZstatisticsTable","粉喷桩桩-综合版");break;case 2:this.tableToExcel("FPZstatisticsTabledetailed","粉喷桩桩-详细版")}},tableToExcel:function(t,e){var a;t.nodeType||(t=document.getElementById(t)),t&&(a={worksheet:e||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href="data:application/vnd.ms-excel;base64,"+this.base64(this.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e <style type="text/css">table td {height: 25px;font-family: 宋体;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px; }</style></head><body ><table class="excelTable">{table}</table></body></html>',a)),document.getElementById("simulation").download=e+".xls",document.getElementById("simulation").click())},base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("FPZ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},num11Formatter:function(t,e,a,i){return parseFloat(a).toFixed(1)},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},num1Formatter:function(t,e,a,i){return parseFloat(a).toFixed(1)+"%"},handleCheckAllChange:function(t){this.checkedFileds=t?x:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart01:function(){var t=this.data,e={title:{text:"深度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echart.push(this.myChart01)},initEchart02:function(){var t=this.data,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]},max:30},{name:"          电流",type:"value",nameLocation:"start",max:300,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echart.push(this.myChart02)},initEchart03:function(){var t=this.data,e={title:{text:"段灰量、速度变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["段灰量","速度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"段灰量(kg)",type:"value",nameLocation:"start",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"速度(cm/min)      ",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"段灰量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partAsh.toFixed(2)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]}))}]};this.myChart03=r(this.$refs.myChart03,null,{devicePixelRatio:2.5}),this.myChart03.setOption(e),this.echart.push(this.myChart03)},initEchart04:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].partDeep-1)]&&(t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0),t[Math.ceil(this.selectItem.data[e].partDeep-1)]+=this.selectItem.data[e].partAsh;var a={title:{text:"成桩灰量分布",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"成桩灰量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart04=r(this.$refs.myChart04,null,{renderer:"svg"}),this.myChart04.setOption(a)},initEchart06:function(){var t=this.data,e={title:{text:"深度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))}]};this.myChart06=r(this.$refs.myChart06,null,{devicePixelRatio:2.5}),this.myChart06.setOption(e),this.echartload.push(this.myChart06)},initEchart07:function(){var t=this.data,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]},max:30},{name:"          电流",type:"value",nameLocation:"start",max:300,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent.toFixed(2)]}))}]};this.myChart07=r(this.$refs.myChart07,null,{devicePixelRatio:2.5}),this.myChart07.setOption(e),this.echartload.push(this.myChart07)},initEchart08:function(){var t=this.data,e={title:{text:"段灰量、速度变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["段灰量","速度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"段灰量(kg)",type:"value",nameLocation:"start",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"速度(cm/min)      ",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"段灰量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partAsh.toFixed(2)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]}))}]};this.myChart08=r(this.$refs.myChart08,null,{devicePixelRatio:2.5}),this.myChart08.setOption(e),this.echartload.push(this.myChart08)},changeHandle:function(t){var e=this,a=this;this.tab2=t,0==t&&(this.showbtn=!1),1===t&&(this.showbtn=!0,this.$nextTick((function(){e.initEchart06(),e.initEchart07(),e.initEchart08(),n(e.echartload),e.initEchart01(),e.initEchart02(),e.initEchart03(),e.initEchart04(),n(e.echart),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}})))},handleCommand:function(t){var e=this;this.selectItem=this.tableData[t],this.centerDialogVisible=!0;for(var a,i=this.selectItem.beginTime,s=[],r=[],n=new Map,o=new Map,c=0;c<this.tableData[t].data.length;c++){i+=this.tableData[t].data[c].partTime,a=l(1e3*i).format("YYYY-MM-DD HH:mm:ss"),this.data.push(a),0!=this.tableData[t].data[c].partDeep&&this.depthReport.push(Math.ceil(this.tableData[t].data[c].partDeep));for(var m=0;m<this.depthReport.length;m++)for(var d=m+1;d<this.depthReport.length;d++)this.depthReport[m]==this.depthReport[d]&&(this.depthReport.splice(d,1),d--);if(null==s[Math.ceil(this.tableData[t].data[c].partDeep-1)]&&(s[Math.ceil(this.tableData[t].data[c].partDeep-1)]=0),s[Math.ceil(this.tableData[t].data[c].partDeep-1)]+=Number(this.tableData[t].data[c].partAsh.toFixed(2)),null==r[Math.ceil(this.tableData[t].data[c].partDeep-1)]&&(r[Math.ceil(this.tableData[t].data[c].partDeep-1)]=0),r[Math.ceil(this.tableData[t].data[c].partDeep-1)]=Number(this.tableData[t].data[c].partCurrent.toFixed(2)),this.tableData[t].data[c].partDeep>0&&this.tableData[t].data[c].partDownSpeed>0)if(null==n.get(Math.ceil(this.tableData[t].data[c].partDeep))){var h=[];h.push(this.tableData[t].data[c].partDownSpeed),n.set(Math.ceil(this.tableData[t].data[c].partDeep),h)}else{var p=n.get(Math.ceil(this.tableData[t].data[c].partDeep));p.push(this.tableData[t].data[c].partDownSpeed),n.set(Math.ceil(this.tableData[t].data[c].partDeep),p)}if(this.tableData[t].data[c].partDownSpeed<0)if(null==o.get(Math.ceil(this.tableData[t].data[c].partDeep))){var u=[];u.push(this.tableData[t].data[c].partDownSpeed),o.set(Math.ceil(this.tableData[t].data[c].partDeep),u)}else{var v=o.get(Math.ceil(this.tableData[t].data[c].partDeep));v.push(this.tableData[t].data[c].partDownSpeed),o.set(Math.ceil(this.tableData[t].data[c].partDeep),v)}}for(var f=[],b=0;b<r.length;b++){var g={key:b,value:r[b]};f.push(g)}f.forEach((function(t){e.partcurrent[t.key]?e.partcurrent[t.key]+=t.value:e.partcurrent[t.key]=t.value}));var C=[];o.forEach((function(t){C.push(t)}));for(var y=[],x=0,_=0;_<C.length;_++){for(var w=0;w<C[_].length;w++)x+=C[_][w];var k=Math.abs((x/C[_].length).toFixed(2));y.push(k),x=0}y=y.reverse();for(var D=[],S=0;S<y.length;S++){var I={key:S,value:y[S]};D.push(I)}D.forEach((function(t){e.upspeed[t.key]?e.upspeed[t.key]+=t.value:e.upspeed[t.key]=t.value}));var T=[];n.forEach((function(t){T.push(t)}));for(var F=[],A=0,L=0;L<T.length;L++){for(var P=0;P<T[L].length;P++)A+=T[L][P];var z=(A/T[L].length).toFixed(2);F.push(z),A=0}for(var M=[],E=0;E<F.length;E++){var N={key:E,value:F[E]};M.push(N)}M.forEach((function(t){e.downspeed[t.key]?e.downspeed[t.key]+=t.value:e.downspeed[t.key]=t.value}));for(var Y=[],H=0;H<s.length;H++){var R={key:H,value:s[H]};Y.push(R)}Y.forEach((function(t){e.ashReport[t.key]?e.ashReport[t.key]+=t.value:e.ashReport[t.key]=t.value})),this.depthReport.unshift(0),this.depthReport.splice(this.depthReport.length-1,1)},selectionChange:function(t){this.checkedData=t.reverse(),this.checkedData.ENDTime=l(1e3*this.checkedData[this.checkedData.length-1].endTime).format("YYYY-MM-DD HH:mm:ss"),this.checkedData.startTime=l(1e3*this.checkedData[0].beginTime).format("YYYY-MM-DD HH:mm:ss");for(var e=[],a=[],i=[],s=0,r=0;r<t.length;r++)e.push(t[r].data);for(var n=[],o=[],c=0;c<e.length;c++){for(var m=0;m<e[c].length;m++)e[c][m].partDownSpeed>s&&n.push([e[c][m].partDeep,e[c][m].partTime,e[c][m].partDownSpeed]),e[c][m].partDownSpeed<s&&o.push([e[c][m].partDeep,e[c][m].partTime,e[c][m].partDownSpeed]);a.push(n),i.push(o),n=[],o=[],s=0}for(var d=0,h=0,p=0;p<a.length;p++){for(var u=0;u<a[p].length;u++)d+=a[p][u][1],h+=a[p][u][1]*a[p][u][2];h/d=="Infinity"||0==a[p].length?this.checkedData[p].speed1=0:this.checkedData[p].speed1=Math.abs((h/d).toFixed(2)),d=0,h=0}for(var v=0,f=0,b=0;b<i.length;b++){for(var g=0;g<i[b].length;g++)v+=i[b][g][1],f+=i[b][g][1]*i[b][g][2];f/v=="Infinity"||0==i[b].length?this.checkedData[b].speed2=0:this.checkedData[b].speed2=Math.abs((f/v).toFixed(2)),v=0,f=0}t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a(t.report,{tag:"component",attrs:{selectItem:t.selectItem,depthReport:t.depthReport,pulpReport:t.pulpReport,partcurrent:t.partcurrent,downspeed:t.downspeed,upspeed:t.upspeed,ashReport:t.ashReport,checkedData:t.checkedData}}),a("a",{attrs:{id:"simulation",href:""}}),a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.tablewidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"148px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[t.showbtn?a("el-button",{staticClass:"rightBtn",staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:t.download}},[t._v("图片下载")]):t._e(),a("el-dropdown",{attrs:{placement:"top-start"},on:{command:t.downLoad}},[a("span",{staticClass:"more"},[t._v("报表下载 ")]),a("el-dropdown-menu",{staticClass:"g-dropdown"},[a("el-dropdown-item",{attrs:{command:0}},[a("span",{staticClass:"icon icon01"}),a("span",{staticClass:"name"},[t._v("打印版")])]),a("el-dropdown-item",{attrs:{command:1}},[a("span",{staticClass:"icon icon02"}),a("span",{staticClass:"name"},[t._v("综合版")])]),a("el-dropdown-item",{attrs:{command:2}},[a("span",{staticClass:"icon icon03"}),a("span",{staticClass:"name"},[t._v("详细版")])])],1)],1)],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+t._s(" ")+"m")])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("初搅深度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.frDepth))+t._s(" ")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("复搅深度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.reDepth))+t._s(" ")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("空搅深度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.emDepth))+t._s(" ")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("下钻速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed))+t._s(" ")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("提钻速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed))+t._s(" ")+"cm/min")])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh))+t._s(" ")+"kg")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均灰量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averageAsh))+t._s(" ")+"kg/m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime))+t._s(" ")+"min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxCurrent,1))+t._s(" ")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.maxAngle))+t._s(" ")+"%")])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{property:"partId",label:"序号","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度(m)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAsh",label:"段灰量(kg)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAsh))+" ")]}}])}),a("el-table-column",{attrs:{property:"partCurrent",label:"段电流(A)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partCurrent,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"速度(cm/min)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长(s)","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num5filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1)],1),a("div",{staticClass:"echartdownLoad"},[a("div",{ref:"myChart06",style:{width:"100%",height:"33.3%"}}),a("div",{ref:"myChart07",style:{width:"100%",height:"33.3%"}}),a("div",{ref:"myChart08",style:{width:"100%",height:"33.3%"}})])])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("div",{staticClass:"export",on:{click:t.exportAll}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,k,"2aa5e0fe",null,null);function k(t){for(var e in _)this[e]=_[e]}var D=function(){return w.exports}(),S=["pileDescribe","deviceKey","beginTime","endTime","depth","maxPressure","waterCementRatio","cumulativePulp","averagePulp","cumulativeAsh","averageAsh","cumulativeReturnPulp","averageReturnPulp","cumulativeWater","averageWater","cumulativeAir","averageAir","maxDownSpeed","downSpeed","maxUpSpeed","upSpeed","maxDownRotateSpeed","downRotateSpeed","maxUpRotateSpeed","upRotateSpeed","maxAngle","emptyDepth","pileTime"],I={},T=u({components:{gTabs:s,report:o},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toFirstPage","toLastPage","pileDescribe"],data:function(){return{depthReport:[],pulpReport:{},ashReport:{},upspeed:{},downspeed:{},partcurrent:{},report:"report",startDate:"",endDate:"",number:"",deviceKey:"",params:"",paramsList:[{label:"参数1",value:"参数1"},{label:"参数2",value:"参数2"}],totalChecked:!1,checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","depth","maxPressure","cumulativePulp","cumulativeAsh","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"有效桩长(m)",formatter:this.numFormatter},{prop:"maxPressure",label:"喷射压力(mpa)",formatter:this.numFormatter},{prop:"waterCementRatio",label:"水灰比",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)",formatter:this.numFormatter},{prop:"averagePulp",label:"平均浆量(L/m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"averageAsh",label:"平均灰量(kg/m)",formatter:this.numFormatter},{prop:"cumulativeReturnPulp",label:"累计返浆量(L)",formatter:this.numFormatter},{prop:"averageReturnPulp",label:"平均返浆量(L)",formatter:this.numFormatter},{prop:"cumulativeWater",label:"累计水量(L)",formatter:this.numFormatter},{prop:"averageWater",label:"平均水量(L)",formatter:this.numFormatter},{prop:"cumulativeAir",label:"累计气量(m³)",formatter:this.numFormatter},{prop:"averageAir",label:"平均气量(m³)",formatter:this.numFormatter},{prop:"maxDownSpeed",label:"最大钻速(cm/min)",formatter:this.numFormatter},{prop:"downSpeed",label:"平均下钻速度(cm/min)",formatter:this.numFormatter},{prop:"maxUpSpeed",label:"最大提速(cm/min)",formatter:this.numFormatter},{prop:"upSpeed",label:"平均提钻速度(cm/min)",formatter:this.numFormatter},{prop:"maxDownRotateSpeed",label:"最大下转速度(r/min)\t",formatter:this.numFormatter},{prop:"downRotateSpeed",label:"平均下转速度(r/min)\t",formatter:this.numFormatter},{prop:"maxUpRotateSpeed",label:"最大提转速度(r/min)",formatter:this.numFormatter},{prop:"upRotateSpeed",label:"平均提转速度(r/min)",formatter:this.numFormatter},{prop:"maxAngle",label:"最大斜度",formatter:this.num1Formatter},{prop:"emptyDepth",label:"空桩桩长(m)",formatter:this.numFormatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter},{prop:"pileTime",label:"喷浆时间(min)",formatter:this.minPulpFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"有效桩长(m)",formatter:this.numFormatter},{prop:"maxPressure",label:"喷射压力(mpa)",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)"},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter},{prop:"pileTime",label:"喷浆时间(min)",formatter:this.minPulpFormatter}],tempCols:[],centerDialogVisible:!1,echartsdata:[],print:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"},{name:"历史回放"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:"",totalNum:"",echartConnect:[],echartConnect2:[],showEchart:!1,options:[{value:"ordinary",label:"正常"},{value:"fast",label:"快速"},{value:"topspeed",label:"极速"}],value:"ordinary",color:"#000",percentage:0,ztTop:100,image:"stop",pileStatusStr:"停钻",pileDownStatus:"结束",pulpStatus:"止喷",recordStatusClass:"",pipeStatusClass:"",nozzleStatusClass:"",partData:[],s1:0,s2:0,y:0,playbackTimeDepth:[],playbackTimeFlow:[],dataNum:[],PlaybackTime:"",playerInter:null,playerInter2:null,LastTime:0,totalPartPulp:0,totalPartAsh:0,pileDeep:0,totalPartTime:0,icon:"el-icon-video-pause",totalWater:0,map:null}},filters:{recordFilter:function(t){switch(t){case 1:return"深度模式";case 2:return"时间模式";case 0:return"-";default:return t}},intervalFilter:function(t){switch(t.recordMode){case 1:return t.recodeInterval+"cm";case 2:return t.recodeInterval+"s";case 0:return"-";default:return t}},datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return parseFloat(t).toFixed(2)},minfilters:function(t){return(parseFloat(t)/60).toFixed(0)},num1filters:function(t){return parseFloat(t).toFixed(1)+"%"},num4filters:function(t){return Math.abs(parseFloat(t).toFixed(2))},num5filters:function(t){return 0==t&&(t="停钻"),t<0&&(t="提钻"),t>0&&(t="下钻"),t}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.showEchart=!1,this.tab2=0,this.clearBackData(),this.upspeed=[],this.downspeed=[],this.ashReport=[],this.depthReport=[],this.partcurrent=[],null==this.myChart01)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart04.dispose(),this.myChart06.dispose(),this.myChart07.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{download:function(){var t=document.createElement("a");t.href=this.myChart06.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},clearBackData:function(){this.totalWater=0,this.value="ordinary",this.percentage=0,this.ztTop=100,this.image="stop",this.pileStatusStr="停钻",this.pileDownStatus="结束",this.pulpStatus="止喷",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.partData=[],this.s1=0,this.s2=0,this.y=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.dataNum=[],this.PlaybackTime="",this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,this.pileDeep=0,this.totalPartTime=0,clearInterval(this.playerInter),clearInterval(this.playerInter2),void 0===this.myChart05||this.myChart05._disposed||this.myChart05.dispose()},columnWidth:function(t){return 0==t||4==t||5==t||6==t||7==t?140:1==t||2==t||3==t?150:void 0},downLoad:function(t){switch(t){case 0:this.tableToExcel("gyxpzStatisticsTablePrint",l(1e3*this.selectItem.beginTime).format("YYYY-MM-DD")+"-高压旋喷桩-打印版");break;case 1:this.tableToExcel("gyxpzStatisticsTable",l(1e3*this.selectItem.beginTime).format("YYYY-MM-DD")+"-高压旋喷桩-综合版");break;case 2:this.tableToExcel("gyxpzStatisticsTabledetailed",l(1e3*this.selectItem.beginTime).format("YYYY-MM-DD")+"-高压旋喷桩-详细版")}},tableToExcel:function(t,e){var a;t.nodeType||(t=document.getElementById(t)),t&&(a={worksheet:e||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href="data:application/vnd.ms-excel;base64,"+this.base64(this.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e <style type="text/css">table td {height: 25px;font-family: 宋体;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px; }</style></head><body ><table class="excelTable">{table}</table></body></html>',a)),document.getElementById("simulation").download=e+".xls",document.getElementById("simulation").click())},base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("GYXPZ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},minPulpFormatter:function(t,e,a,i){return(parseFloat(a)/70).toFixed(0)},num1Formatter:function(t,e,a,i){return parseFloat(a).toFixed(2)+"%"},handleCheckAllChange:function(t){this.checkedFileds=t?S:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart01:function(){var t=this.echartsdata,e={title:{text:"成桩过程曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","流量"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"          电流",inverse:!1,nameLocation:"start",type:"value",max:100,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))},{name:"流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],Number((e.partPulp/e.partTime*60).toFixed(2))]}))}]};this.myChart01=r(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(e),this.echartConnect.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"压力、流量变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["压力","流量"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"压力    ",inverse:!1,nameLocation:"start",type:"value",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"      流量",nameLocation:"start",inverse:!1,type:"value",max:50,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp/e.partTime*60).toFixed(2)]}))},{name:"压力",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{renderer:"svg"}),this.myChart02.setOption(e),this.echartConnect.push(this.myChart02)},initEchart04:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].partDeep)]&&(t[Math.ceil(this.selectItem.data[e].partDeep)]=0),t[Math.ceil(this.selectItem.data[e].partDeep)]+=this.selectItem.data[e].partAsh;null==t[0]&&(t=t.slice(1));var a={title:{text:"成桩灰量分布",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"成桩灰量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart04=r(this.$refs.myChart04,null,{renderer:"svg"}),this.myChart04.setOption(a)},initEchart05:function(){var t={title:{text:"深度、流量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","流量"]},grid:{top:"15%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度(m)  ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 流量(L/min)",nameLocation:"start",type:"value",splitLine:{show:!1},nameTextStyle:{padding:[10,20,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.playbackTimeDepth},{name:"流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.playbackTimeFlow}]};this.myChart05.setOption(t)},initEchart06:function(){var t=this.echartsdata,e={title:{text:"成桩过程曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","流量"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"          电流",inverse:!1,nameLocation:"start",type:"value",max:100,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep]}))},{name:"流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],Number((e.partPulp/e.partTime*60).toFixed(2))]}))}]};this.myChart06=r(this.$refs.myChart06,null,{devicePixelRatio:2.5}),this.myChart06.setOption(e),this.echartConnect2.push(this.myChart06)},initEchart07:function(){var t=this.echartsdata,e={title:{text:"压力、流量变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["压力","流量"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"压力    ",inverse:!1,nameLocation:"start",type:"value",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"      流量",nameLocation:"start",inverse:!1,type:"value",max:50,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp/e.partTime*60).toFixed(2)]}))},{name:"压力",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure.toFixed(2)]}))}]};this.myChart07=r(this.$refs.myChart07,null,{devicePixelRatio:2.5}),this.myChart07.setOption(e),this.echartConnect2.push(this.myChart07)},setAngle:function(t,e){var a={tooltip:{show:!1,trigger:"axis",formatter:"x: "+t+"<br />y :"+e},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-20",max:"20",axisLabel:{show:!1}},yAxis:{type:"value",min:"-20",max:"20",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[t,e]],type:"scatter"}]};null==this.angle&&(this.angle=r(this.$refs.angle)),this.angle.setOption(a)},changeHandle:function(t){var e=this,a=this;if(this.tab2=t,0===t&&(this.showEchart=!1,this.clearBackData()),1===t&&(this.showEchart=!0,this.$nextTick((function(){e.initEchart06(),e.initEchart07(),n(e.echartConnect2),e.initEchart01(),e.initEchart02(),e.initEchart04(),n(e.echartConnect),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart04.resize()}})),this.clearBackData()),2===t){this.showEchart=!1,this.$nextTick((function(){e.myChart05=r(e.$refs.myChart05,null,{renderer:"svg"}),e.initEchart05(),window.onresize=function(){a.myChart05.resize(),a.map.checkResize()}})),this.partData=this.selectItem.data,this.center=[this.selectItem.longitude,this.selectItem.latitude];for(var i=0;i<this.partData.length;i++)this.totalPartTime+=this.partData[i].partTime;this.PlaybackTime=this.selectItem.beginTime,this.playbackTimeDepth.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),0]),this.playbackTimeFlow.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),0]),this.playerInter=setInterval((function(){e.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){e.backTimeInterval2()}),3e3)}},backTimeInterval1:function(){this.percentage=Number((this.LastTime/this.totalPartTime*100).toFixed(1)),this.pileDownStatus="开始",this.recordStatusClass="on",this.myFun(this.partData[this.s1++].partDeep),this.s1==this.partData.length&&(this.percentage=100,this.pileDownStatus="结束",this.icon="el-icon-video-play",this.recordStatusClass="",clearInterval(this.playerInter))},backTimeInterval2:function(){this.dataNum=this.partData[this.s2++],this.setAngle(this.dataNum.xAngle,this.dataNum.yAngle),this.PlaybackTime+=this.dataNum.partTime,this.playbackTimeDepth.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),this.dataNum.partDeep]),this.playbackTimeFlow.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),(this.dataNum.partPulp/this.dataNum.partTime*60).toFixed(2)]),this.LastTime+=this.dataNum.partTime,this.totalPartPulp+=this.dataNum.partPulp,this.totalPartAsh+=this.dataNum.partAsh,this.totalWater+=this.dataNum.partWater,this.pileDeep<this.dataNum.partDeep?(this.pileStatusStr="下钻",this.image="down",this.pulpStatus="喷浆"):(this.pileStatusStr="提钻",this.image="up",this.pulpStatus="止喷"),this.pileDeep=this.dataNum.partDeep,this.pipeStatusClass="on",this.nozzleStatusClass="on",this.initEchart05(),this.s2==this.partData.length&&(this.pipeStatusClass="",this.nozzleStatusClass="",this.pileStatusStr="停钻",this.image="stop",this.pulpStatus="止喷",clearInterval(this.playerInter2))},changeSpeeed:function(){var t=this;"结束"!=this.pileDownStatus&&("fast"==this.value?(clearInterval(this.playerInter),clearInterval(this.playerInter2),this.playerInter=setInterval((function(){t.backTimeInterval1()}),2e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),2e3)):"topspeed"==this.value?(clearInterval(this.playerInter),clearInterval(this.playerInter2),this.playerInter=setInterval((function(){t.backTimeInterval1()}),1e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),1e3)):"ordinary"==this.value&&(clearInterval(this.playerInter),clearInterval(this.playerInter2),this.playerInter=setInterval((function(){t.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),3e3)))},backPlay:function(){var t=this;if("el-icon-video-pause"==this.icon)clearInterval(this.playerInter),clearInterval(this.playerInter2),this.icon="el-icon-video-play";else if("el-icon-video-play"==this.icon){if("结束"==this.pileDownStatus)this.value="ordinary",this.percentage=0,this.ztTop=100,this.image="stop",this.pileStatusStr="停钻",this.pileDownStatus="结束",this.pulpStatus="止喷",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.s1=0,this.s2=0,this.y=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.dataNum=[],this.PlaybackTime="",this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,clearInterval(this.playerInter),clearInterval(this.playerInter2),this.PlaybackTime=this.selectItem.beginTime,this.playerInter=setInterval((function(){t.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),3e3);else{var e=3e3;"ordinary"==this.value?e=3e3:"fast"==this.value?e=2e3:"topspeed"==this.value&&(e=1e3),this.playerInter=setInterval((function(){t.backTimeInterval1()}),e),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),e)}this.icon="el-icon-video-pause"}},stop:function(){var t=this;this.value="ordinary",this.percentage=0,this.ztTop=100,this.s1=0,this.s2=0,this.y=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.dataNum=[],this.PlaybackTime="",this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,clearInterval(this.playerInter),clearInterval(this.playerInter2),this.PlaybackTime=this.selectItem.beginTime,this.playerInter=setInterval((function(){t.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),3e3)},handleCommand:function(t){var e=this;this.selectItem=this.tableData[t],this.print=this.tableData[t].print,this.centerDialogVisible=!0;for(var a,i=this.selectItem.beginTime,s=[],r=[],n=[],o=[],c=[],m=[],d=new Map,h=new Map,p=0;p<this.tableData[t].data.length;p++){i+=this.tableData[t].data[p].partTime,a=l(1e3*i).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(a),0!=this.tableData[t].data[p].partDeep&&this.depthReport.push(Math.ceil(this.tableData[t].data[p].partDeep));for(var u=0;u<this.depthReport.length;u++)for(var v=u+1;v<this.depthReport.length;v++)this.depthReport[u]==this.depthReport[v]&&(this.depthReport.splice(v,1),v--);if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)+.25){var f={key:Math.floor(this.tableData[t].data[p].partDeep)+.25,value:Number(this.tableData[t].data[p].partPulp.toFixed(2))};s.push(f);var b={};s.forEach((function(t){b[t.key]?b[t.key]+=t.value:b[t.key]=t.value}))}if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)+.5){var g={key:Math.floor(this.tableData[t].data[p].partDeep)+.5,value:Number(this.tableData[t].data[p].partPulp.toFixed(2))};r.push(g);var C={};r.forEach((function(t){C[t.key]?C[t.key]+=t.value:C[t.key]=t.value}))}if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)+.75){var y={key:Math.floor(this.tableData[t].data[p].partDeep)+.75,value:Number(this.tableData[t].data[p].partPulp.toFixed(2))};n.push(y);var x={};n.forEach((function(t){x[t.key]?x[t.key]+=t.value:x[t.key]=t.value}))}if(this.tableData[t].data[p].partDeep==Math.floor(this.tableData[t].data[p].partDeep)){var _={key:Math.floor(this.tableData[t].data[p].partDeep),value:Number(this.tableData[t].data[p].partPulp.toFixed(2))};o.push(_);var w={};o.forEach((function(t){w[t.key]?w[t.key]+=t.value:w[t.key]=t.value}))}if(null==c[Math.ceil(this.tableData[t].data[p].partDeep-1)]&&(c[Math.ceil(this.tableData[t].data[p].partDeep-1)]=0),c[Math.ceil(this.tableData[t].data[p].partDeep-1)]+=Number(this.tableData[t].data[p].partAsh.toFixed(2)),null==m[Math.ceil(this.tableData[t].data[p].partDeep-1)]&&(m[Math.ceil(this.tableData[t].data[p].partDeep-1)]=0),m[Math.ceil(this.tableData[t].data[p].partDeep-1)]=Number(this.tableData[t].data[p].partAirPressure.toFixed(2)),this.tableData[t].data[p].partDeep>0&&this.tableData[t].data[p].partDownSpeed>0)if(null==d.get(Math.ceil(this.tableData[t].data[p].partDeep))){var k=[];k.push(this.tableData[t].data[p].partDownSpeed),d.set(Math.ceil(this.tableData[t].data[p].partDeep),k)}else{var D=d.get(Math.ceil(this.tableData[t].data[p].partDeep));D.push(this.tableData[t].data[p].partDownSpeed),d.set(Math.ceil(this.tableData[t].data[p].partDeep),D)}if(this.tableData[t].data[p].partDownSpeed<0)if(null==h.get(Math.ceil(this.tableData[t].data[p].partDeep))){var S=[];S.push(this.tableData[t].data[p].partDownSpeed),h.set(Math.ceil(this.tableData[t].data[p].partDeep),S)}else{var I=h.get(Math.ceil(this.tableData[t].data[p].partDeep));I.push(this.tableData[t].data[p].partDownSpeed),h.set(Math.ceil(this.tableData[t].data[p].partDeep),I)}}for(var T=[],F=0;F<m.length;F++){var A={key:F,value:m[F]};T.push(A)}T.forEach((function(t){e.partcurrent[t.key]?e.partcurrent[t.key]+=t.value:e.partcurrent[t.key]=t.value}));var L=[];h.forEach((function(t){L.push(t)}));for(var P=[],z=0,M=0;M<L.length;M++){for(var E=0;E<L[M].length;E++)z+=L[M][E];var N=Math.abs((z/L[M].length).toFixed(2));P.push(N),z=0}P=P.reverse();for(var Y=[],H=0;H<P.length;H++){var R={key:H,value:P[H]};Y.push(R)}Y.forEach((function(t){e.upspeed[t.key]?e.upspeed[t.key]+=t.value:e.upspeed[t.key]=t.value}));var $=[];d.forEach((function(t){$.push(t)}));for(var K=[],V=0,W=0;W<$.length;W++){for(var B=0;B<$[W].length;B++)V+=$[W][B];var j=(V/$[W].length).toFixed(2);K.push(j),V=0}for(var O=[],U=0;U<K.length;U++){var Z={key:U,value:K[U]};O.push(Z)}O.forEach((function(t){e.downspeed[t.key]?e.downspeed[t.key]+=t.value:e.downspeed[t.key]=t.value}));for(var G=[],q=0;q<c.length;q++){var J={key:q,value:c[q]};G.push(J)}G.forEach((function(t){e.ashReport[t.key]?e.ashReport[t.key]+=t.value:e.ashReport[t.key]=t.value})),this.depthReport.unshift(0),this.depthReport.splice(this.depthReport.length-1,1),this.pulpReport=null==b?[]:Object.assign(b,C,x,w);for(var Q=this.selectItem.beginTime,X=[],tt=0;tt<this.selectItem.data.length;tt++)this.selectItem.data[tt].startDay=l(1e3*Q).format("YYYY-MM-DD HH:mm:ss"),(Q+=this.selectItem.data[tt].partTime)==this.selectItem.data[tt]&&(this.selectItem.data[tt].serial=X.push(tt))},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/this.selectItem.depth.toFixed(2)*100+"%"},loadmap:function(){var t=window.T;this.map=new t.Map("mapDiv"),this.map.centerAndZoom(new t.LngLat(this.selectItem.longitude,this.selectItem.latitude),10);var e=new t.Control.MapType([{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:window.TMAP_NORMAL_MAP},{title:"卫星",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:window.TMAP_SATELLITE_MAP}]);this.map.addControl(e);var a=new t.LngLat(this.selectItem.longitude,this.selectItem.latitude),i=new t.Icon({iconUrl:v}),s=new t.Marker(a,i);this.map.addOverLay(s),this.map.enableScrollWheelZoom()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("a",{attrs:{id:"simulation",href:""}}),a("el-header",{staticClass:"m-filter"},[a("el-container",{staticClass:"row-con"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])])],1),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.columnWidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"163px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showEchart,expression:"showEchart"}],staticClass:"export_echart",on:{click:t.download}},[t._v("图片下载")]),a("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.downLoad}},[a("span",{staticClass:"more"},[t._v("报表下载 ")]),a("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:0}},[a("span",{staticClass:"icon icon01"}),a("span",{staticClass:"name"},[t._v("打印版")])]),a("el-dropdown-item",{attrs:{command:1}},[a("span",{staticClass:"icon icon02"}),a("span",{staticClass:"name"},[t._v("综合版")])]),a("el-dropdown-item",{attrs:{command:2}},[a("span",{staticClass:"icon icon03"}),a("span",{staticClass:"name"},[t._v("详细版")])])],1)],1)],1)]),a(t.report,{tag:"compoent",attrs:{selectItem:t.selectItem,partcurrent:t.partcurrent,downspeed:t.downspeed,upspeed:t.upspeed,ashReport:t.ashReport,depthReport:t.depthReport,pulpReport:t.pulpReport}}),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime))+"(min)")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("有效桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+"(m)")])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.cumulativeAsh))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均灰量(kg/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averageAsh)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均浆量(L/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePulp)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.cumulativePulp))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.depth))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("空桩桩长(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.emptyDepth)))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("水灰比")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.waterCementRatio)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.maxAngle)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计气量(m³)")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.cumulativeAir))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计水量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.cumulativeWater))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均提钻速度(cm/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均提钻转速(r/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upRotateSpeed)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em","show-overflow-tooltip":""}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"5%",align:"center",width:"71px"}}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度\nm","min-width":"6.95%",align:"center"}}),a("el-table-column",{attrs:{property:"partPulp",label:"段浆量\nL","min-width":"6.95%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulpPressure",label:"段浆压\nMPa","min-width":"6.9%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulpPressure))+" ")]}}])}),a("el-table-column",{attrs:{property:"partWater",label:"段水量\nL","min-width":"6.8%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partWater))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAir",label:"段气量\nL","min-width":"6.8%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAir))+" ")]}}])}),a("el-table-column",{attrs:{property:"partReturnPulp",label:"段扭力\nMPa","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partReturnPulp))+" ")]}}])}),a("el-table-column",{attrs:{property:"partReturnPulpPressure",label:"段地压\nMPa","min-width":"7.5%",align:"center"}}),a("el-table-column",{attrs:{property:"partWaterPressure",label:"段水压\nMPa","min-width":"6.9%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partWaterPressure))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAirPressure",label:"段气压\nMPa","min-width":"6.9%",align:"center"}}),a("el-table-column",{attrs:{property:"partDensity",label:"段密度\ng/cm³","min-width":"7%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"速度\ncm/min","min-width":"7.6%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num4filters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"partRotateSpeed",label:"转速\nr/min","min-width":"7%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num4filters")(e.row.partRotateSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长\ns","min-width":"7%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num5filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col col_3",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1)],1),a("div",{staticClass:"outEcharts"},[a("div",{ref:"myChart06",style:{width:"100%",height:"300px"}}),a("div",{ref:"myChart07",style:{width:"100%",height:"300px"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tab2,expression:"tab2===2"}]},[a("el-row",{staticClass:"play_back"},[a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"inner inner1 backEchart"},[a("div",{staticClass:"m-statusinfo"},[a("div",{staticClass:"top"},[a("h3",[t._v(t._s(t.selectItem.deviceTypeName))]),a("div",{staticClass:"info"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(" "+t._s(t.selectItem.pileDescribe)+" ")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("设备编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])])]),a("div",{staticClass:"status"},[a("ul",{staticClass:"ul-status"},[a("li",{class:t.recordStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pileDownStatus))])]),a("li",{class:t.pipeStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),a("li",{class:t.nozzleStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pulpStatus))])])])])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"item"},[a("h3",[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("h3",[t._v("水灰比")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.waterCementRatio)))])]),a("div",{staticClass:"item"},[a("h3",[t._v("密度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.dataNum.partDensity,3))+" g/cm³")])]),a("div",{staticClass:"item"},[a("h3",[t._v("累计水量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.totalWater,2)))])])])])])]),a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"inner backEchart"},[a("div",{ref:"myChart05",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"play_back"},[a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"mapDiv",attrs:{id:"mapDiv"}})]),a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"m-datab1",staticStyle:{height:"27rem"}},[a("div",{staticClass:"top"},[a("div",{staticClass:"left"},[a("div",{ref:"angle",staticClass:"icon"}),a("div",{staticClass:"t1"},[a("p",[t._v("X"),a("b",[t._v(t._s(t._f("numfilters")(t.dataNum.xAngle,1)))])]),a("p",[t._v("Y"),a("b",[t._v(t._s(t._f("numfilters")(t.dataNum.yAngle,1)))])])])]),a("div",{staticClass:"oh"},[a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("持续时长(min)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("minfilters")(t.LastTime)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("累计浆量(L)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.totalPartPulp)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("累计灰量(kg)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.totalPartAsh)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("段浆量(L)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.dataNum.partPulp)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("段灰量(kg)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.dataNum.partAsh)))])])])]),a("div",{staticClass:"picbox"},[a("img",{staticClass:"bg",attrs:{src:c,alt:""}}),a("div",{staticClass:"databar"},[a("div",{staticClass:"data",style:{bottom:t.ztTop}},[a("img",{class:t.image,attrs:{src:m,alt:""}}),a("img",{staticClass:"zt",attrs:{src:d,alt:""}}),a("div",{staticClass:"info"},[a("p",[a("b",[t._v(t._s(t.pileStatusStr))])]),a("p",[t._v("深度"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partDeep))+"(m)")])]),a("p",[t._v("速度"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partDownSpeed))+"(cm/min)")])]),a("p",[t._v("流量"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partPulp/t.dataNum.partTime*60))+"(L/min)")])]),a("img",{staticClass:"line",attrs:{src:h,alt:""}})])])])])])])])],1),a("div",{staticClass:"backplayBottom"},[a("el-progress",{staticClass:"progress_bar",attrs:{"show-text":!1,"stroke-width":15,percentage:t.percentage,color:t.color}}),a("i",{staticClass:"iconBack el-icon-refresh-right",on:{click:t.stop}}),a("i",{staticClass:"iconBack",class:t.icon,on:{click:t.backPlay}}),a("el-select",{staticClass:"selectspeed",attrs:{size:"small",placeholder:"正常"},on:{change:t.changeSpeeed},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,staticClass:"selectspeedOpt",attrs:{label:t.label,value:t.value}})})),1)],1)],1)])],1),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("a",{staticClass:"export",attrs:{href:"javascript:;"}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,F,"5677d65c",null,null);function F(t){for(var e in I)this[e]=I[e]}var A=function(){return T.exports}(),L={},P=u({components:{gTabs:s},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",echartsdata:[],print:[],selectItem:[],centerDialogVisible:!1,tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:[],totalNum:0,echart:[]}},filters:{deleteworker0:function(t){return null!=t?t.replace(/\u0000/g,""):t},datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},num3filters:function(t){switch(t){case 0:return"工作中";case 1:return"暂停";case 3:return"变浆";case 4:return"信号异常";case 5:return"开启回浆";case 6:return"关闭回浆";case 7:return"间隔灌浆";case 8:return"浆压限流";case 9:return"管路故障";case 10:return"置换结束";case 11:return"冒浆";case 12:return"等浆";case 13:return"串浆";case 14:return"停电";case 15:return"其他";case 50:return"结束";default:return t}},minfilters:function(t){return(parseFloat(t)/60).toFixed(2)}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.tab2=0,null==this.myChart01)return;this.myChart01.dispose(),this.myChart02.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("GH",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},initEchart01:function(){var t=this.echartsdata,e={title:{text:"压力-时间变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["压力"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time"},yAxis:[{name:"压力          ",type:"value",inverse:!1,nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"压力",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partPressure.toFixed(2)]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echart.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"流量-时间变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["流量"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time"},yAxis:[{name:"流量          ",type:"value",inverse:!1,nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partFlow.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echart.push(this.myChart02)},changeHandle:function(t){var e=this,a=this;this.tab2=t,1===t&&this.$nextTick((function(){e.initEchart01(),e.initEchart02(),n(e.echart),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize()}}))},handleCommand:function(t){this.selectItem=this.tableData[t],this.print=this.tableData[t].print,this.centerDialogVisible=!0;for(var e,a=this.selectItem.beginTime,i=0;i<this.tableData[t].data.length;i++)a+=this.tableData[t].data[i].partTime,e=l(1e3*a).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(e);for(var s=this.selectItem.beginTime,r=0;r<this.selectItem.dataForTable.length;r++)this.selectItem.dataForTable[r].startDay=l(1e3*s).format("YYYY-MM-DD HH:mm:ss"),s+=this.selectItem.dataForTable[r].partTime},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("el-table",{ref:"table",staticClass:"jbThead",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),a("el-table-column",{attrs:{fixed:"",prop:"pileDescribe",label:"区域编号","min-width":"100px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{fixed:"left",prop:"deviceKey",label:"桩机号","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.beginTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.endTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"totalPulp",label:"总浆量(L)","min-width":"90px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.totalPulp))+" ")]}}])}),a("el-table-column",{attrs:{prop:"totalAsh",label:"总灰量(kg)","min-width":"90px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.totalAsh))+" ")]}}])}),a("el-table-column",{attrs:{prop:"maxPressure",label:"最大压力(Mpa)","min-width":"110px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"waterCementRatio",label:"水灰比","min-width":"80px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.waterCementRatio))+" ")]}}])}),a("el-table-column",{attrs:{prop:"pileTime",label:"固化时长(min)","min-width":"110px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("minfilters")(e.row.pileTime))+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("部位")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("deleteworker0")(t.print.area)))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工单位")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("deleteworker0")(t.print.worker)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("通道")]),a("div",{staticClass:"value"},[t._v(t._s(t.print.channel))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("搅拌深度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.print.beginDepth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("区域面积(m²)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.print.endDepth)))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("区域编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.print.processMethod))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("水泥比重(g/cm³)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.print.cementDensity,3)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("曲线间隔(s)")]),a("div",{staticClass:"value"},[t._v(t._s(t.print.tableInterval))])])])]),a("li",{staticClass:"s4"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.totalPulp,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.totalAsh,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("原地土比重")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.print.pipeCapacity,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("固化时长(min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.dataForTable,height:"28em"}},[a("el-table-column",{attrs:{property:"startDay",label:"时间","min-width":"8%",align:"center"}}),a("el-table-column",{attrs:{property:"partFlow",label:"流量(L/min)","min-width":"5.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partFlow))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPressure",label:"压力(MPa)","min-width":"5.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPressure))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPressurePeak",label:"峰压力(MPa)","min-width":"5.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPressurePeak))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDensity",label:"密度(g/cm³)","min-width":"5.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDensity))+" ")]}}])}),a("el-table-column",{attrs:{property:"partWaterCementRatio",label:"水灰比","min-width":"5.0%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partWaterCementRatio))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp",label:"注浆量(L)","min-width":"5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAsh",label:"注灰量(L)","min-width":"5.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAsh,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partStatus",label:"备注","min-width":"7%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partStatus))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,z,"69f6c9fc",null,null);function z(t){for(var e in L)this[e]=L[e]}var M=function(){return P.exports}(),E=["pileDescribe","deviceKey","beginTime","endTime","depth","avgCurrent","pileTopCurrent","pileTopCurrentRatio","maxAngle","pileTime","cumulativePulp","downSpeed","upSpeed","maxUpSpeed","longitude","latitude","emDepth"],N={},Y=u({components:{gTabs:s},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","depth","avgCurrent","pileTopCurrent","pileTopCurrentRatio","maxAngle","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"成桩深度(m)",formatter:this.numFormatter},{prop:"avgCurrent",label:"成孔电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"持力电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrentRatio",label:"持力层(比值)",formatter:this.numFormatter},{prop:"maxAngle",label:"垂直度(%)",formatter:this.num1Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter},{prop:"cumulativePulp",label:"注入量(m³)",formatter:this.PulpFormatter},{prop:"downSpeed",label:"钻孔速度(cm/min)",formatter:this.numFormatter},{prop:"upSpeed",label:"起拔速度(cm/min)",formatter:this.numFormatter},{prop:"maxUpSpeed",label:"最大提速(cm/min)",formatter:this.numFormatter},{prop:"longitude",label:"经度"},{prop:"latitude",label:"纬度"},{prop:"emDepth",label:"空搅深度(m)",formatter:this.numFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"成桩深度(m)",formatter:this.numFormatter},{prop:"avgCurrent",label:"成孔电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"持力电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrentRatio",label:"持力层(比值)",formatter:this.numFormatter},{prop:"maxAngle",label:"垂直度(%)",formatter:this.num1Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],tempCols:[],centerDialogVisible:!1,echartsdata:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:"",totalNum:"",selectAll:[],echart:[],echartload:[],showbtn:!1}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},timefilter:function(t){return l(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},pulpfilters:function(t){return 0==t.cumulativePulp?null==t.theoreticalCumulativePulp?"-":parseFloat(t.theoreticalCumulativePulp).toFixed(2):parseFloat(t.cumulativePulp).toFixed(2)},minfilters:function(t){return parseFloat(t/60).toFixed(0)},num3filters:function(t){return 0==t&&(t="停钻"),t<0&&(t="起拔"),t>0&&(t="钻孔"),t}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.showbtn=!1,this.tab2=0,this.selectItem=[],this.echartsdata=[],null==this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose(),this.myChart06.dispose(),this.myChart07.dispose(),this.myChart08.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{download:function(){var t=document.createElement("a");t.href=this.myChart06.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},tableWidth:function(t){if(4==t||5==t||6==t||7==t||8==t||9==t)return 120},exportexcel:function(){},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("CGSZ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.startDate="",this.endDate="",this.number=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},PulpFormatter:function(t,e,a,i){return(parseFloat(a)/1e3).toFixed(2)},num1Formatter:function(t,e,a,i){return parseFloat(a).toFixed(2)+"%"},handleCheckAllChange:function(t){this.checkedFileds=t?E:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart04:function(){var t=this.echartsdata,e={title:{text:"深度",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:30}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))}]};this.myChart04=r(this.$refs.myChart04,null,{devicePixelRatio:2.5}),this.myChart04.setOption(e),this.echart.push(this.myChart04)},initEchart01:function(){var t=this.echartsdata,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:[{name:"深度"},{name:"电流"}]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"电流          ",nameLocation:"start",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:300},{name:"深度",nameLocation:"end",inverse:!0,type:"value",max:30,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"电流",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent1.toFixed(2)]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echart.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"深度、填料曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","填料"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"填料",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"填料",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.totalWeight.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echart.push(this.myChart02)},initEchart03:function(){for(var t=[],e=1;e<=Math.ceil(this.selectItem.depth);e++)t.push(1+Math.random()/20);var a={title:{text:"成桩效果图(理论桩径："+(2*Math.sqrt(this.selectItem.totalWeight.toString()/1500*.9/3.14/this.selectItem.depth)).toFixed(2)+"m)",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}",show:!1},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!1},labelLine:{show:!1},itemStyle:{borderWidth:0,borderColor:"#5470c6",color:"#5470c6"},data:t,sort:"none",color:"#5470c6",gap:0}]};this.myChart03=r(this.$refs.myChart03,null,{renderer:"svg"}),this.myChart03.setOption(a)},initEchart06:function(){var t=this.echartsdata,e={title:{text:"深度",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:30}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))}]};this.myChart06=r(this.$refs.myChart06,null,{devicePixelRatio:2.5}),this.myChart06.setOption(e),this.echartload.push(this.myChart06)},initEchart07:function(){var t=this.echartsdata,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:[{name:"深度"},{name:"电流"}]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"电流          ",nameLocation:"start",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:300},{name:"深度",nameLocation:"end",inverse:!0,type:"value",max:30,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"电流",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent1.toFixed(2)]}))}]};this.myChart07=r(this.$refs.myChart07,null,{devicePixelRatio:2.5}),this.myChart07.setOption(e),this.echartload.push(this.myChart07)},initEchart08:function(){var t=this.echartsdata,e={title:{text:"深度、填料曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","填料"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"填料",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"填料",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.totalWeight.toFixed(2)]}))}]};this.myChart08=r(this.$refs.myChart08,null,{devicePixelRatio:2.5}),this.myChart08.setOption(e),this.echartload.push(this.myChart08)},changeHandle:function(t){var e=this,a=this;this.tab2=t,0==t&&(this.showbtn=!1),1===t&&(this.showbtn=!0,this.$nextTick((function(){e.initEchart01(),e.initEchart02(),e.initEchart03(),e.initEchart04(),n(e.echart),e.initEchart06(),e.initEchart07(),e.initEchart08(),n(e.echartload),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}})))},handleCommand:function(t){this.selectItem=this.tableData[t],this.centerDialogVisible=!0;for(var e,a=this.selectItem.beginTime,i=this.selectItem.beginTime,s=0;s<this.tableData[t].data.length;s++)a+=this.tableData[t].data[s].partTime,e=l(1e3*a).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(e),this.selectItem.data[s].startDay=i,i+=this.selectItem.data[s].partTime},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.tableWidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"153px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选 ")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label)+" ")])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[t.showbtn?a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:t.download}},[t._v("图片下载")]):t._e()],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+t._s("\t")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxAngle))+t._s("\t")+" %")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计总量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.totalWeight)))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginUpTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔时长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.upTime))+t._s("\t")+"min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime))+t._s("\t")+"min")])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("钻孔速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed))+t._s("\t")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed))+t._s("\t")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("持力电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrent,1))+t._s("\t")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成孔电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.avgCurrent,1))+t._s("\t")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("持力层(比值)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrentRatio)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{property:"startDay",label:"时间","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("timefilter")(e.row.startDay))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度(m)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"partCurrent1",label:"电流(A)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partCurrent1,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"速度(cm/min)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"angle",label:"垂直度(%)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.angle))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长(s)","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])])],1)],1),a("div",{staticClass:"echartdownLoad"},[a("div",{ref:"myChart06",style:{width:"100%",height:"33.3%"}}),a("div",{ref:"myChart07",style:{width:"100%",height:"33.3%"}}),a("div",{ref:"myChart08",style:{width:"100%",height:"33.3%"}})])])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("div",{staticClass:"export",on:{click:t.exportexcel}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,H,"82417c5e",null,null);function H(t){for(var e in N)this[e]=N[e]}var R=function(){return Y.exports}(),$=["pileDescribe","deviceKey","beginTime","endTime","depth","pileTime","waterCementRatio","cumulativePulp","averagePulp","maxAngle","cumulativeAsh","maxDownSpeed","downSpeed","upSpeed","maxUpSpeed","emDepth"],K={},V=u({components:{gTabs:s,report:o},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","toLastPage","toFirstPage","handleCurrentChange"],data:function(){return{report:"report",currentMpa:"",unit:"",flag:!1,totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",params:"",checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","depth","cumulativePulp","averagePulp","cumulativeAsh","downSpeed","upSpeed","emDepth","waterCementRatio","maxAngle","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)",formatter:this.num0Formatter},{prop:"averagePulp",label:"平均浆量(L)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(Kg)",formatter:this.num0Formatter},{prop:"downSpeed",label:"下钻速度(cm/min)",formatter:this.num2Formatter},{prop:"upSpeed",label:"提钻速度(cm/min)",formatter:this.num2Formatter},{prop:"maxDownSpeed",label:"最大钻速(cm/min)",formatter:this.num2Formatter},{prop:"maxUpSpeed",label:"最大提速(cm/min)",formatter:this.num2Formatter},{prop:"emDepth",label:"空搅(m)",formatter:this.emdepth},{prop:"waterCementRatio",label:"水灰比(:1)",formatter:this.numFormatter},{prop:"maxAngle",label:"最大斜度(%)",formatter:this.num2Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)",formatter:this.num0Formatter},{prop:"averagePulp",label:"平均浆量(L/m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(Kg)",formatter:this.num0Formatter},{prop:"downSpeed",label:"下钻速度(cm/min)",formatter:this.num2Formatter},{prop:"upSpeed",label:"提钻速度(cm/min)",formatter:this.num2Formatter},{prop:"emDepth",label:"空搅(m)",formatter:this.emdepth},{prop:"waterCementRatio",label:"水灰比(:1)",formatter:this.numFormatter},{prop:"maxAngle",label:"最大斜度(%)",formatter:this.num2Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],tempCols:[],centerDialogVisible:!1,echartsdata:[],print:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"},{name:"历史回放"}],inquire:[],totalNum:0,echartsConnect:[],echartsConnect2:[],showechart:!1,options:[{value:"ordinary",label:"正常"},{value:"fast",label:"快速"},{value:"topspeed",label:"极速"}],value:"ordinary",color:"#000",percentage:0,ztTop:100,image:"stop",pileStatusStr:"停钻",pileDownStatus:"结束",pulpStatus:"止喷",recordStatusClass:"",pipeStatusClass:"",nozzleStatusClass:"",partData:[],s1:0,s2:0,y:0,playbackTimeDepth:[],playbackTimeFlow:[],dataNum:[],PlaybackTime:"",playerInter:null,playerInter2:null,LastTime:0,totalPartPulp:0,totalPartAsh:0,pileDeep:0,totalPartTime:0,icon:"el-icon-video-pause",map:null}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},minfilters:function(t){return parseInt(t/60)},num3filters:function(t){return Math.abs(t.toFixed(1))},num4filters:function(t){return t>0?"下钻":"提钻"}},watch:{centerDialogVisible:function(t,e){if(window.onresize=null,0==t){if(this.showechart=!1,this.clearBackData(),this.tab2=0,this.selectItem=[],this.echartsdata=[],void 0===this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose(),this.myChart06.dispose(),this.myChart07.dispose(),this.myChart08.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{downloadEchart:function(){var t=document.createElement("a");t.href=this.myChart06.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},clearBackData:function(){this.value="ordinary",this.percentage=0,this.ztTop=100,this.image="stop",this.pileStatusStr="停钻",this.pileDownStatus="结束",this.pulpStatus="止喷",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.partData=[],this.s1=0,this.s2=0,this.y=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.dataNum=[],this.PlaybackTime="",this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,this.pileDeep=0,this.totalPartTime=0,clearInterval(this.playerInter),clearInterval(this.playerInter2),void 0===this.myChart05||this.myChart05._disposed||this.myChart05.dispose()},tableWidth:function(t){return 4==t||5==t||6==t||7==t?115:8==t||9==t?140:void 0},downLoad:function(t){if(0===t)this.tableToExcel("gfzStatisticsTabledetailed",l(1e3*this.selectItem.beginTime).format("YYYY-MM-DD")+"-功法桩_详细版")},tableToExcel:function(t,e){var a;t.nodeType||(t=document.getElementById(t)),t&&(a={worksheet:e||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href="data:application/vnd.ms-excel;base64,"+this.base64(this.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e <style type="text/css">table td {height: 25px;font-family: 宋体;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px; }</style></head><body ><table class="excelTable">{table}</table></body></html>',a)),document.getElementById("simulation").download=e+".xls",document.getElementById("simulation").click())},base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("GFZ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.startDate="",this.endDate="",this.number=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},num0Formatter:function(t,e,a,i){return parseFloat(a).toFixed(0)},num2Formatter:function(t,e,a,i){return parseFloat(a).toFixed(1)},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},emdepth:function(t,e,a,i){return null==a?"-":(parseFloat(a)/60).toFixed(2)},handleCheckAllChange:function(t){this.checkedFileds=t?$:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},initEchart01:function(){var t=this.echartsdata,e={title:{text:"深度、密度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","密度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m",inverse:!0,nameLocation:"end",type:"value",max:35,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"密度g/cm³",nameLocation:"end",inverse:!0,type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!0},max:3.5}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"密度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDensity.toFixed(2)]}))}]};this.myChart01=r(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(e),this.echartsConnect.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e=this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]})),a=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure1.toFixed(2)]})),i=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure2.toFixed(2)]})),s=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure3.toFixed(2)]})),l=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure4.toFixed(2)]})),n=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure5.toFixed(2)]})),o={title:{text:"深度、"+this.currentMpa+"曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度",this.currentMpa+"1",this.currentMpa+"2",this.currentMpa+"3",this.currentMpa+"4",this.currentMpa+"5"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m",inverse:!0,type:"value",nameLocation:"end",max:35,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:this.currentMpa+this.unit,nameLocation:"start",inverse:!1,type:"value",max:350,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!0}}],series:[{name:"深度",type:"line",showSymbol:!1,data:e},{name:this.currentMpa+"1",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:a},{name:this.currentMpa+"2",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:i},{name:this.currentMpa+"3",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:s},{name:this.currentMpa+"4",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:l},{name:this.currentMpa+"5",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:n}]};this.myChart02=r(this.$refs.myChart02,null,{renderer:"svg"}),this.myChart02.setOption(o),this.echartsConnect.push(this.myChart02)},initEchart03:function(){var t=this.echartsdata,e={title:{text:"速度、流量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["速度","流量1","流量2","流量3","流量4","流量5"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"速度cm/min",inverse:!1,nameLocation:"start",type:"value",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"流量L/min",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"速度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(1)]}))},{name:"流量1",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp1/e.partTime*60).toFixed(2)]}))},{name:"流量2",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp2/e.partTime*60).toFixed(2)]}))},{name:"流量3",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp3/e.partTime*60).toFixed(2)]}))},{name:"流量4",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp4/e.partTime*60).toFixed(2)]}))},{name:"流量5",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp5/e.partTime*60).toFixed(2)]}))}]};this.myChart03=r(this.$refs.myChart03,null,{renderer:"svg"}),this.myChart03.setOption(e),this.echartsConnect.push(this.myChart03)},initEchart04:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].partDeep-1)]&&(t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0),t[Math.ceil(this.selectItem.data[e].partDeep-1)]+=this.selectItem.data[e].partAsh;var a={title:{text:"成桩灰量分布图",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}kg"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"灰量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart04=r(this.$refs.myChart04,null,{renderer:"svg"}),this.myChart04.setOption(a)},initEchart05:function(){var t={title:{text:"深度、流量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","流量"]},grid:{top:"15%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度(m)  ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 流量(L/min)",nameLocation:"start",type:"value",splitLine:{show:!1},nameTextStyle:{padding:[10,20,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.playbackTimeDepth},{name:"流量",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.playbackTimeFlow}]};this.myChart05.setOption(t)},initechart06:function(){var t=this.echartsdata,e={title:{text:"深度、密度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","密度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m",inverse:!0,nameLocation:"end",type:"value",max:35,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"密度g/cm³",nameLocation:"end",inverse:!0,type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!0},max:3.5}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"密度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDensity.toFixed(2)]}))}]};this.myChart06=r(this.$refs.myChart06,null,{devicePixelRatio:2.5}),this.myChart06.setOption(e),this.echartsConnect2.push(this.myChart06)},initechart07:function(){var t=this.echartsdata,e=this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]})),a=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure1.toFixed(2)]})),i=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure2.toFixed(2)]})),s=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure3.toFixed(2)]})),l=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure4.toFixed(2)]})),n=this.selectItem.data.map((function(e,a){return[t[a],e.partPulpPressure5.toFixed(2)]})),o={title:{text:"深度、"+this.currentMpa+"曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度",this.currentMpa+"1",this.currentMpa+"2",this.currentMpa+"3",this.currentMpa+"4",this.currentMpa+"5"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度m",inverse:!0,type:"value",nameLocation:"end",max:35,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:this.currentMpa+this.unit,nameLocation:"start",inverse:!1,type:"value",max:350,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!0}}],series:[{name:"深度",type:"line",showSymbol:!1,data:e},{name:this.currentMpa+"1",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:a},{name:this.currentMpa+"2",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:i},{name:this.currentMpa+"3",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:s},{name:this.currentMpa+"4",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:l},{name:this.currentMpa+"5",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:n}]};this.myChart07=r(this.$refs.myChart07,null,{devicePixelRatio:2.5}),this.myChart07.setOption(o),this.echartsConnect2.push(this.myChart07)},initechart08:function(){var t=this.echartsdata,e={title:{text:"速度、流量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["速度","流量1","流量2","流量3","流量4","流量5"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"速度cm/min",inverse:!1,nameLocation:"start",type:"value",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"流量L/min",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"速度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(1)]}))},{name:"流量1",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp1/e.partTime*60).toFixed(2)]}))},{name:"流量2",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp2/e.partTime*60).toFixed(2)]}))},{name:"流量3",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp3/e.partTime*60).toFixed(2)]}))},{name:"流量4",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp4/e.partTime*60).toFixed(2)]}))},{name:"流量5",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp5/e.partTime*60).toFixed(2)]}))}]};this.myChart08=r(this.$refs.myChart08,null,{devicePixelRatio:2.5}),this.myChart08.setOption(e),this.echartsConnect2.push(this.myChart08)},changeHandle:function(t){var e=this,a=this;if(this.tab2=t,0===t&&(this.showechart=!1,this.clearBackData()),1===t&&(this.showechart=!0,this.$nextTick((function(){e.initEchart01(),e.initEchart02(),e.initEchart03(),e.initEchart04(),n(e.echartsConnect),e.initechart06(),e.initechart07(),e.initechart08(),n(e.echartsConnect2),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}})),this.clearBackData()),2===t){this.showechart=!1,this.$nextTick((function(){e.myChart05=r(e.$refs.myChart05,null,{renderer:"svg"}),e.initEchart05(),window.onresize=function(){a.myChart05.resize(),a.map.checkResize()}})),this.partData=this.selectItem.data;for(var i=0;i<this.partData.length;i++)this.totalPartTime+=this.partData[i].partTime;this.PlaybackTime=this.selectItem.beginTime,this.playbackTimeDepth.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),0]),this.playbackTimeFlow.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),0]),this.playerInter=setInterval((function(){e.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){e.backTimeInterval2()}),3e3)}},backTimeInterval1:function(){this.percentage=Number((this.LastTime/this.totalPartTime*100).toFixed(1)),this.pileDownStatus="开始",this.recordStatusClass="on",this.myFun(this.partData[this.s1++].partDeep),this.s1==this.partData.length&&(this.percentage=100,this.pileDownStatus="结束",this.icon="el-icon-video-play",this.recordStatusClass="",clearInterval(this.playerInter))},backTimeInterval2:function(){this.dataNum=this.partData[this.s2++],this.PlaybackTime+=this.dataNum.partTime,this.playbackTimeDepth.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),this.dataNum.partDeep]),this.playbackTimeFlow.push([l(1e3*this.PlaybackTime).format("YYYY-MM-DD HH:mm:ss"),(this.dataNum.partPulp1/this.dataNum.partTime*60).toFixed(2)]),this.LastTime+=this.dataNum.partTime,this.totalPartPulp+=this.dataNum.partPulp1,this.totalPartAsh+=this.dataNum.partAsh,this.pileDeep<this.dataNum.partDeep?(this.pileStatusStr="下钻",this.image="down",this.pulpStatus="喷浆"):(this.pileStatusStr="提钻",this.image="up",this.pulpStatus="止喷"),this.pileDeep=this.dataNum.partDeep,this.pipeStatusClass="on",this.nozzleStatusClass="on",this.initEchart05(),this.s2==this.partData.length&&(this.pipeStatusClass="",this.nozzleStatusClass="",this.pileStatusStr="停钻",this.image="stop",this.pulpStatus="止喷",clearInterval(this.playerInter2))},changeSpeeed:function(){var t=this;"结束"!=this.pileDownStatus&&("fast"==this.value?(clearInterval(this.playerInter),clearInterval(this.playerInter2),this.playerInter=setInterval((function(){t.backTimeInterval1()}),2e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),2e3)):"topspeed"==this.value?(clearInterval(this.playerInter),clearInterval(this.playerInter2),this.playerInter=setInterval((function(){t.backTimeInterval1()}),1e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),1e3)):"ordinary"==this.value&&(clearInterval(this.playerInter),clearInterval(this.playerInter2),this.playerInter=setInterval((function(){t.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),3e3)))},backPlay:function(){var t=this;if("el-icon-video-pause"==this.icon)clearInterval(this.playerInter),clearInterval(this.playerInter2),this.icon="el-icon-video-play";else if("el-icon-video-play"==this.icon){if("结束"==this.pileDownStatus)this.value="ordinary",this.percentage=0,this.ztTop=100,this.image="stop",this.pileStatusStr="停钻",this.pileDownStatus="结束",this.pulpStatus="止喷",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.s1=0,this.s2=0,this.y=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.dataNum=[],this.PlaybackTime="",this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,clearInterval(this.playerInter),clearInterval(this.playerInter2),this.PlaybackTime=this.selectItem.beginTime,this.playerInter=setInterval((function(){t.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),3e3);else{var e=3e3;"fast"==this.value?e=2e3:"topspeed"==this.value&&(e=1e3),this.playerInter=setInterval((function(){t.backTimeInterval1()}),e),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),e)}this.icon="el-icon-video-pause"}},stop:function(){var t=this;this.value="ordinary",this.percentage=0,this.ztTop=100,this.s1=0,this.s2=0,this.y=0,this.playbackTimeDepth=[],this.playbackTimeFlow=[],this.dataNum=[],this.PlaybackTime="",this.LastTime=0,this.totalPartPulp=0,this.totalPartAsh=0,clearInterval(this.playerInter),clearInterval(this.playerInter2),this.PlaybackTime=this.selectItem.beginTime,this.playerInter=setInterval((function(){t.backTimeInterval1()}),3e3),this.playerInter2=setInterval((function(){t.backTimeInterval2()}),3e3)},handleCommand:function(t){this.selectItem=this.tableData[t],this.selectItem.deviceKey.startsWith("KF05")&&(this.flag=!0),1!==this.selectItem.deviceMode?(this.currentMpa="压力",this.unit="MPa"):(this.currentMpa="电流",this.unit="A"),this.print=this.tableData[t].print,this.centerDialogVisible=!0;for(var e,a=this.selectItem.beginTime,i=0;i<this.tableData[t].data.length;i++)a+=this.tableData[t].data[i].partTime,e=l(1e3*a).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(e);for(var s=this.selectItem.beginTime,r=0;r<this.selectItem.data.length;r++)this.selectItem.data[r].startDay=l(1e3*s).format("HH:mm:ss"),s+=this.selectItem.data[r].partTime},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()},myFun:function(t){this.y=Number(t).toFixed(2),this.ztTop=100-t/this.selectItem.depth.toFixed(2)*100+"%"},loadmap:function(){var t=window.T;this.map=new t.Map("mapDiv"),this.map.centerAndZoom(new t.LngLat(this.selectItem.longitude,this.selectItem.latitude),10);var e=new t.Control.MapType([{title:"地图",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:window.TMAP_NORMAL_MAP},{title:"卫星",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:window.TMAP_SATELLITE_MAP}]);this.map.addControl(e);var a=new t.LngLat(this.selectItem.longitude,this.selectItem.latitude),i=new t.Icon({iconUrl:v}),s=new t.Marker(a,i);this.map.addOverLay(s),this.map.enableScrollWheelZoom()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.tableWidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"155px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showechart,expression:"showechart"}],attrs:{size:"small",type:"primary"},on:{click:t.downloadEchart}},[t._v("图片下载")]),a("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{command:t.downLoad}},[a("span",{staticClass:"more"},[t._v("报表下载 ")]),a("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("a",{attrs:{id:"simulation",href:""}}),a("el-dropdown-item",{attrs:{command:0}},[a("span",{staticClass:"icon icon01"}),a("span",{staticClass:"name"},[t._v("详细版")])])],1)],1)],1)]),a(t.report,{tag:"compoent",attrs:{selectItem:t.selectItem}}),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value",attrs:{title:this.selectItem.pileDescribe}},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+" (m)")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime))+" (min)")])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均浆量(L/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePulp)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量1(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量2(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp2)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量3(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp3)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量4(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp4)))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量5(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp5)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("水灰比(:1)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.waterCementRatio)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量(Kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度(%)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxAngle,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("下钻速度(cm/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("提钻速度(cm/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{property:"startDay",label:"时间","min-width":"108px",align:"center",fixed:""}}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度\nm","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep,2))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"段速度\ncm/min","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp1",label:"段浆量1\nL","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp1,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp2",label:"段浆量2\nL","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp2,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp3",label:"段浆量3\nL","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp3,1))+" ")]}}])}),t.flag?a("el-table-column",{attrs:{property:"partPulp4",label:"段浆量4\nL","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp4,1))+" ")]}}],null,!1,491755110)}):t._e(),t.flag?a("el-table-column",{attrs:{property:"partPulp5",label:"段浆量5\nL","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp5,1))+" ")]}}],null,!1,2458645447)}):t._e(),a("el-table-column",{attrs:{property:"partPulpPressure1",label:"段"+this.currentMpa+"1\n"+this.unit,"min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulpPressure1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulpPressure2",label:"段"+this.currentMpa+"2\n"+this.unit,"min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulpPressure2))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulpPressure3",label:"段"+this.currentMpa+"3\n"+this.unit,"min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulpPressure3))+" ")]}}])}),t.flag?a("el-table-column",{attrs:{property:"partPulpPressure4",label:"段"+this.currentMpa+"4\n"+this.unit,"min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulpPressure4))+" ")]}}],null,!1,240838974)}):t._e(),t.flag?a("el-table-column",{attrs:{property:"partPulpPressure5",label:"段"+this.currentMpa+"5\n"+this.unit,"min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulpPressure5))+" ")]}}],null,!1,3734913119)}):t._e(),a("el-table-column",{attrs:{property:"partAsh",label:"段灰量\nkg","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAsh,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDensity",label:"段密度\ng/cm³","min-width":"86px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDensity,3))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"57px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num4filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1)],1),a("div",{staticClass:"reportEchart"},[a("div",{ref:"myChart06",style:{width:"100%",height:"33.3%"}}),a("div",{ref:"myChart07",style:{width:"100%",height:"33.3%"}}),a("div",{ref:"myChart08",style:{width:"100%",height:"33.3%"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tab2,expression:"tab2===2"}]},[a("el-row",{staticClass:"play_back"},[a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"inner inner1 backEchart"},[a("div",{staticClass:"m-statusinfo"},[a("div",{staticClass:"top"},[a("h3",[t._v(t._s(t.selectItem.deviceTypeName))]),a("div",{staticClass:"info"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(" "+t._s(t.selectItem.pileDescribe)+" ")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("设备编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])])]),a("div",{staticClass:"status"},[a("ul",{staticClass:"ul-status"},[a("li",{class:t.recordStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pileDownStatus))])]),a("li",{class:t.pipeStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pileStatusStr))])]),a("li",{class:t.nozzleStatusClass},[a("div",{staticClass:"btn"},[t._v(t._s(t.pulpStatus))])])])])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"item"},[a("h3",[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("h3",[t._v("水灰比")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.waterCementRatio)))])]),a("div",{staticClass:"item"},[a("h3",[t._v("密度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.dataNum.partDensity,3))+" g/cm³")])]),a("div",{staticClass:"item"},[a("h3",[t._v("设计下钻速度")]),a("div",{staticClass:"value"},[t._v("- cm/min")])]),a("div",{staticClass:"item"},[a("h3",[t._v("设计提钻速度")]),a("div",{staticClass:"value"},[t._v("- cm/min")])])])])])]),a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"inner backEchart"},[a("div",{ref:"myChart05",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"play_back"},[a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"mapDiv",attrs:{id:"mapDiv"}})]),a("el-col",{staticClass:"play_col"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"m-datab1",staticStyle:{height:"27rem"}},[a("div",{staticClass:"top"},[a("div",{staticClass:"left"},[a("div",{ref:"angle",staticClass:"icon"},[a("img",{attrs:{src:p,alt:""}})]),a("div",{staticClass:"t1"},[a("p",[t._v("X"),a("b",[t._v("0")])]),a("p",[t._v("Y"),a("b",[t._v("0")])])])]),a("div",{staticClass:"oh"},[a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("持续时长(min)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("minfilters")(t.LastTime)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("累计浆量(L)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.totalPartPulp)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("累计灰量(kg)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.totalPartAsh)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("段浆量(L)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.dataNum.partPulp1)))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"item_center"},[t._v("段灰量(kg)")]),a("b",{staticClass:"item_center"},[t._v(t._s(t._f("numfilters")(t.dataNum.partAsh)))])])])]),a("div",{staticClass:"picbox"},[a("img",{staticClass:"bg",attrs:{src:c,alt:""}}),a("div",{staticClass:"databar"},[a("div",{staticClass:"data",style:{bottom:t.ztTop}},[a("img",{class:t.image,attrs:{src:m,alt:""}}),a("img",{staticClass:"zt",attrs:{src:d,alt:""}}),a("div",{staticClass:"info"},[a("p",[a("b",[t._v(t._s(t.pileStatusStr))])]),a("p",[t._v("深度"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partDeep))+"(m)")])]),a("p",[t._v("速度"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partDownSpeed))+"(cm/min)")])]),a("p",[t._v("流量"),a("em",[t._v(t._s(t._f("numfilters")(t.dataNum.partPulp1/t.dataNum.partTime*60))+"(L/min)")])]),a("img",{staticClass:"line",attrs:{src:h,alt:""}})])])])])])])])],1),a("div",{staticClass:"backplayBottom"},[a("el-progress",{staticClass:"progress_bar",attrs:{"show-text":!1,"stroke-width":15,percentage:t.percentage,color:t.color}}),a("i",{staticClass:"iconBack el-icon-refresh-right",on:{click:t.stop}}),a("i",{staticClass:"iconBack",class:t.icon,on:{click:t.backPlay}}),a("el-select",{staticClass:"selectspeed",attrs:{size:"small",placeholder:"正常"},on:{change:t.changeSpeeed},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,staticClass:"selectspeedOpt",attrs:{label:t.label,value:t.value}})})),1)],1)],1)])],1),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, jumper, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,W,"7c08a513",null,null);function W(t){for(var e in K)this[e]=K[e]}var B=function(){return V.exports}(),j=["pileDescribe","deviceKey","beginTime","endTime","depth","avgCurrent","pileTopCurrent","pileTopCurrentRatio","maxAngle","pileTime","cumulativePulp","downSpeed","upSpeed","maxUpSpeed","longitude","latitude","emDepth"],O={},U=u({components:{gTabs:s,report:o},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{pulpInjection:!1,report:"report",totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","depth","avgCurrent","pileTopCurrent","pileTopCurrentRatio","maxAngle","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"成桩深度(m)",formatter:this.numFormatter},{prop:"avgCurrent",label:"成孔电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"持力电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrentRatio",label:"持力层(比值)",formatter:this.numFormatter},{prop:"maxAngle",label:"垂直度(%)",formatter:this.num1Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter},{prop:"cumulativePulp",label:"注入量(m³)",formatter:this.PulpFormatter},{prop:"downSpeed",label:"钻孔速度(cm/min)",formatter:this.numFormatter},{prop:"upSpeed",label:"起拔速度(cm/min)",formatter:this.numFormatter},{prop:"maxUpSpeed",label:"最大提速(cm/min)",formatter:this.numFormatter},{prop:"longitude",label:"经度"},{prop:"latitude",label:"纬度"},{prop:"emDepth",label:"空搅深度(m)",formatter:this.numFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"成桩深度(m)",formatter:this.numFormatter},{prop:"avgCurrent",label:"成孔电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"持力电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrentRatio",label:"持力层(比值)",formatter:this.numFormatter},{prop:"maxAngle",label:"垂直度(%)",formatter:this.num1Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],tempCols:[],centerDialogVisible:!1,echartsdata:[],print:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:"",totalNum:"",selectAll:[],injection:"",echartdown:[]}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},timefilter:function(t){return l(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},pulpfilters:function(t){return 0==t.cumulativePulp?null==t.theoreticalCumulativePulp?"-":parseFloat(t.theoreticalCumulativePulp).toFixed(2):parseFloat(t.cumulativePulp).toFixed(2)},minfilters:function(t){return parseFloat(t/60).toFixed(0)},num3filters:function(t){return 0==t&&(t="停钻"),t<0&&(t="起拔"),t>0&&(t="钻孔"),t}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.tab2=0,this.selectItem=[],this.echartsdata=[],null==this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{tableWidth:function(t){if(4==t||5==t||6==t||7==t||8==t||9==t)return 120},exportexcel:function(){this.tableToExcel("CFGStatisticsTabledetailed","CFG桩-导出")},tableToExcel:function(t,e){var a;t.nodeType||(t=document.getElementById(t)),t&&(a={worksheet:e||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href="data:application/vnd.ms-excel;base64,"+this.base64(this.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e <style type="text/css">table td {height: 25px;font-family: 宋体;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px; }</style></head><body ><table class="excelTable">{table}</table></body></html>',a)),document.getElementById("simulation").download=e+".xls",document.getElementById("simulation").click())},base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("CFG",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.startDate="",this.endDate="",this.number=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},PulpFormatter:function(t,e,a,i){return(parseFloat(a)/1e3).toFixed(2)},num1Formatter:function(t,e,a,i){return parseFloat(a).toFixed(2)+"%"},handleCheckAllChange:function(t){this.checkedFileds=t?j:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart04:function(){var t=this.echartsdata,e={title:{text:"深度、注入量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","注入量"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:30},{name:"注入量",nameLocation:"start",type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"注入量",type:"line",yAxisIndex:1,showSymbol:!1,data:0==this.selectItem.cumulativePulp?this.selectItem.data.map((function(e,a){return[t[a],e.theoreticalPartTotalPulp.toFixed(2)]})):this.selectItem.data.map((function(e,a){return[t[a],e.partTotalPulp.toFixed(2)]}))}]};this.myChart04=r(this.$refs.myChart04,null,{devicePixelRatio:2.5}),this.myChart04.setOption(e),this.echartdown.push(this.myChart04)},initEchart01:function(){var t=this.echartsdata,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:[{name:"深度"},{name:"电流"}],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"电流",nameLocation:"start",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:300},{name:"深度",nameLocation:"end",inverse:!0,type:"value",max:30,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"电流",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent.toFixed(2)]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echartdown.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"深度、速度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","速度"],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"速度",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"速度",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echartdown.push(this.myChart02)},initEchart03:function(){var t=this.echartsdata,e={title:{text:"深度、倾角曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","倾角"],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"倾角",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1},max:30}],series:[{name:"深度",type:"line",yAxisIndex:1,showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"倾角",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partAngle.toFixed(2)]}))}]};this.myChart03=r(this.$refs.myChart03,null,{devicePixelRatio:2.5}),this.myChart03.setOption(e),this.echartdown.push(this.myChart03)},initEchart05:function(){var t=this.echartsdata,e={title:{text:"深度、注入量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","注入量","实际注入量"],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"注入量",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1},max:30}],series:[{name:"深度",type:"line",yAxisIndex:1,showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"注入量",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return null==e.theoreticalPartTotalPulp?[t[a],0]:[t[a],e.theoreticalPartPulp.toFixed(2)]}))},{name:"实际注入量",type:"line",splitLine:{lineStyle:{type:"dashed"}},data:this.selectItem.data.map((function(e,a){return[t[a],e.partTotalPulp.toFixed(2)]}))}]};this.myChart05=r(this.$refs.myChart05,null,{renderer:"svg"}),this.myChart05.setOption(e)},initEchart06:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].partDeep-1)]&&(t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0),null==this.selectItem.data[e].theoreticalPartPulp?t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0:t[Math.ceil(this.selectItem.data[e].partDeep-1)]+=this.selectItem.data[e].theoreticalPartPulp;var a={title:{text:"成桩注入量分布",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}m³"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"注入量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart06=r(this.$refs.myChart06,null,{renderer:"svg"}),this.myChart06.setOption(a)},changeHandle:function(t){var e=this,a=this;this.tab2=t,1===t&&this.$nextTick((function(){e.initEchart04(),e.initEchart01(),e.initEchart02(),e.initEchart03(),n(e.echartdown),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}})),2===t&&this.$nextTick((function(){e.initEchart05(),e.initEchart06(),window.onresize=function(){a.myChart05.resize(),a.myChart06.resize()}}))},handleCommand:function(t){if(this.selectItem=this.tableData[t],0==this.selectItem.cumulativePulp){this.injection="理论注入量";for(var e=0;e<this.selectItem.data.length;e++)this.selectItem.data[e].theoryPilePulp=this.selectItem.data[e].theoreticalPartPulp}else{this.injection="注入量";for(var a=0;a<this.selectItem.data.length;a++)this.selectItem.data[a].theoryPilePulp=this.selectItem.data[a].partPulp}this.print=this.tableData[t].print,this.centerDialogVisible=!0;for(var i,s=this.selectItem.beginTime,r=this.selectItem.beginTime,n=0;n<this.tableData[t].data.length;n++)s+=this.tableData[t].data[n].partTime,i=l(1e3*s).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(i),this.selectItem.data[n].startDay=r,r+=this.selectItem.data[n].partTime},selectionChange:function(t){this.selectAll=t.reverse();for(var e=0,a=0,i=0,s=0,r=0;r<this.selectAll.length;r++)this.selectAll[r].pileTime,e+=this.selectAll[r].depth,a+=this.selectAll[r].upSpeed,i+=this.selectAll[r].pileTopCurrentRatio,s+=this.selectAll[r].cumulativePulp;this.selectAll.totalDepth=e,this.selectAll.averageDepth=(e/this.selectAll.length).toFixed(2),this.selectAll.averageUpspeed=(a/this.selectAll.length).toFixed(2),this.selectAll.averageRatio=(i/this.selectAll.length).toFixed(2),this.selectAll.averagePulp=(s/this.selectAll.length).toFixed(2),this.selectAll.num=this.selectAll.length,this.selectAll.ENDTime=l(1e3*this.selectAll[this.selectAll.length-1].endTime).format("YYYY-MM-DD HH:mm:ss"),this.selectAll.startTime=l(1e3*this.selectAll[0].beginTime).format("YYYY-MM-DD HH:mm:ss"),this.selectAll.ProjName=this.selectAll[this.selectAll.length-1].projectName,this.selectAll.projWorker=this.selectAll[this.selectAll.length-1].worker,null==this.selectAll[this.selectAll.length-1].projectName&&(this.selectAll.ProjName=""),null==this.selectAll.prijWorker&&(this.selectAll.projWorker=""),t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a(t.report,{tag:"component",attrs:{selectItem:t.selectItem,selectAll:t.selectAll}}),a("a",{staticStyle:{display:"none"},attrs:{id:"simulation",href:""}}),a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.tableWidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"153px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选 ")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label)+" ")])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+t._s("\t")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxAngle))+t._s("\t")+" %")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v(t._s(t.injection))]),a("div",{staticClass:"value"},[t._v(t._s(t._f("pulpfilters")(t.selectItem))+t._s("\t")+"m³")])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginUpTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔时长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.upTime))+t._s("\t")+"min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime))+t._s("\t")+"min")])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("钻孔速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed))+t._s("\t")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed))+t._s("\t")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("持力电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrent,1))+t._s("\t")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成孔电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.avgCurrent,1))+t._s("\t")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("持力层(比值)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrentRatio)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{property:"startDay",label:"时间","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("timefilter")(e.row.startDay))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度(m)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"partCurrent",label:"电流(A)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partCurrent,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"速度(cm/min)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"theoryPilePulp",label:this.injection+"(m³)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.theoryPilePulp))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAngle",label:"垂直度(%)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAngle))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长(s)","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tab2,expression:"tab2 === 2"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart m-pop-echart-two"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart05",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart06",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("div",{staticClass:"export",on:{click:t.exportexcel}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,Z,"c5dd8cd0",null,null);function Z(t){for(var e in O)this[e]=O[e]}var G=function(){return U.exports}(),q={},J=u({components:{gTabs:s},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",echartsdata:[],print:[],selectItem:[],centerDialogVisible:!1,tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:[],totalNum:0,echartDownload:[]}},filters:{worfilter:function(t){return null!=t?t.replace(/\u0000/g,""):t},datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return parseFloat(t).toFixed(2)},num1filters:function(t){return parseFloat(t).toFixed(1)},num2filters:function(t){return parseFloat(t).toFixed(3)},intervalfilters:function(t){switch(t){case 0:return 5;case 1:return 10;case 2:return 30;case 3:return 60;default:return t}},pulpfilters:function(t){var e;switch(t.paramType){case 0:e="二参数";break;case 1:e="三参数";break;case 2:e="四参数";break;default:e=""}switch(t.processMethod){case 0:e+="大循环";break;case 1:e+="小循环";break;default:e+=""}return e},num3filters:function(t){switch(t){case 0:return"工作中";case 1:return"暂停";case 3:return"变浆";case 4:return"信号异常";case 5:return"开启回浆";case 6:return"关闭回浆";case 7:return"间隔灌浆";case 8:return"浆压限流";case 9:return"管路故障";case 10:return"置换结束";case 11:return"冒浆";case 12:return"等浆";case 13:return"串浆";case 14:return"停电";case 15:return"其他";case 50:return"结束";default:return t}},minfilters:function(t){return(parseFloat(t)/60).toFixed(0)}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.tab2=0,this.selectItem=[],null==this.myChart01)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("GJ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}))},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},initEchart01:function(){var t=this.echartsdata,e={title:{text:"压力-时间变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["压力"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"压力  ",type:"value",inverse:!1,axisLine:{show:!0},nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"压力",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partPressure]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echartDownload.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"密度-时间变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["密度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"密度",type:"value",inverse:!1,axisLine:{show:!0},nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"密度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDensity.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echartDownload.push(this.myChart02)},initEchart03:function(){var t=this.echartsdata,e={title:{text:"流量-时间变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["流量"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"流量",type:"value",inverse:!1,axisLine:{show:!0},nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partFlow.toFixed(2)]}))}]};this.myChart03=r(this.$refs.myChart03,null,{devicePixelRatio:2.5}),this.myChart03.setOption(e),this.echartDownload.push(this.myChart03)},initEchart04:function(){var t=this.echartsdata,e={title:{text:"透水率-时间变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["透水率"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"透水率",type:"value",inverse:!1,axisLine:{show:!0},nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"透水率",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partWaterRate]}))}]};this.myChart04=r(this.$refs.myChart04,null,{devicePixelRatio:2.5}),this.myChart04.setOption(e),this.echartDownload.push(this.myChart04)},changeHandle:function(t){var e=this,a=this;this.tab2=t,1===t&&this.$nextTick((function(){e.initEchart01(),e.initEchart02(),e.initEchart03(),e.initEchart04(),n(e.echartDownload),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}}))},handleCommand:function(t){this.selectItem=this.tableData[t],this.print=this.tableData[t].print,this.centerDialogVisible=!0;for(var e,a=this.selectItem.beginTime,i=0;i<this.tableData[t].data.length;i++)a+=this.tableData[t].data[i].partTime,e=l(1e3*a).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(e);for(var s=this.selectItem.beginTime,r=0;r<this.selectItem.dataForTable.length;r++)this.selectItem.dataForTable[r].startDay=l(1e3*s).format("YYYY-MM-DD HH:mm:ss"),s+=this.selectItem.dataForTable[r].partTime},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection"}}),a("el-table-column",{attrs:{fixed:"",prop:"pileDescribe",label:"孔号","min-width":"70px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"deviceKey",label:"桩机号","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.beginTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.endTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"totalPulp",label:"总注浆量(L)","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.totalPulp))+" ")]}}])}),a("el-table-column",{attrs:{prop:"maxPressure",label:"最大压力(Mpa)","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.maxPressure))+" ")]}}])}),a("el-table-column",{attrs:{prop:"waterRate",label:"透水率(lu)","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.waterRate))+" ")]}}])}),a("el-table-column",{attrs:{prop:"pileTime",label:"注浆时长(min)","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("minfilters")(e.row.pileTime))+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"})]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("机器号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工单位")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.worker)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("灌浆方法")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("pulpfilters")(t.print)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("孔口高程(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.print.holeHeight)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起始深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.print.beginDepth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("终止深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.print.endDepth)))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.totalPulp)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.totalAsh)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("弃灰量(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.print.disAsh)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("弃浆量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.print.disGrout)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("水泥比重(g/cm³)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num2filters")(t.print.cementDensity)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("砂比重(g/cm³)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num2filters")(t.print.sandDensity)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("单位灰量(kg/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.avgAsh)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("单位浆量(L/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.avgPulp)))])])])]),a("li",{staticClass:"s4"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("掺加剂1(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.print.densityStuff1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("掺加剂2(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.print.densityStuff2)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("掺加剂3(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.print.densityStuff3)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("注砂量(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.totalSand)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("抬动孔号")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.liftHoleId)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("记录间隔(s)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("intervalfilters")(t.selectItem.recordInterval)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("注浆时长(min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("单元号")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.unitId)))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("部位")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.area)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("泵号")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.pumpId)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("孔序")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.holeId)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("排号")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.rowId)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("段号")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.partId)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.print.pileId)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("通道")]),a("div",{staticClass:"value"},[t._v(t._s(t.print.channel))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("孔号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.dataForTable,height:"23em"}},[a("el-table-column",{attrs:{property:"startDay",label:"时间","min-width":"12%",align:"center"}}),a("el-table-column",{attrs:{property:"partFlow",label:"流量\nL/min","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partFlow))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPressure",label:"压力\nMPa","min-width":"6.9%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPressure))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPressurePeak",label:"峰压力\nMPa","min-width":"7.8%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPressurePeak))+" ")]}}])}),a("el-table-column",{attrs:{property:"partFlowIn",label:"进浆\nL/min","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partFlowIn))+" ")]}}])}),a("el-table-column",{attrs:{property:"partFlowReturn",label:"返浆\nL/min","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partFlowReturn))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDensity",label:"密度\ng/cm³","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDensity))+" ")]}}])}),a("el-table-column",{attrs:{property:"partSandCementRatio",label:"砂灰比","min-width":"5.0%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partSandCementRatio))+" ")]}}])}),a("el-table-column",{attrs:{property:"partWaterCementRatio",label:"水灰比","min-width":"5.0%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partWaterCementRatio))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp",label:"注浆量\nL","min-width":"6%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num1filters")(e.row.partPulp))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAsh",label:"注灰量\nL","min-width":"6%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num1filters")(e.row.partAsh))+" ")]}}])}),a("el-table-column",{attrs:{property:"partStatus",label:"备注","min-width":"5.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partStatus))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, jumper, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,Q,"09e1c22d",null,null);function Q(t){for(var e in q)this[e]=q[e]}var X=function(){return J.exports}(),tt={},et=u({components:{gTabs:s},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",echartsdata:[],selectItem:[],centerDialogVisible:!1,tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],totalNum:0,inquery:[]}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return parseFloat(t).toFixed(2)},minfilters:function(t){return parseInt(t/60)},num1filters:function(t){return parseFloat(t).toFixed(1)+"%"}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.tab2=0,null==this.myChart01)return;this.myChart01.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("CP",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquery=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquery,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},initEchart01:function(){var t=this.echartsdata,e={title:{text:"行程-锤击数曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","锤击数"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time"},yAxis:[{name:"深度(m)          ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"          锤击数",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"锤击数",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partHarmerTimes.toFixed(3)+""]}))}]};this.myChart01=r(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(e)},changeHandle:function(t){var e=this,a=this;this.tab2=t,1===t&&this.$nextTick((function(){e.initEchart01(),window.onresize=function(){a.myChart01.resize()}}))},handleCommand:function(t){this.selectItem=this.tableData[t],this.print=this.tableData[t].print,this.centerDialogVisible=!0,this.selectItem.num=Math.floor(10*Math.random()+1);for(var e,a=this.selectItem.beginTime,i=0;i<this.tableData[t].data.length;i++)a+=this.tableData[t].data[i].partTime,e=l(1e3*a).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(e);for(var s=this.selectItem.beginTime,r=0;r<this.selectItem.data.length;r++)this.selectItem.data[r].startDay=l(1e3*s).format("YYYY-MM-DD HH:mm:ss"),s+=this.selectItem.data[r].partTime},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",align:"center"}}),a("el-table-column",{attrs:{fixed:"",prop:"pileDescribe",label:"桩号","min-width":"70px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"deviceKey",label:"桩机号","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.beginTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.endTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"depth",label:"行程(m)","min-width":"80px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.depth))+" ")]}}])}),a("el-table-column",{attrs:{prop:"designLength",label:"桩长(m)","min-width":"80px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.designLength))+" ")]}}])}),a("el-table-column",{attrs:{prop:"harmerTimes",label:"锤击次数","min-width":"100px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"maxAngle",label:"最大斜度","min-width":"100px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num1filters")(e.row.maxAngle))+" ")]}}])}),a("el-table-column",{attrs:{prop:"pileTime",label:"成桩时间(min)","min-width":"108px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("minfilters")(e.row.pileTime))+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("行程(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("配桩长度")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.designLength))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxAngle)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩端锤击次数")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.num))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("配桩数量")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.designPileAmount))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间(min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("锤击次数")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.harmerTimes))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28rem"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100px",align:"center"}}),a("el-table-column",{attrs:{property:"startDay",label:"时间",align:"center"}}),a("el-table-column",{attrs:{property:"partDeep",label:"行程(m)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"partHarmerTimes",label:"段锤击数",align:"center"}}),a("el-table-column",{attrs:{property:"partTimet",label:"段时长(s)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partTime))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,at,"6e843281",null,null);function at(t){for(var e in tt)this[e]=tt[e]}var it=function(){return et.exports}(),st={},lt=u({props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",totalNum:0,inquire:[]}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return parseFloat(t).toFixed(2)},minfilters:function(t){return(parseFloat(t.endTime-t.beginTime)/60).toFixed(1)}},mounted:function(){this.deviceKey=this.device},methods:{tableCellclassname:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;return 1==e||2==e||3==e?{textAlign:"center"}:{textAlign:"centert"}},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("HTZJ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,"",t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.startDate="",this.endDate=""},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1)],1)])],1)])]),a("el-main",[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","cell-style":t.tableCellclassname,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",align:"center"}}),a("el-table-column",{attrs:{fixed:"",prop:"deviceKey",label:"机器编号","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.beginTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.endTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"water",label:"加水量(Kg)","min-width":"90px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.water))+" ")]}}])}),a("el-table-column",{attrs:{prop:"ash",label:"加灰量(kg)","min-width":"90px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.ash))+" ")]}}])}),a("el-table-column",{attrs:{prop:"waterCementRatio",label:"水灰比","min-width":"90px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.waterCementRatio))+" ")]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"持续时间(min)","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("minfilters")(e.row))+" ")]}}])})],1)],1)],1),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("a",{staticClass:"export",attrs:{href:"javascript:;"}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, jumper, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,rt,null,null,null);function rt(t){for(var e in st)this[e]=st[e]}var nt=function(){return lt.exports}(),ot={},ct=u({components:{gTabs:s},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{length:"",actualLength:"",totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",echartsdata:[],selectItem:[],centerDialogVisible:!1,tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:[],totalNum:0,echart:[],showButton:!1}},filters:{statusfilter:function(t){return 0!==t?"压桩":0==t?"接桩":void 0},datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?"":parseFloat(t).toFixed(e)},Speedfilters:function(t){return Math.abs(t.toFixed(2))},minfilters:function(t){return(parseFloat(t)/60).toFixed(0)}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.showButton=!1,this.selectItem=[],this.echartsdata=[],this.tab2=0,void 0===this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose(),this.myChart02.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{downLoadImage:function(){var t=document.createElement("a");t.href=this.myChart01.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("GZ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},initEchart01:function(){var t=this.echartsdata,e={title:{text:"压桩力曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"3%",data:["压桩力"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"压桩力",nameLocation:"start",inverse:!1,type:"value",axisLine:{show:!0},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"压桩力",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partPressure1.toFixed(3)+""]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echart.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"深度、速度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"3%",data:["深度","速度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度",type:"value",inverse:!0,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"速度",nameLocation:"start",inverse:!1,type:"value",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(3)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)+""]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echart.push(this.myChart02)},changeHandle:function(t){var e=this,a=this;this.tab2=t,0==t&&(this.showButton=!1),1===t&&(this.showButton=!0,this.$nextTick((function(){e.initEchart01(),e.initEchart02(),n(e.echart),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize()}})))},handleCommand:function(t){this.selectItem=this.tableData[t],this.print=this.tableData[t].print,this.centerDialogVisible=!0,null==this.selectItem.designLength?(this.length=0,this.selectItem.designPileAmount=0):0==this.selectItem.designLength?this.length=0:0==this.selectItem.designLength3?this.length=this.selectItem.designLength1+"+"+this.selectItem.designLength2:0==this.selectItem.designLength4?this.length=this.selectItem.designLength1+"+"+this.selectItem.designLength2+"+"+this.selectItem.designLength3:0==this.selectItem.designLength5?this.length=this.selectItem.designLength1+"+"+this.selectItem.designLength2+"+"+this.selectItem.designLength3+"+"+this.selectItem.designLength4:0==this.selectItem.designLength2?this.length=this.selectItem.designLength1:this.length=this.selectItem.designLength1+"+"+this.selectItem.designLength2+"+"+this.selectItem.designLength3+"+"+this.selectItem.designLength4+"+"+this.selectItem.designLength5,0==this.selectItem.length1?this.actualLength=0:0==this.selectItem.length2?this.actualLength=this.selectItem.length1.toFixed(2):0==this.selectItem.length3?this.actualLength=this.selectItem.length1.toFixed(2)+"+"+this.selectItem.length2.toFixed(2):0==this.selectItem.length4?this.actualLength=this.selectItem.length1.toFixed(2)+"+"+this.selectItem.length2.toFixed(2)+"+"+this.selectItem.length3.toFixed(2):0==this.selectItem.length5?this.actualLength=this.selectItem.length1.toFixed(2)+"+"+this.selectItem.length2.toFixed(2)+"+"+this.selectItem.length3.toFixed(2)+"+"+this.selectItem.length4.toFixed(2):this.actualLength=this.selectItem.length1.toFixed(2)+"+"+this.selectItem.length2.toFixed(2)+"+"+this.selectItem.length3.toFixed(2)+"+"+this.selectItem.length4.toFixed(2)+"+"+this.selectItem.length5.toFixed(2);for(var e,a=this.selectItem.beginTime,i=0;i<this.tableData[t].data.length;i++)0==this.tableData[t].data[i].partTime&&(this.tableData[t].data[i].partTime=this.tableData[t].data[i].partTime+1),a+=this.tableData[t].data[i].partTime,e=l(1e3*a).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(e);for(var s=this.selectItem.beginTime,r=[],n=0;n<this.selectItem.data.length;n++)this.selectItem.data[n].startDay=l(1e3*s).format("YYYY-MM-DD HH:mm:ss"),(s+=this.selectItem.data[n].partTime)==this.selectItem.data[n]&&(this.selectItem.data[n].serial=r.push(n))},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",align:"center"}}),a("el-table-column",{attrs:{fixed:"",prop:"pileDescribe",label:"桩号","min-width":"70px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"deviceKey",label:"桩机号","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.beginTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.endTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"depth",label:"行程(m)","min-width":"70px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.depth))+" ")]}}])}),a("el-table-column",{attrs:{prop:"designLength",label:"桩长(m)","min-width":"70px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.designLength))+" ")]}}])}),a("el-table-column",{attrs:{prop:"maxPressure",label:"最大压桩力(MPa)","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"maxAngle",label:"最大斜度(%)","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.maxAngle,1))+" ")]}}])}),a("el-table-column",{attrs:{prop:"pileTime",label:"成桩时间(min)","min-width":"110px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("minfilters")(e.row.pileTime))+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[t.showButton?a("el-button",{attrs:{size:"small",type:"primary",round:""},on:{click:t.downLoadImage}},[t._v("图片下载")]):t._e()],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("行程(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("配桩长度")]),a("div",{staticClass:"value"},[t._v(t._s(t.length))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("实际配桩长度")]),a("div",{staticClass:"value"},[t._v(t._s(t.actualLength))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxAngle))+"%")])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间(min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("配桩数量")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.designPileAmount))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("实际配桩数量")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileAmount))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大桩压力(MPa)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxPressure)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100px",align:"center"}}),a("el-table-column",{attrs:{property:"startDay",label:"时间","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDeep",label:"行程(m)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"段速度(cm/min)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("Speedfilters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPressure1",label:"段压桩力(MPa)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPressure1))+" ")]}}])}),a("el-table-column",{attrs:{property:"angle",label:"垂直度(%)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.angle))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长(s)","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partPressure1",label:"状态","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("statusfilter")(e.row.partPressure1))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, jumper, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,mt,"7b4337ab",null,null);function mt(t){for(var e in ot)this[e]=ot[e]}var dt=function(){return ct.exports}(),ht=["pileDescribe","deviceKey","beginTime","endTime","depth","frDepth","reDepth","waterCementRatio","cumulativePulp","averagePulp","cumulativeAsh","averageAsh","verticality","maxDownSpeed","downSpeed","maxUpSpeed","upSpeed","pileTime"],pt={},ut=u({components:{gTabs:s},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","depth","cumulativePulp","averagePulp","cumulativeAsh","pileTime","verticality"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"frDepth",label:"初搅深度(m)",formatter:this.numFormatter},{prop:"reDepth",label:"复搅深度(m)",formatter:this.numFormatter},{prop:"waterCementRatio",label:"水灰比",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)",formatter:this.numFormatter},{prop:"averagePulp",label:"平均浆量(L/m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"averageAsh",label:"平均灰量(kg/m)",formatter:this.numFormatter},{prop:"verticality",label:"垂直度",formatter:this.num1Formatter},{prop:"maxDownSpeed",label:"最大钻速(cm/min)",formatter:this.numFormatter},{prop:"downSpeed",label:"下钻速度(cm/min)",formatter:this.numFormatter},{prop:"maxUpSpeed",label:"最大提速(cm/min)",formatter:this.numFormatter},{prop:"upSpeed",label:"提钻速度(cm/min)",formatter:this.numFormatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"cumulativePulp",label:"累计浆量(L)",formatter:this.numFormatter},{prop:"averagePulp",label:"平均浆量(L/m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter},{prop:"verticality",label:"垂直度",formatter:this.num1Formatter}],tempCols:[],centerDialogVisible:!1,echartsdata:[],print:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",inquire:[],totalNum:0,showdownloadBtn:!1,echart:[],downloadEchart:[]}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t){return parseFloat(t).toFixed(2)},minfilters:function(t){return(parseFloat(t)/60).toFixed(0)},num1filters:function(t){return parseFloat(t).toFixed(1)+"%"},num4filters:function(t){return Math.abs(parseFloat(t).toFixed(2))},num5filters:function(t){return t<0?"提钻":"下钻"}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.showdownloadBtn=!1,this.tab2=0,null==this.myChart01)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart04.dispose(),this.myChart05.dispose(),this.myChart06.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{download:function(){var t=document.createElement("a");t.href=this.myChart05.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},tableWidth:function(t){if(1==t||2==t||3==t)return 150},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("DK",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}))},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},num1Formatter:function(t,e,a,i){return parseFloat(a).toFixed(2)+"%"},handleCheckAllChange:function(t){this.checkedFileds=t?ht:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},initEchart05:function(){var t=this.echartsdata,e={title:{text:"深度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","海拔"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",max:40,nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0}},{name:"    海拔",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"海拔",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],Number(e.partAltitude.toFixed(2))]}))}]};this.myChart05=r(this.$refs.myChart05,null,{devicePixelRatio:2.5}),this.myChart05.setOption(e),this.downloadEchart.push(this.myChart05)},initEchart06:function(){var t=this.echartsdata,e={title:{text:"流量、速度变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["流量","速度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"流量          ",inverse:!1,type:"value",nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0}},{name:"          速度",nameLocation:"start",inverse:!1,type:"value",max:50,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp/e.partTime*60).toFixed(2)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]}))}]};this.myChart06=r(this.$refs.myChart06,null,{devicePixelRatio:2.5}),this.myChart06.setOption(e),this.downloadEchart.push(this.myChart06)},initEchart01:function(){var t=this.echartsdata,e={title:{text:"深度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","海拔"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度",inverse:!0,nameLocation:"end",type:"value",max:40,nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0}},{name:"海拔",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"海拔",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],Number(e.partAltitude.toFixed(2))]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echart.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"流量、速度变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["流量","速度"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"流量",inverse:!1,type:"value",nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0}},{name:"速度",nameLocation:"start",inverse:!1,type:"value",max:50,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"流量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],(e.partPulp/e.partTime*60).toFixed(2)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echart.push(this.myChart02)},initEchart04:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].partDeep-1)]&&(t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0),t[Math.ceil(this.selectItem.data[e].partDeep-1)]+=this.selectItem.data[e].partAsh;var a={title:{text:"成桩灰量分布",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"成桩灰量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottotm:"5%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart04=r(this.$refs.myChart04,null,{renderer:"svg"}),this.myChart04.setOption(a)},changeHandle:function(t){var e=this,a=this;this.tab2=t,0==t&&(this.showdownloadBtn=!1),1===t&&(this.showdownloadBtn=!0,this.$nextTick((function(){e.initEchart05(),e.initEchart06(),n(e.downloadEchart),e.initEchart01(),e.initEchart02(),e.initEchart04(),n(e.echart),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart04.resize()}})))},handleCommand:function(t){this.selectItem=this.tableData[t],this.print=this.tableData[t].print,this.centerDialogVisible=!0;for(var e,a=this.selectItem.beginTime,i=0;i<this.tableData[t].data.length;i++)a+=this.tableData[t].data[i].partTime,e=l(1e3*a).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(e);for(var s=this.selectItem.beginTime,r=[],n=0;n<this.selectItem.data.length;n++)this.selectItem.data[n].startDay=l(1e3*s).format("YYYY-MM-DD HH:mm:ss"),(s+=this.selectItem.data[n].partTime)==this.selectItem.data[n]&&(this.selectItem.data[n].serial=r.push(n))},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.tableWidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"135px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[t.showdownloadBtn?a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:t.download}},[t._v("图片下载")]):t._e()],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.machineKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均浆量(L/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePulp)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均灰量(kg/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averageAsh)))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量1(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均浆量1(L/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePulp1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量1(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均灰量1(kg/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averageAsh1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计浆量2(L)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativePulp2)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均浆量2(L/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePulp2)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量2(kg)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh2)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均灰量2(kg/m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averageAsh2)))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("水灰比")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.waterCementRatio)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间(min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("复搅深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.reDepth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.verticality)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("初搅深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("下钻速度(cm/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("提钻速度(cm/min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed)))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩顶海拔")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.topAltitude)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩底海拔")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.bottomAltitude)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("扩大头桩长(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.tTypeLength)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("上部桩浆量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.tTypeSlurry)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("下部桩浆量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.bottomPartSlurry)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩经纬度")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.holeLongitude+","+t.selectItem.holeLatitude))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("上部桩灰量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.tTypeAsh)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("下部桩灰量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.bottomPartAsh)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"23em"}},[a("el-table-column",{attrs:{property:"partId",label:"序号","min-width":"5%",align:"center"}}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度\nm","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAltitude",label:"段海拔\nm","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAltitude))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp1",label:"段浆量1\nL","min-width":"8%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp2",label:"段浆量2\nL","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp2))+" ")]}}])}),a("el-table-column",{attrs:{property:"partPulp",label:"总段浆量\nL","min-width":"8%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partPulp))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAsh1",label:"段灰量1\nkg","min-width":"7.5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAsh1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAsh2",label:"段灰量2\nkg","min-width":"8%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAsh2))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAsh",label:"总段灰量\nkg","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAsh))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"速度\ncm/min","min-width":"9%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长\ns","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"5%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num5filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col col_3",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1)],1),a("div",{staticClass:"echartDownload"},[a("div",{ref:"myChart05",style:{width:"100%",height:"100%"}}),a("div",{ref:"myChart06",style:{width:"100%",height:"100%"}})])])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("a",{staticClass:"export",attrs:{href:"javascript:;"}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,vt,"9143bf74",null,null);function vt(t){for(var e in pt)this[e]=pt[e]}var ft=function(){return ut.exports}(),bt=["pileDescribe","deviceKey","beginTime","endTime","pileId","depth","angle","longitude","latitude","rpm","avgRpm","pileTime"],gt={},Ct=u({components:{gTabs:s},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{report:"report",checkedData:[],totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",checkedId:[],checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","pileId","depth","angle","longitude","latitude","rpm","avgRpm","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"设备编号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"pileId",label:"桩唯一标识"},{prop:"depth",label:"钻入深度(m)",formatter:this.numFormatter},{prop:"angle",label:"垂直度(%)",formatter:this.numFormatter},{prop:"longitude",label:"经度坐标"},{prop:"latitude",label:"纬度坐标"},{prop:"rpm",label:"终孔转速",formatter:this.numsFormatter},{prop:"avgRpm",label:"平均转速",formatter:this.numFormatter},{prop:"pileTime",label:"总时长(s)"}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"设备编号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"pileId",label:"桩唯一标识"},{prop:"depth",label:"钻入深度(m)",formatter:this.numFormatter},{prop:"angle",label:"垂直度(%)",formatter:this.numFormatter},{prop:"longitude",label:"经度坐标"},{prop:"latitude",label:"纬度坐标"},{prop:"rpm",label:"终孔转速",formatter:this.numsFormatter},{prop:"avgRpm",label:"平均转速",formatter:this.numFormatter},{prop:"pileTime",label:"总时长(s)"}],tempCols:[],centerDialogVisible:!1,data:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],totalNum:0,inquery:[]}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},minfilters:function(t){return(parseFloat(t)/60).toFixed(2)},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)}},watch:{centerDialogVisible:function(t,e){if(window.onresize=null,0==t){if(this.tab2=0,this.selectItem=[],this.data=[],void 0===this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$emit("changeDevicekey",this.deviceKey,this.pileDescribe,this.startDate,this.endDate),e("XWZ",0,this.device,this.pageSize,this.pileDescribe,this.startDate,this.endDate).then((function(e){t.inquery=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.pileDescribe,t.startDate,t.endDate,t.inquery,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.startDate="",this.endDate="",this.number=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},numsFormatter:function(t,e,a,i){return parseFloat(a).toFixed(1)},handleCheckAllChange:function(t){this.checkedFileds=t?bt:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart01:function(){var t=this.data,e={title:{text:"深度、转速曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","转速"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10}},yAxis:[{name:"深度(m)  ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" 转速",nameLocation:"end",inverse:!0,type:"value",splitLine:{show:!1},nameTextStyle:{padding:[10,20,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.depth]}))},{name:"转速",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.rotateSpeed.toFixed(3)+""]}))}]};this.myChart01=r(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(e)},changeHandle:function(t){var e=this,a=this;this.tab2=t,1===t&&this.$nextTick((function(){e.initEchart01(),window.onresize=function(){a.myChart01.resize()}}))},handleCommand:function(t){this.selectItem=this.tableData[t],this.centerDialogVisible=!0;for(var e=0;e<this.tableData[t].data.length;e++)this.data.push(l(1e3*this.tableData[t].data[e].realTime).format("YYYY-MM-DD HH:mm:ss"))},selectionChange:function(t){this.checkedData=t,this.checkedId=[];for(var e=0;e<t.length;e++)this.checkedId.push(t[e]._id);t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.pileDescribe,callback:function(e){t.pileDescribe=e},expression:"pileDescribe"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticClass:"jbThead",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id",align:"center","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,formatter:t.formatter,"min-width":"160px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value valuepile",attrs:{title:this.selectItem.pileDescribe}},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("设备号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩唯一标识")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileId))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("垂直度(%)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.angle)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("经度坐标")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.longitude))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("维度坐标")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.latitude))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("钻入深度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+"(m)")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("终孔转速")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.rpm,1)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均转速")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.avgRpm)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("总时长(s)")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileTime))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{property:"order",label:"序号","min-width":"4.33%",align:"center"}}),a("el-table-column",{attrs:{property:"depth",label:"深度值(m)","min-width":"8.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.depth))+" ")]}}])}),a("el-table-column",{attrs:{property:"rotateSpeed",label:"转速","min-width":"8.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.rotateSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"realTime",label:"上传时间","min-width":"8.83%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.realTime))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot, jumper, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,yt,"73c67c4e",null,null);function yt(t){for(var e in gt)this[e]=gt[e]}var xt=function(){return Ct.exports}(),_t=["pileDescribe","deviceKey","beginTime","endTime","depth","pileTime"],wt={},kt=u({components:{gTabs:s,report:o},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{checkedData:[],depthReport:[],ashReport:{},pulpReport:{},upspeed:{},downspeed:{},partcurrent:{},report:"report",totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",checkAll:!1,checkedFileds:["pileDescribe","beginTime","endTime","depth","ash","current","xAngle","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"ash",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"ash",label:"平均灰量(kg/m)",formatter:this.averageAsh},{prop:"current",label:"电流(A)",formatter:this.numFormatter},{prop:"xAngle",label:"最大斜度",formatter:this.num1Formatter},{prop:"endTime",label:"成桩时间(min)",formatter:this.minFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"施工桩长(m)",formatter:this.numFormatter},{prop:"ash",label:"累计灰量(kg)",formatter:this.numFormatter},{prop:"ash",label:"平均灰量(kg/m)",formatter:this.averageAsh},{prop:"current",label:"电流(A)",formatter:this.numFormatter},{prop:"xAngle",label:"最大斜度",formatter:this.num1Formatter},{prop:"endTime",label:"成桩时间(min)",formatter:this.minFormatter}],tempCols:[],centerDialogVisible:!1,data:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:[],totalNum:0,echartLoad:[],downloadechart:[],showbtn:!1}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},averageAshFilter:function(t){return 0==t.ash&&t.depth-t.emptyDepth==0?0:parseFloat(t.ash/(t.depth-t.emptyDepth)).toFixed(2)},minfilters:function(t){return(parseFloat(t.endTime-t.beginTime)/60).toFixed(0)},num1filters:function(t){return parseFloat(t).toFixed(2)+"%"},num3filters:function(t){return Math.abs(parseFloat(t).toFixed(2))},num5filters:function(t){return t<0?"提钻":"下钻"},depthfilters:function(t){return parseFloat(t.depth-t.emptyDepth).toFixed(2)}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.showbtn=!1,this.tab2=0,this.selectItem=[],this.upspeed=[],this.downspeed=[],this.partcurrent=[],this.ashReport=[],this.depthReport=[],this.data=[],null==this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{echartDownload:function(){var t=document.createElement("a");t.href=this.myChart06.getConnectedDataURL({pixelRatio:2,backgroundColor:"#fff"}),t.download="图片下载.png",t.click()},exportAll:function(){},downLoad:function(t){switch(t){case 0:this.tableToExcel("FPZstatisticsTablePrint","粉喷桩桩-打印版");break;case 1:this.tableToExcel("FPZstatisticsTable","粉喷桩桩-综合版");break;case 2:this.tableToExcel("FPZstatisticsTabledetailed","粉喷桩桩-详细版")}},tableToExcel:function(t,e){var a;t.nodeType||(t=document.getElementById(t)),t&&(a={worksheet:e||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href="data:application/vnd.ms-excel;base64,"+this.base64(this.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e <style type="text/css">table td {height: 25px;font-family: 宋体;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px; }</style></head><body ><table class="excelTable">{table}</table></body></html>',a)),document.getElementById("simulation").download=e+".xls",document.getElementById("simulation").click())},base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("ZKFPZ",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.number="",this.startDate="",this.endDate=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},num11Formatter:function(t,e,a,i){return parseFloat(a).toFixed(1)},minFormatter:function(t,e,a,i){return(parseFloat(a-t.beginTime)/60).toFixed(0)},num1Formatter:function(t,e,a,i){return parseFloat(a).toFixed(1)+"%"},averageAsh:function(t,e,a,i){return 0==t.depth&&0==a?0:parseFloat(a/(t.depth-t.emptyDepth)).toFixed(2)},handleCheckAllChange:function(t){this.checkedFileds=t?_t:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart01:function(){var t=this.data,e={title:{text:"深度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.depth]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echartLoad.push(this.myChart01)},initEchart02:function(){var t=this.data,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]},max:30},{name:"电流",type:"value",nameLocation:"start",max:300,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.depth.toFixed(2)]}))},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.current.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echartLoad.push(this.myChart02)},initEchart03:function(){var t=this.data,e={title:{text:"段灰量、速度变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["段灰量","速度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"段灰量(kg)",type:"value",nameLocation:"start",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,20]}},{name:"速度(cm/min) ",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,25,0,0]}}],series:[{name:"段灰量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.ash.toFixed(2)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.speed.toFixed(2)]}))}]};this.myChart03=r(this.$refs.myChart03,null,{devicePixelRatio:2.5}),this.myChart03.setOption(e),this.echartLoad.push(this.myChart03)},initEchart04:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].depth-1)]&&(t[Math.ceil(this.selectItem.data[e].depth-1)]=0),t[Math.ceil(this.selectItem.data[e].depth-1)]+=this.selectItem.data[e].ash;var a={title:{text:"成桩灰量分布",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"成桩灰量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart04=r(this.$refs.myChart04,null,{renderer:"svg"}),this.myChart04.setOption(a)},initEchart06:function(){var t=this.data,e={title:{text:"深度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.depth]}))}]};this.myChart06=r(this.$refs.myChart06,null,{devicePixelRatio:2.5}),this.myChart06.setOption(e),this.downloadechart.push(this.myChart06)},initEchart07:function(){var t=this.data,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","电流"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]},max:30},{name:"          电流",type:"value",nameLocation:"start",max:300,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.depth.toFixed(2)]}))},{name:"电流",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.current.toFixed(2)]}))}]};this.myChart07=r(this.$refs.myChart07,null,{devicePixelRatio:2.5}),this.myChart07.setOption(e),this.downloadechart.push(this.myChart07)},initEchart08:function(){var t=this.data,e={title:{text:"段灰量、速度变化曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["段灰量","速度"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"段灰量(kg)",type:"value",nameLocation:"start",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"速度(cm/min)      ",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"段灰量",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.ash.toFixed(2)]}))},{name:"速度",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.speed.toFixed(2)]}))}]};this.myChart08=r(this.$refs.myChart08,null,{devicePixelRatio:2.5}),this.myChart08.setOption(e),this.downloadechart.push(this.myChart08)},changeHandle:function(t){var e=this,a=this;this.tab2=t,0==t&&(this.showbtn=!1),1===t&&(this.showbtn=!0,this.$nextTick((function(){e.initEchart01(),e.initEchart02(),e.initEchart03(),e.initEchart04(),n(e.echartLoad),e.initEchart06(),e.initEchart07(),e.initEchart08(),n(e.downloadechart),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}})))},handleCommand:function(t){var e;this.selectItem=this.tableData[t],this.centerDialogVisible=!0;for(var a=0;a<this.tableData[t].data.length;a++)e=l(1e3*this.tableData[t].data[a].realTime).format("YYYY-MM-DD HH:mm:ss"),this.data.push(e)},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a(t.report,{tag:"component",attrs:{selectItem:t.selectItem,depthReport:t.depthReport,pulpReport:t.pulpReport,partcurrent:t.partcurrent,downspeed:t.downspeed,upspeed:t.upspeed,ashReport:t.ashReport,checkedData:t.checkedData}}),a("a",{attrs:{id:"simulation",href:""}}),a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,formatter:t.formatter,"min-width":"148px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),a("div",{staticClass:"right"},[t.showbtn?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.echartDownload}},[t._v("图片下载")]):t._e()],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value",attrs:{title:this.selectItem.pileDescribe}},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩端电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.current))+t._s(" ")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.xAngle))+t._s(" ")+"%")])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+t._s(" ")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("有效桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("depthfilters")(t.selectItem))+t._s(" ")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("累计灰量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.ash))+t._s(" ")+"kg")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("平均灰量")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("averageAshFilter")(t.selectItem))+t._s(" ")+"kg/m")])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem))+t._s(" ")+"min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("空搅深度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.emptyDepth))+t._s(" ")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("下钻速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed))+t._s(" ")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("提钻速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed))+t._s(" ")+"cm/min")])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80px",align:"center"}}),a("el-table-column",{attrs:{property:"realTime",label:"时间","min-width":"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.realTime))+" ")]}}])}),a("el-table-column",{attrs:{property:"depth",label:"段深度(m)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.depth))+" ")]}}])}),a("el-table-column",{attrs:{property:"ash",label:"段灰量(kg)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.ash))+" ")]}}])}),a("el-table-column",{attrs:{property:"current",label:"段电流(A)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.current,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"pressure",label:"段压力(kg)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.pressure,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"speed",label:"速度(cm/min)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.speed))+" ")]}}])}),a("el-table-column",{attrs:{property:"speed",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num5filters")(e.row.speed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1)],1),a("div",{staticClass:"echatrs",attrs:{id:"echartss"}},[a("div",{ref:"myChart06",style:{width:"100%",height:"33.33%"}}),a("div",{ref:"myChart07",style:{width:"100%",height:"33.33%"}}),a("div",{ref:"myChart08",style:{width:"100%",height:"33.33%"}})])])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("div",{staticClass:"export",on:{click:t.exportAll}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,Dt,"dfbcf6bc",null,null);function Dt(t){for(var e in wt)this[e]=wt[e]}var St=function(){return kt.exports}(),It={},Tt=u({components:{gTabs:s},props:["tableData","deviceList","device","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage"],data:function(){return{startDate:"",endDate:"",pileDescribe:"",deviceKey:"",selectItem:[],centerDialogVisible:!1,tab2:0,tab2List:[{name:"详细内容"}],totalChecked:!1,inquire:[],totalNum:[]}},filters:{reaeFilter:function(t){return 0==t?"合格":"无效"},worfilter:function(t){return null!=t?t.replace(/\u0000/g,""):t},datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},minfilters:function(t){return Math.ceil(t/60)}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.tab2=0,null==this.myChart01)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose()}}},methods:{querychaxun:function(){var t=this;e("DP",0,this.deviceKey,this.pageSize,this.pileDescribe,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.pileDescribe,t.startDate,t.endDate,t.inquire,t.totalNum)}))},resetClick:function(){this.deviceKey="",this.pileDescribe="",this.startDate="",this.endDate=""},changeHandle:function(t){this.tab2=t},handleCommand:function(t){this.selectItem=this.tableData[t],this.centerDialogVisible=!0},selectionChange:function(t){t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychaxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.pileDescribe,callback:function(e){t.pileDescribe=e},expression:"pileDescribe"}})],1)],1)])],1)])]),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",align:"center"}}),a("el-table-column",{attrs:{fixed:"",prop:"pileDescribe",label:"桩号","min-width":"70px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"deviceKey",label:"设备编号","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.beginTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"120px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.endTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"depth",label:"深度(m)","min-width":"100px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.depth))+" ")]}}])}),a("el-table-column",{attrs:{prop:"partCount",label:"组内数量(个)","min-width":"100px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partCount,0))+" ")]}}])}),a("el-table-column",{attrs:{prop:"longitude",label:"经度","min-width":"110px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.longitude,3))+" ")]}}])}),a("el-table-column",{attrs:{prop:"latitude",label:"纬度","min-width":"110px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.latitude,3))+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("组内数量(个)")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.partCount))])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("worfilter")(t.selectItem.deviceKey)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("经度")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.longitude))])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("深度(m)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("组内时间(min)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("纬度")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.latitude))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"32em"}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"70px",width:"80px",align:"center"}}),a("el-table-column",{attrs:{property:"endTime",label:"结束时间","min-width":"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("datafilters")(e.row.endTime))+" ")]}}])}),a("el-table-column",{attrs:{property:"xLocation",label:"段位置X","min-width":"105px",align:"center"}}),a("el-table-column",{attrs:{property:"yLocation",label:"段位置Y","min-width":"105px",align:"center"}}),a("el-table-column",{attrs:{property:"downDeep",label:"下行深度(m)","min-width":"102px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.downDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"upDeep",label:"回带深度(m)","min-width":"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.upDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"xAngle",label:"倾角X","min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.xAngle,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"yAngle",label:"倾角Y","min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.yAngle,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"pressure",label:"段压力(Mpa)","min-width":"117px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.pressure))+" ")]}}])}),a("el-table-column",{attrs:{property:"rate",label:"评价","min-width":"70px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("reaeFilter")(e.row.rate))+" ")]}}])})],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,Ft,"09ef00dd",null,null);function Ft(t){for(var e in It)this[e]=It[e]}var At=function(){return Tt.exports}(),Lt=["pileDescribe","deviceKey","beginTime","endTime","depth","avgCurrent","pileTopCurrent","pileTopCurrentRatio","maxAngle","pileTime","cumulativePulp","downSpeed","upSpeed","maxUpSpeed","longitude","latitude","emDepth"],Pt={},zt=u({components:{gTabs:s,report:o},props:["tableData","device","deviceList","pageSize","total","currentPage","handleSizeChange","handleCurrentChange","toLastPage","toFirstPage","pileDescribe"],data:function(){return{pulpInjection:!1,report:"report",totalChecked:!1,startDate:"",endDate:"",number:"",deviceKey:"",checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","endTime","depth","avgCurrent","pileTopCurrent","pileTopCurrentRatio","maxAngle","pileTime"],fieldNames:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"成桩深度(m)",formatter:this.numFormatter},{prop:"avgCurrent",label:"成孔电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"持力电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrentRatio",label:"持力层(比值)",formatter:this.numFormatter},{prop:"maxAngle",label:"垂直度(%)",formatter:this.num1Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter},{prop:"cumulativePulp",label:"注入量(m³)",formatter:this.PulpFormatter},{prop:"downSpeed",label:"钻孔速度(cm/min)",formatter:this.numFormatter},{prop:"upSpeed",label:"起拔速度(cm/min)",formatter:this.numFormatter},{prop:"maxUpSpeed",label:"最大提速(cm/min)",formatter:this.numFormatter},{prop:"longitude",label:"经度"},{prop:"latitude",label:"纬度"},{prop:"emDepth",label:"空搅深度(m)",formatter:this.numFormatter}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"桩号"},{prop:"deviceKey",label:"桩机号"},{prop:"beginTime",label:"开始时间",formatter:this.testFormatter},{prop:"endTime",label:"结束时间",formatter:this.testFormatter},{prop:"depth",label:"成桩深度(m)",formatter:this.numFormatter},{prop:"avgCurrent",label:"成孔电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"持力电流(A)",formatter:this.numFormatter},{prop:"pileTopCurrentRatio",label:"持力层(比值)",formatter:this.numFormatter},{prop:"maxAngle",label:"垂直度(%)",formatter:this.num1Formatter},{prop:"pileTime",label:"成桩时间(min)",formatter:this.minFormatter}],tempCols:[],centerDialogVisible:!1,echartsdata:[],print:[],selectItem:[],tab2:0,tab2List:[{name:"详细内容"},{name:"图表曲线"}],selectTable:"记录报表下载",selectTableList:[{label:"记录报表下载",value:"0"},{label:"记录报表下载1",value:"1"}],inquire:"",totalNum:"",selectAll:[],injection:"",echartdown:[]}},filters:{datafilters:function(t){return l(1e3*t).format("YYYY-MM-DD HH:mm:ss")},timefilter:function(t){return l(1e3*t).format("HH:mm:ss")},numfilters:function(t,e){return null==e&&(e=2),isNaN(t)?t:parseFloat(t).toFixed(e)},pulpfilters:function(t){return 0==t.cumulativePulp?null==t.theoreticalCumulativePulp?"-":parseFloat(t.theoreticalCumulativePulp).toFixed(2):parseFloat(t.cumulativePulp).toFixed(2)},minfilters:function(t){return parseFloat(t/60).toFixed(0)},num3filters:function(t){return 0==t&&(t="停钻"),t<0&&(t="起拔"),t>0&&(t="钻孔"),t}},watch:{centerDialogVisible:function(t,e){if(0==t){if(this.tab2=0,this.selectItem=[],this.echartsdata=[],null==this.myChart01||this.myChart01._disposed)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose()}}},mounted:function(){this.deviceKey=this.device},methods:{tableWidth:function(t){if(4==t||5==t||6==t||7==t||8==t||9==t)return 120},exportexcel:function(){this.tableToExcel("CFGStatisticsTabledetailed","CFG桩-导出")},tableToExcel:function(t,e){var a;t.nodeType||(t=document.getElementById(t)),t&&(a={worksheet:e||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href="data:application/vnd.ms-excel;base64,"+this.base64(this.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e <style type="text/css">table td {height: 25px;font-family: 宋体;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px; }</style></head><body ><table class="excelTable">{table}</table></body></html>',a)),document.getElementById("simulation").download=e+".xls",document.getElementById("simulation").click())},base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},querychxun:function(){var t=this,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e("CFG",0,this.deviceKey,this.pageSize,this.number,this.startDate,this.endDate).then((function(e){t.inquire=e.content,t.totalNum=e.totalElements,t.$emit("changeDevicekey",t.deviceKey,t.number,t.startDate,t.endDate,t.inquire,t.totalNum),a.close()})),setTimeout((function(){a.close()}),6e3)},resetClick:function(){this.deviceKey="",this.startDate="",this.endDate="",this.number=""},testFormatter:function(t,e,a,i){return l(1e3*a).format("YYYY-MM-DD HH:mm:ss")},numFormatter:function(t,e,a,i){return parseFloat(a).toFixed(2)},minFormatter:function(t,e,a,i){return(parseFloat(a)/60).toFixed(0)},PulpFormatter:function(t,e,a,i){return(parseFloat(a)/1e3).toFixed(2)},num1Formatter:function(t,e,a,i){return parseFloat(a).toFixed(2)+"%"},handleCheckAllChange:function(t){this.checkedFileds=t?Lt:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.fieldNames.length,this.isIndeterminate=e>0&&e<this.fieldNames.length},showData:function(t){this.dialogFormVisible=!0},confirmShow:function(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("请至少选择一项数据"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var e=0;e<this.checkedFileds.length;e++)this.fieldNames[t].prop==this.checkedFileds[e]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart04:function(){var t=this.echartsdata,e={title:{text:"深度、注入量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["深度","注入量"]},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"深度          ",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:30},{name:"注入量",nameLocation:"start",type:"value",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"注入量",type:"line",yAxisIndex:1,showSymbol:!1,data:0==this.selectItem.cumulativePulp?this.selectItem.data.map((function(e,a){return[t[a],e.theoreticalPartTotalPulp.toFixed(2)]})):this.selectItem.data.map((function(e,a){return[t[a],e.partTotalPulp.toFixed(2)]}))}]};this.myChart04=r(this.$refs.myChart04,null,{devicePixelRatio:2.5}),this.myChart04.setOption(e),this.echartdown.push(this.myChart04)},initEchart01:function(){var t=this.echartsdata,e={title:{text:"深度、电流曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:[{name:"深度"},{name:"电流"}],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"电流",nameLocation:"start",type:"value",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0},max:300},{name:"深度",nameLocation:"end",inverse:!0,type:"value",max:30,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"电流",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partCurrent.toFixed(2)]}))}]};this.myChart01=r(this.$refs.myChart01,null,{devicePixelRatio:2.5}),this.myChart01.setOption(e),this.echartdown.push(this.myChart01)},initEchart02:function(){var t=this.echartsdata,e={title:{text:"深度、速度曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","速度"],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"速度",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1}}],series:[{name:"深度",yAxisIndex:1,type:"line",showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"速度",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDownSpeed.toFixed(2)]}))}]};this.myChart02=r(this.$refs.myChart02,null,{devicePixelRatio:2.5}),this.myChart02.setOption(e),this.echartdown.push(this.myChart02)},initEchart03:function(){var t=this.echartsdata,e={title:{text:"深度、倾角曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","倾角"],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"倾角",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1},max:30}],series:[{name:"深度",type:"line",yAxisIndex:1,showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"倾角",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partAngle.toFixed(2)]}))}]};this.myChart03=r(this.$refs.myChart03,null,{devicePixelRatio:2.5}),this.myChart03.setOption(e),this.echartdown.push(this.myChart03)},initEchart05:function(){var t=this.echartsdata,e={title:{text:"深度、注入量曲线",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis",selectedMode:!0},legend:{top:"5%",right:"10%",data:["深度","注入量","实际注入量"],selected:{"深度":!1}},grid:{top:"22%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"注入量",nameLocation:"start",inverse:!1,type:"value",nameTextStyle:{padding:[10,15,0,0]},axisLine:{show:!0}},{name:"深度",inverse:!0,nameLocation:"end",type:"value",nameTextStyle:{padding:[10,0,0,15]},splitLine:{show:!1},max:30}],series:[{name:"深度",type:"line",yAxisIndex:1,showSymbol:!1,data:this.selectItem.data.map((function(e,a){return[t[a],e.partDeep.toFixed(2)]}))},{name:"注入量",type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.selectItem.data.map((function(e,a){return null==e.theoreticalPartTotalPulp?[t[a],0]:[t[a],e.theoreticalPartPulp.toFixed(2)]}))},{name:"实际注入量",type:"line",splitLine:{lineStyle:{type:"dashed"}},data:this.selectItem.data.map((function(e,a){return[t[a],e.partTotalPulp.toFixed(2)]}))}]};this.myChart05=r(this.$refs.myChart05,null,{renderer:"svg"}),this.myChart05.setOption(e)},initEchart06:function(){for(var t=[],e=0;e<this.selectItem.data.length;e++)null==t[Math.ceil(this.selectItem.data[e].partDeep-1)]&&(t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0),null==this.selectItem.data[e].theoreticalPartPulp?t[Math.ceil(this.selectItem.data[e].partDeep-1)]=0:t[Math.ceil(this.selectItem.data[e].partDeep-1)]+=this.selectItem.data[e].theoreticalPartPulp;var a={title:{text:"成桩注入量分布",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}m³"},grid:{top:"10%",bottom:"10%"},toolbox:{feature:{saveAsImage:{}}},series:[{name:"注入量分布",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:t.map((function(t,e,a){return{value:Number(t.toFixed(2)),name:e+1}})),sort:"none",color:"#5470c6"}]};this.myChart06=r(this.$refs.myChart06,null,{renderer:"svg"}),this.myChart06.setOption(a)},changeHandle:function(t){var e=this,a=this;this.tab2=t,1===t&&this.$nextTick((function(){e.initEchart04(),e.initEchart01(),e.initEchart02(),e.initEchart03(),n(e.echartdown),window.onresize=function(){a.myChart01.resize(),a.myChart02.resize(),a.myChart03.resize(),a.myChart04.resize()}})),2===t&&this.$nextTick((function(){e.initEchart05(),e.initEchart06(),window.onresize=function(){a.myChart05.resize(),a.myChart06.resize()}}))},handleCommand:function(t){if(this.selectItem=this.tableData[t],0==this.selectItem.cumulativePulp){this.injection="理论注入量";for(var e=0;e<this.selectItem.data.length;e++)this.selectItem.data[e].theoryPilePulp=this.selectItem.data[e].theoreticalPartPulp}else{this.injection="注入量";for(var a=0;a<this.selectItem.data.length;a++)this.selectItem.data[a].theoryPilePulp=this.selectItem.data[a].partPulp}this.print=this.tableData[t].print,this.centerDialogVisible=!0;for(var i,s=this.selectItem.beginTime,r=this.selectItem.beginTime,n=0;n<this.tableData[t].data.length;n++)s+=this.tableData[t].data[n].partTime,i=l(1e3*s).format("YYYY-MM-DD HH:mm:ss"),this.echartsdata.push(i),this.selectItem.data[n].startDay=r,r+=this.selectItem.data[n].partTime},selectionChange:function(t){this.selectAll=t.reverse();for(var e=0,a=0,i=0,s=0,r=0;r<this.selectAll.length;r++)this.selectAll[r].pileTime,e+=this.selectAll[r].depth,a+=this.selectAll[r].upSpeed,i+=this.selectAll[r].pileTopCurrentRatio,s+=this.selectAll[r].cumulativePulp;this.selectAll.totalDepth=e,this.selectAll.averageDepth=(e/this.selectAll.length).toFixed(2),this.selectAll.averageUpspeed=(a/this.selectAll.length).toFixed(2),this.selectAll.averageRatio=(i/this.selectAll.length).toFixed(2),this.selectAll.averagePulp=(s/this.selectAll.length).toFixed(2),this.selectAll.num=this.selectAll.length,this.selectAll.ENDTime=l(1e3*this.selectAll[this.selectAll.length-1].endTime).format("YYYY-MM-DD HH:mm:ss"),this.selectAll.startTime=l(1e3*this.selectAll[0].beginTime).format("YYYY-MM-DD HH:mm:ss"),this.selectAll.ProjName=this.selectAll[this.selectAll.length-1].projectName,this.selectAll.projWorker=this.selectAll[this.selectAll.length-1].worker,null==this.selectAll[this.selectAll.length-1].projectName&&(this.selectAll.ProjName=""),null==this.selectAll.prijWorker&&(this.selectAll.projWorker=""),t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange:function(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a(t.report,{tag:"component",attrs:{selectItem:t.selectItem,selectAll:t.selectAll}}),a("a",{staticStyle:{display:"none"},attrs:{id:"simulation",href:""}}),a("el-container",{staticClass:"row-con"},[a("el-header",{staticClass:"m-filter"},[a("div",{staticClass:"wp"},[a("div",{staticClass:"filter"},[a("el-form",{ref:"filter",staticClass:"m-filterbox"},[a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("查询 ")]),a("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[a("span",{staticClass:"icon icon-reset"}),a("span",[t._v("重置")])]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showData()}}},[t._v("选择参数")])],1),a("div",{staticClass:"left"},[a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("div",{staticClass:"item"},[t._v("至")]),a("el-form-item",{staticClass:"item g-date"},[a("el-col",{staticClass:"date",attrs:{span:14}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",type:"datetime","prefix-icon":"",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("el-form-item",{staticClass:"item picker picker-device"},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:t.deviceKey,callback:function(e){t.deviceKey=e},expression:"deviceKey"}},t._l(t.deviceList,(function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1)],1),a("el-form-item",{staticClass:"item input"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入桩号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])],1)])]),a("el-main",{staticClass:"m-table-main"},[a("div",{attrs:{id:"table-content"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,(function(e,i){return a("el-table-column",{key:i,attrs:{width:t.tableWidth(i),prop:e.prop,label:e.label,formatter:e.formatter,"min-width":"153px",align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"m-edit-btns"},[a("div",{staticClass:"item"},[a("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(a){return t.handleCommand(e.$index)}}},[t._v("详情")])])])]}}])})],2)],1)]),a("el-dialog",{attrs:{title:"选择需要展示的参数",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选 ")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(e){t.checkedFileds=e},expression:"checkedFileds"}},t._l(t.fieldNames,(function(e){return a("el-checkbox",{key:e.prop,attrs:{label:e.prop}},[t._v(t._s(e.label)+" ")])})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("确定")])],1)],1)],1),a("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[a("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1)]),a("div",{staticClass:"dialog-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab2,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[a("div",{staticClass:"m-table-detail"},[a("div",{staticClass:"detailitem"},[a("h3",[t._v("详细数据")]),a("div",{staticClass:"box"},[a("ul",{staticClass:"ul-detail"},[a("li",{staticClass:"s1"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.pileDescribe))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("桩机编号")]),a("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("施工桩长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+t._s("\t")+"m")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("最大斜度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxAngle))+t._s("\t")+" %")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v(t._s(t.injection))]),a("div",{staticClass:"value"},[t._v(t._s(t._f("pulpfilters")(t.selectItem))+t._s("\t")+"m³")])])])]),a("li",{staticClass:"s2"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("开始时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginUpTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("结束时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔时长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.upTime))+t._s("\t")+"min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成桩时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime))+t._s("\t")+"min")])])])]),a("li",{staticClass:"s3"},[a("div",{staticClass:"inner liinner"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("钻孔速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed))+t._s("\t")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("起拔速度")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed))+t._s("\t")+"cm/min")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("持力电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrent,1))+t._s("\t")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("成孔电流")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.avgCurrent,1))+t._s("\t")+"A")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"tit"},[t._v("持力层(比值)")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrentRatio)))])])])])])])]),a("br"),a("h3",[t._v("段数据列表")]),a("el-table",{ref:"saveTable",staticClass:"m-table-save m_table_save_height",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[a("el-table-column",{attrs:{property:"startDay",label:"时间","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("timefilter")(e.row.startDay))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDeep",label:"段深度(m)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDeep))+" ")]}}])}),a("el-table-column",{attrs:{property:"partCurrent",label:"电流(A)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partCurrent,1))+" ")]}}])}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"速度(cm/min)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partDownSpeed))+" ")]}}])}),a("el-table-column",{attrs:{property:"theoryPilePulp",label:this.injection+"(m³)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.theoryPilePulp))+" ")]}}])}),a("el-table-column",{attrs:{property:"partAngle",label:"垂直度(%)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("numfilters")(e.row.partAngle))+" ")]}}])}),a("el-table-column",{attrs:{property:"partTime",label:"段时长(s)","min-width":"8.33%",align:"center"}}),a("el-table-column",{attrs:{property:"partDownSpeed",label:"状态","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("num3filters")(e.row.partDownSpeed))+" ")]}}])})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab2,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])]),a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tab2,expression:"tab2 === 2"}],staticClass:"m-tab-table m-tab-echartTable"},[a("div",{staticClass:"m-pop-echart m-pop-echart-two"},[a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart05",style:{width:"100%",height:"100%"}})])])],1),a("el-row",{staticClass:"row"},[a("el-col",{staticClass:"col",attrs:{span:12}},[a("div",{staticClass:"inner"},[a("div",{ref:"myChart06",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),a("el-footer",{staticClass:"m-selectAll"},[a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(e){t.totalChecked=e},expression:"totalChecked"}},[t._v("全选 ")])],1),a("div",{staticClass:"item"},[a("div",{staticClass:"export",on:{click:t.exportexcel}},[t._v("导出")])])]),a("div",{staticClass:"right"},[a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[a("i",{staticClass:"el-icon-d-arrow-left"})])]),a("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"slot,sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)}),[],!1,Mt,"42f01ce6",null,null);function Mt(t){for(var e in Pt)this[e]=Pt[e]}var Et={},Nt=u({name:"History",components:{JBZ:y,GYXPZ:A,GH:M,CGSZ:R,GFZ:B,CFG:G,GJ:X,CP:it,HTZJ:nt,GZ:dt,gTabs:s,FPZ:D,DK:ft,XWZ:xt,ZKFPZ:St,DP:At,LG:function(){return zt.exports}()},data:function(){return{startday:"",endday:"",pileDescribe:"",deviceList:[],device:"",tab:"JBZ",pageSize:10,total:0,currentPage:1,tabList:[],tableData:[],minPileDepth:"",mincumulitePileAsh:"",minPileTime:"",maxPileDepth:"",maxCumulitePileAsh:"",maxPileTime:"",minAverageAsh:"",maxAverageAsh:""}},mounted:function(){var t=this;a().then((function(a){var s=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.tabList=a,null!=sessionStorage.type?t.tab=sessionStorage.type:t.tab=t.tabList[0].name,null!=sessionStorage.deviceKey?(t.device=sessionStorage.deviceKey,sessionStorage.removeItem("deviceKey")):t.device="",null!=sessionStorage.pileDescribe?(t.pileDescribe=sessionStorage.pileDescribe,sessionStorage.removeItem("pileDescribe")):t.pileDescribe="","JBZ"==t.tab&&(null!=sessionStorage.pileDepth?t.minPileDepth=sessionStorage.pileDepth:t.minPileDepth="",null!=sessionStorage.cumulativePileAsh?t.mincumulitePileAsh=sessionStorage.cumulativePileAsh:t.mincumulitePileAsh="",null!=sessionStorage.pileTime?t.minPileTime=sessionStorage.pileTime:t.minPileTime=""),i(9999,1,t.tab).then((function(e){t.deviceList=e.result.records})),e(t.tab,0,t.device,t.pageSize,t.pileDescribe,t.startday,t.endday,t.minPileDepth,t.mincumulitePileAsh,t.minPileTime).then((function(e){t.tableData=e.content,t.total=e.totalElements,s.close()})),setTimeout((function(){s.close()}),6e3)}))},methods:{changeDevicekey:function(t,e,a,i,s,l,r,n,o,c,m,d,h,p){this.device=t,this.startday=a,this.endday=i,this.pileDescribe=e,this.currentPage=0,this.tableData=s,this.total=l,this.maxPileDepth=r,this.minAverageAsh=n,this.maxAverageAsh=o,this.maxCumulitePileAsh=c,this.maxPileTime=m,this.minPileDepth=d,this.mincumulitePileAsh=p,this.minPileTime=h},conditionsQuery:function(){"JBZ"!=this.tab?(this.minPileDepth="",this.mincumulitePileAsh="",this.minPileTime="",this.maxPileDepth="",this.minAverageAsh="",this.maxAverageAsh="",this.maxCumulitePileAsh="",this.maxPileTime=""):(this.minPileDepth=sessionStorage.pileDepth,this.mincumulitePileAsh=sessionStorage.cumulativePileAsh,this.minPileTime=sessionStorage.pileTime)},toFirstPage:function(){this.handleCurrentChange(1)},toLastPage:function(){this.handleCurrentChange(Math.ceil(this.total/this.pageSize))},handleSizeChange:function(t){var a=this,i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.pageSize=t,e(this.tab,this.currentPage-1,this.device,this.pageSize,this.pileDescribe,this.startday,this.endday,this.minPileDepth,this.mincumulitePileAsh,this.minPileTime,this.maxPileDepth,this.minAverageAsh,this.maxAverageAsh,this.maxCumulitePileAsh,this.maxPileTime).then((function(t){a.tableData=t.content,a.total=t.totalElements,i.close()})),setTimeout((function(){i.close()}),6e3)},handleCurrentChange:function(t){var a=this,i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.currentPage=t,e(this.tab,this.currentPage-1,this.device,this.pageSize,this.pileDescribe,this.startday,this.endday,this.minPileDepth,this.mincumulitePileAsh,this.minPileTime,this.maxPileDepth,this.minAverageAsh,this.maxAverageAsh,this.maxCumulitePileAsh,this.maxPileTime).then((function(t){a.tableData=t.content,a.total=t.totalElements,i.close()})),setTimeout((function(){i.close()}),6e3)},handleClick:function(){var t=this,a=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.device="",this.pileDescribe="",this.currentPage=1,i(9999,1,this.tab).then((function(e){t.deviceList=e.result.records,sessionStorage.type=t.tab})),this.startday="",this.endday="",this.conditionsQuery(),e(this.tab,this.currentPage-1,"",this.pageSize,"",this.startday,this.endday,this.minPileDepth,this.mincumulitePileAsh,this.minPileTime).then((function(e){t.tableData=e.content,t.total=e.totalElements,a.close()})),setTimeout((function(){a.close()}),6e3)}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row-history"},[a("div",{staticClass:"m-topNav"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabList,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}})})),1)],1),a("el-container",{staticClass:"row-con"},[a(t.tab,{tag:"component",attrs:{pileDescribe:t.pileDescribe,tableData:t.tableData,device:t.device,deviceList:t.deviceList,pageSize:t.pageSize,total:t.total,currentPage:t.currentPage,handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange,toLastPage:t.toLastPage,toFirstPage:t.toFirstPage},on:{changeDevicekey:t.changeDevicekey}})],1)],1)}),[],!1,Yt,null,null,null);function Yt(t){for(var e in Et)this[e]=Et[e]}t("default",function(){return Nt.exports}())}}}))}();
