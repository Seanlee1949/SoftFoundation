import{r as R}from"./report.f3309a49.js";import{n as z}from"./index.c517e933.js";import{h as x,i as I,c as Y}from"./moment.fa453fbd.js";import{q as H,i as T}from"./api.99655d7f.js";import{g as N}from"./gTabs.843aacaa.js";/* empty css                                                          */var $=function(){var t=this,l=t.$createElement,e=t._self._c||l;return e("div",{staticClass:"row-history"},[e(t.report,{tag:"component",attrs:{partcurrent:t.partcurrent,downspeed:t.downspeed,upspeed:t.upspeed,ashReport:t.ashReport,selectItem:t.selectItem,checkedData:t.checkedData,depthReport:t.depthReport,pulpReport:t.pulpReport}}),e("a",{attrs:{id:"simulation",href:""}}),e("el-container",{staticClass:"row-con"},[e("el-header",{staticClass:"m-filter"},[e("div",{staticClass:"wp"},[e("div",{staticClass:"filter"},[e("el-form",{ref:"filter",staticClass:"m-filterbox"},[e("div",{staticClass:"right"},[e("el-button",{staticClass:"btn btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.querychxun}},[t._v("\u67E5\u8BE2 ")]),e("el-button",{staticClass:"btn btn-reset",attrs:{"native-type":"reset"},on:{click:t.resetClick}},[e("span",{staticClass:"icon icon-reset"}),e("span",[t._v("\u91CD\u7F6E")])]),e("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.showData()}}},[t._v("\u9009\u62E9\u53C2\u6570")])],1),e("div",{staticClass:"left"},[e("el-form-item",{staticClass:"item picker picker-device"},[e("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907"},model:{value:t.device,callback:function(i){t.device=i},expression:"device"}},t._l(t.deviceList,function(i){return e("el-option",{key:i.key,attrs:{label:i.name,value:i.key}})}),1)],1),e("el-form-item",{staticClass:"item input"},[e("el-input",{staticClass:"input",attrs:{placeholder:"\u8BF7\u8F93\u5165\u6869\u53F7"},model:{value:t.pileDescribe,callback:function(i){t.pileDescribe=i},expression:"pileDescribe"}})],1)],1)])],1)])]),e("el-main",{staticClass:"m-table-main"},[e("div",{attrs:{id:"table-content"}},[e("el-table",{ref:"table",staticClass:"jbThead",staticStyle:{width:"100%"},attrs:{"cell-style":t.backgroundColor,data:t.tableData,"row-key":"id",align:"center","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectionChange}},[e("el-table-column",{attrs:{type:"selection",align:"center",fixed:""}}),t._l(t.cols,function(i,h){return e("el-table-column",{key:h,attrs:{prop:i.prop,label:i.label,formatter:i.formatter,"min-width":"145px",align:"center","show-overflow-tooltip":""}})}),e("el-table-column",{attrs:{fixed:"right",width:"60"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"m-edit-btns"},[e("div",{staticClass:"item"},[e("a",{staticClass:"btn",attrs:{href:"javascript:"},on:{click:function(h){return t.handleCommand(i.$index)}}},[t._v("\u8BE6\u60C5")])])])]}}])})],2)],1)]),e("el-dialog",{attrs:{title:"\u9009\u62E9\u9700\u8981\u5C55\u793A\u7684\u53C2\u6570",visible:t.dialogFormVisible,width:"40%",center:"",top:"15vh"},on:{"update:visible":function(i){t.dialogFormVisible=i}}},[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(i){t.checkAll=i},expression:"checkAll"}},[t._v("\u5168\u9009 ")]),e("div",{staticStyle:{margin:"15px 0"}}),e("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkedFileds,callback:function(i){t.checkedFileds=i},expression:"checkedFileds"}},t._l(t.fieldNames,function(i){return e("el-checkbox",{key:i.prop,attrs:{label:i.prop}},[t._v(t._s(i.label)+" ")])}),1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"medium"},on:{click:function(i){t.dialogFormVisible=!1}}},[t._v("\u53D6 \u6D88")]),e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.confirmShow}},[t._v("\u786E\u5B9A")])],1)],1)],1),e("el-dialog",{staticClass:"m-pop m-pop-detail",attrs:{visible:t.centerDialogVisible},on:{"update:visible":function(i){t.centerDialogVisible=i}}},[e("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"left"},[e("gTabs",{attrs:{current:t.tab2,list:t.tab2List},on:{change:t.changeHandle}})],1),e("div",{staticClass:"right"},[e("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:t.downLoad}},[e("span",{staticClass:"more"},[t._v("\u62A5\u8868\u4E0B\u8F7D ")]),e("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:0}},[e("span",{staticClass:"icon icon01"}),e("span",{staticClass:"name"},[t._v("\u6253\u5370\u7248")])]),e("el-dropdown-item",{attrs:{command:1}},[e("span",{staticClass:"icon icon02"}),e("span",{staticClass:"name"},[t._v("\u7EFC\u5408\u7248")])]),e("el-dropdown-item",{attrs:{command:2}},[e("span",{staticClass:"icon icon03"}),e("span",{staticClass:"name"},[t._v("\u8BE6\u7EC6\u7248")])])],1)],1)],1)]),e("div",{staticClass:"dialog-content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-detail"},[e("div",{staticClass:"m-table-detail"},[e("div",{staticClass:"detailitem"},[e("h3",[t._v("\u8BE6\u7EC6\u6570\u636E")]),e("div",{staticClass:"box"},[e("ul",{staticClass:"ul-detail"},[e("li",{staticClass:"s1"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u6869\u53F7")]),e("div",{staticClass:"value valuepile",attrs:{title:this.selectItem.pileDescribe}},[t._v(" "+t._s(t.selectItem.pileDescribe)+" ")])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u6869\u673A\u7F16\u53F7")]),e("div",{staticClass:"value"},[t._v(t._s(t.selectItem.deviceKey))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u5F00\u59CB\u65F6\u95F4")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.beginTime)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u7ED3\u675F\u65F6\u95F4")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("datafilters")(t.selectItem.endTime)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u65BD\u5DE5\u6869\u957F")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.depth))+"(m)")])])])]),e("li",{staticClass:"s2"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u521D\u6405\u6DF1\u5EA6(m)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.frDepth)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u7D2F\u8BA1\u6D46\u91CF(L)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u7D2F\u8BA1\u7070\u91CF(kg)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.cumulativeAsh)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u5E73\u5747\u6D46\u91CF(L/m)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePulp)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u5E73\u5747\u7070\u91CF(kg/m)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averageAsh)))])])])]),e("li",{staticClass:"s3"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u5E73\u5747\u5BC6\u5EA6(g/cm\xB3)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("densityfilter")(t.selectItem.waterCementRatio)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u6210\u6869\u65F6\u95F4(min)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("minfilters")(t.selectItem.pileTime)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u590D\u6405\u6DF1\u5EA6(m)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.reDepth)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.downSpeed)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u63D0\u94BB\u901F\u5EA6(cm/min)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.upSpeed)))])])])]),e("li",{staticClass:"s4"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u6869\u7AEF\u7535\u6D41(A)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.pileTopCurrent)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u6700\u5927\u7535\u6D41(A)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.maxCurrent)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u7A7A\u6405\u6DF1\u5EA6(m)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.emDepth)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u6700\u5927\u659C\u5EA6(%)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("num1filters")(t.selectItem.xAngle)))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"tit"},[t._v("\u55B7\u6D46\u538B\u529B(Mpa)")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("numfilters")(t.selectItem.averagePressure)))])])])])])])]),e("br"),e("h3",[t._v("\u6BB5\u6570\u636E\u5217\u8868")]),e("el-table",{ref:"saveTable",staticClass:"m-table-save",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.selectItem.data,height:"28em"}},[e("el-table-column",{attrs:{property:"partId",label:"\u5E8F\u53F7","min-width":"8.33%",align:"center"}}),e("el-table-column",{attrs:{property:"partDeep",label:"\u6BB5\u6DF1\u5EA6(m)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("numfilters")(i.row.partDeep))+" ")]}}])}),e("el-table-column",{attrs:{property:"partPulp",label:"\u6BB5\u6D46\u91CF(L)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("numfilters")(i.row.partPulp))+" ")]}}])}),e("el-table-column",{attrs:{property:"partAsh",label:"\u6BB5\u7070\u91CF(kg)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("numfilters")(i.row.partAsh))+" ")]}}])}),e("el-table-column",{attrs:{property:"partCurrent",label:"\u6BB5\u7535\u6D41(A)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("numfilters")(i.row.partCurrent))+" ")]}}])}),e("el-table-column",{attrs:{property:"partDensity",label:"\u6BB5\u5BC6\u5EA6(g/cm\xB3)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("num2filters")(i.row.partDensity))+" ")]}}])}),e("el-table-column",{attrs:{property:"partDownSpeed",label:"\u901F\u5EA6(cm/min)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("num3filters")(i.row.partDownSpeed))+" ")]}}])}),e("el-table-column",{attrs:{property:"partPressure",label:"\u6BB5\u55B7\u538B(MPa)","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("numfilters")(i.row.partPressure))+" ")]}}])}),e("el-table-column",{attrs:{property:"partTime",label:"\u6BB5\u65F6\u957F(s)","min-width":"8.33%",align:"center"}}),e("el-table-column",{attrs:{property:"partDownSpeed",label:"\u72B6\u6001","min-width":"8.33%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(t._f("num5filters")(i.row.partDownSpeed))+" ")]}}])})],1)],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tab2===1,expression:"tab2 === 1"}],staticClass:"m-tab-table m-tab-echartTable"},[e("div",{staticClass:"m-pop-echart"},[e("el-row",{staticClass:"row"},[e("el-col",{staticClass:"col",attrs:{span:12}},[e("div",{staticClass:"inner"},[e("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])]),e("el-col",{staticClass:"col",attrs:{span:12}},[e("div",{staticClass:"inner"},[e("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])],1),e("el-row",{staticClass:"row"},[e("el-col",{staticClass:"col",attrs:{span:12}},[e("div",{staticClass:"inner"},[e("div",{ref:"myChart03",style:{width:"100%",height:"100%"}})])]),e("el-col",{staticClass:"col",attrs:{span:12}},[e("div",{staticClass:"inner"},[e("div",{ref:"myChart04",style:{width:"100%",height:"100%"}})])])],1)],1)])])]),e("el-footer",{staticClass:"m-selectAll"},[e("div",{staticClass:"left"},[e("div",{staticClass:"item"},[e("el-checkbox",{staticClass:"total",on:{change:t.totalChange},model:{value:t.totalChecked,callback:function(i){t.totalChecked=i},expression:"totalChecked"}},[t._v("\u5168\u9009 ")])],1),e("div",{staticClass:"item"},[e("a",{staticClass:"export",on:{click:t.checkall}},[t._v("\u5BFC\u51FA")])])]),e("div",{staticClass:"right"},[e("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,40],"page-size":t.pageSize,layout:"slot, prev, pager,next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[e("button",{staticClass:"lastPage",on:{click:t.toFirstPage}},[e("i",{staticClass:"el-icon-d-arrow-left"})])]),e("el-pagination",{staticClass:"pages",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,40],"page-size":t.pageSize,layout:"slot, jumper, sizes",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[e("button",{staticClass:"lastPage",on:{click:t.toLastPage}},[e("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},V=[];const W=["pileDescribe","deviceKey","beginTime","endTime","depth","frDepth","reDepth","waterCementRatio","cumulativePulp","averagePulp","cumulativeAsh","averageAsh","pileTopCurrent","maxCurrent","downSpeed","upSpeed","averageCurrent","maxDownSpeed","maxUpSpeed","xAngle","pileTime","tTypeLength","tTypePulp","tTypeAsh","bottomPartPulp","bottomPartAsh","emDepth","warnreason"],j={components:{gTabs:N,report:R},data(){return{report:"report",pageSize:10,total:0,currentPage:1,deviceList:[],tableData:[],tab:"JBZ",pileDescribe:"",device:"",totalChecked:!1,checkedId:[],paramsList:[{label:"\u53C2\u65701",value:"\u53C2\u65701"},{label:"\u53C2\u65702",value:"\u53C2\u65702"}],checkAll:!1,checkedFileds:["pileDescribe","deviceKey","beginTime","depth","cumulativeAsh","upSpeed","downSpeed","warnreason"],fieldNames:[{prop:"pileDescribe",label:"\u6869\u53F7"},{prop:"deviceKey",label:"\u8BBE\u5907\u7F16\u53F7"},{prop:"beginTime",label:"\u5F00\u59CB\u65F6\u95F4",formatter:this.testFormatter},{prop:"endTime",label:"\u7ED3\u675F\u65F6\u95F4",formatter:this.testFormatter},{prop:"depth",label:"\u65BD\u5DE5\u6869\u957F(m)",formatter:this.numFormatter},{prop:"frDepth",label:"\u521D\u6405\u6DF1\u5EA6(m)",formatter:this.numFormatter},{prop:"reDepth",label:"\u590D\u6405\u6DF1\u5EA6(m)",formatter:this.numFormatter},{prop:"waterCementRatio",label:"\u6C34\u7070\u6BD4",formatter:this.numFormatter},{prop:"cumulativePulp",label:"\u7D2F\u8BA1\u6D46\u91CF(L)",formatter:this.numFormatter},{prop:"averagePulp",label:"\u5E73\u5747\u6D46\u91CF(L/m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"\u7D2F\u8BA1\u7070\u91CF(kg)",formatter:this.numFormatter},{prop:"averageAsh",label:"\u5E73\u5747\u7070\u91CF(kg/m)",formatter:this.numFormatter},{prop:"pileTopCurrent",label:"\u6869\u7AEF\u7535\u6D41(A)",formatter:this.numFormatter},{prop:"maxCurrent",label:"\u6700\u5927\u7535\u6D41(A)",formatter:this.numFormatter},{prop:"downSpeed",label:"\u4E0B\u94BB\u901F\u5EA6(cm/min)",formatter:this.numFormatter},{prop:"upSpeed",label:"\u63D0\u94BB\u901F\u5EA6(cm/min)",formatter:this.numFormatter},{prop:"averageCurrent",label:"\u5E73\u5747\u7535\u6D41(A)",formatter:this.numFormatter},{prop:"maxDownSpeed",label:"\u6700\u5927\u94BB\u901F(cm/min)",formatter:this.numFormatter},{prop:"maxUpSpeed",label:"\u6700\u5927\u63D0\u901F(cm/min)",formatter:this.numFormatter},{prop:"xAngle",label:"\u6700\u5927\u659C\u5EA6(%)",formatter:this.num1Formatter},{prop:"pileTime",label:"\u6210\u6869\u65F6\u95F4(min)	",formatter:this.minFormatter},{prop:"tTypeLength",label:"\u6269\u5927\u5934\u6869\u957F(m)	",formatter:this.numFormatter},{prop:"tTypePulp",label:"\u6269\u5927\u5934\u6D46\u91CF(L)",formatter:this.numFormatter},{prop:"tTypeAsh",label:"\u6269\u5927\u5934\u7070\u91CF(kg)",formatter:this.numFormatter},{prop:"bottomPartPulp",label:"\u4E0B\u90E8\u6869\u6D46\u91CF(L)",formatter:this.numFormatter},{prop:"bottomPartAsh",label:"\u4E0B\u90E8\u6869\u7070\u91CF(kg)",formatter:this.numFormatter},{prop:"emDepth",label:"\u7A7A\u6405\u6DF1\u5EA6(m)",formatter:this.numFormatter},{prop:"warnreason",label:"\u9884\u8B66\u539F\u56E0"}],isIndeterminate:!1,dialogFormVisible:!1,cols:[{prop:"pileDescribe",label:"\u6869\u53F7"},{prop:"deviceKey",label:"\u8BBE\u5907\u7F16\u53F7"},{prop:"beginTime",label:"\u5F00\u59CB\u65F6\u95F4",formatter:this.testFormatter},{prop:"depth",label:"\u6869\u957F(m)",formatter:this.numFormatter},{prop:"cumulativeAsh",label:"\u7D2F\u8BA1\u7070\u91CF(kg)",formatter:this.numFormatter},{prop:"upSpeed",label:"\u63D0\u94BB\u901F\u5EA6(cm/min)",formatter:this.numFormatter},{prop:"downSpeed",label:"\u4E0B\u94BB\u901F\u5EA6(cm/min)",formatter:this.numFormatter},{prop:"warnreason",label:"\u9884\u8B66\u539F\u56E0"}],tempCols:[],centerDialogVisible:!1,data:[],selectItem:[],tab2:0,tab2List:[{name:"\u8BE6\u7EC6\u5185\u5BB9"},{name:"\u56FE\u8868\u66F2\u7EBF"}],config:{},depth:[],asherror:[],timeerror:[],checkedData:[],depthReport:[],pulpReport:{},ashReport:{},upspeed:{},downspeed:{},partcurrent:{},echartsAll:[]}},mounted(){H(9999,1,this.tab).then(t=>{this.deviceList=t.result.records}),T(this.tab,0,this.device,this.pageSize,this.pileDescribe).then(t=>{this.tableData=t.content,this.total=t.totalElements,this.warnReason()})},filters:{datafilters(t){return x(t*1e3).format("YYYY-MM-DD HH:mm:ss")},numfilters(t){return parseFloat(t).toFixed(2)},minfilters(t){return(parseFloat(t)/60).toFixed(2)},num1filters(t){return parseFloat(t).toFixed(2)},num2filters(t){return parseFloat(t).toFixed(3)},num3filters(t){return Math.abs(parseFloat(t).toFixed(2))},num5filters(t){return t<0?"\u63D0\u94BB":"\u4E0B\u94BB"},densityfilter(t){return t==0?t:parseFloat(1+1/(3*t+1)*2).toFixed(3)}},watch:{centerDialogVisible(t,l){if(t==!1){if(this.tab2=0,this.selectItem=[],this.data=[],this.upspeed=[],this.downspeed=[],this.ashReport=[],this.depthReport=[],this.partcurrent=[],this.myChart01==null)return;this.myChart01.dispose(),this.myChart02.dispose(),this.myChart03.dispose(),this.myChart04.dispose()}}},methods:{warnReason(){for(let t=0;t<this.tableData.length;t++)this.tableData[t].ashError>0&&(this.tableData[t].warnreason="\u7070\u91CF\u4E0D\u8DB3:"+(this.tableData[t].ashError*100).toFixed(2)+"%"),this.tableData[t].upSpeedError>0&&(this.tableData[t].warnreason="\u63D0\u901F\u8D85\u6807:"+(this.tableData[t].upSpeedError*100).toFixed(2)+"%"),this.tableData[t].downSpeedError>0&&(this.tableData[t].warnreason="\u94BB\u901F\u8D85\u6807:"+(this.tableData[t].downSpeedError*100).toFixed(2)+"%"),this.tableData[t].ashError>0&&this.tableData[t].upSpeedError>0&&this.tableData[t].downSpeedError>0&&(this.tableData[t].warnreason="\u7070\u91CF\u4E0D\u8DB3:"+(this.tableData[t].ashError*100).toFixed(2)+"%\u63D0\u901F\u8D85\u6807:"+(this.tableData[t].upSpeedError*100).toFixed(2)+"%\u94BB\u901F\u8D85\u6807:"+(this.tableData[t].downSpeedError*100).toFixed(2)+"%"),this.tableData[t].ashError>0&&this.tableData[t].upSpeedError>0&&this.tableData[t].downSpeedError<0&&(this.tableData[t].warnreason="\u7070\u91CF\u4E0D\u8DB3:"+(this.tableData[t].ashError*100).toFixed(2)+"%\u63D0\u901F\u8D85\u6807:"+(this.tableData[t].upSpeedError*100).toFixed(2)+"%"),this.tableData[t].ashError>0&&this.tableData[t].upSpeedError<0&&this.tableData[t].downSpeedError>0&&(this.tableData[t].warnreason="\u7070\u91CF\u4E0D\u8DB3:"+(this.tableData[t].ashError*100).toFixed(2)+"%\u94BB\u901F\u8D85\u6807:"+(this.tableData[t].downSpeedError*100).toFixed(2)+"%"),this.tableData[t].ashError<0&&this.tableData[t].upSpeedError>0&&this.tableData[t].downSpeedError>0&&(this.tableData[t].warnreason="\u63D0\u901F\u8D85\u6807:"+(this.tableData[t].upSpeedError*100).toFixed(2)+"%\u94BB\u901F\u8D85\u6807:"+(this.tableData[t].downSpeedError*100).toFixed(2)+"%")},backgroundColor(t,l,e,i){if(t.column.property=="upSpeed"){if(t.row.upSpeedError==0)return{color:"#ff3333"};if(t.row.upSpeedError>0)return{color:"#DAA520"}}if(t.column.property=="cumulativeAsh"){if(t.row.ashError==0)return{color:"#ff3333"};if(t.row.ashError>0)return{color:"#DAA520"}}if(t.column.property=="downSpeed"){if(t.row.downSpeedError==0)return{color:"#ff3333"};if(t.row.downSpeedError>0)return{color:"#DAA520"}}},checkall(){this.tableToExcel("statisticsTableRecord","-\u6405\u62CC\u6869-\u7EDF\u8BA1\u62A5\u8868")},downLoad(t){switch(t){case 0:{this.tableToExcel("statisticsTablePrint",x(this.selectItem.beginTime*1e3).format("YYYY-MM-DD")+"-\u6405\u62CC\u6869-\u6253\u5370\u7248");break}case 1:{this.tableToExcel("statisticsTable",x(this.selectItem.beginTime*1e3).format("YYYY-MM-DD")+"-\u6405\u62CC\u6869-\u7EFC\u5408\u7248");break}case 2:{this.tableToExcel("statisticsTabledetailed",x(this.selectItem.beginTime*1e3).format("YYYY-MM-DD")+"-\u6405\u62CC\u6869_\u8BE6\u7EC6\u7248");break}}},tableToExcel(t,l){let e="data:application/vnd.ms-excel;base64,",i='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--> <style type="text/css">table td {height: 25px;font-family: \u5B8B\u4F53;font-size: 13px;text-align: left;border: 0.5px solid #000000; }table .tHead {font-size: 20px;text-align:center;font-weight: bold;height: 40px; }table tfoot tr{height: 25px; }table tbody td{text-align: center;height: 20px;mso-number-format:"@"; }</style></head><body ><table class="excelTable">{table}</table></body></html>';t.nodeType||(t=document.getElementById(t));let h;t&&(h={worksheet:l||"Worksheet",table:t.innerHTML},document.getElementById("simulation").href=e+this.base64(this.format(i,h)),document.getElementById("simulation").download=l+".xls",document.getElementById("simulation").click())},base64(t){return window.btoa(unescape(encodeURIComponent(t)))},format(t,l){return t.replace(/{(\w+)}/g,function(e,i){return l[i]})},querychxun(){T("",0,this.device,this.pageSize,this.pileDescribe).then(t=>{this.tableData=t.content,this.total=t.totalElements,this.warnReason()})},resetClick(){this.device="",this.pileDescribe=""},testFormatter(t,l,e,i){return x(e*1e3).format("YYYY-MM-DD HH:mm:ss")},numFormatter(t,l,e,i){return parseFloat(e).toFixed(2)},minFormatter(t,l,e,i){return(parseFloat(e)/60).toFixed(0)},num1Formatter(t,l,e,i){return parseFloat(e).toFixed(2)+"%"},handleCheckAllChange(t){this.checkedFileds=t?W:[],this.isIndeterminate=!1},handleCheckedCitiesChange(t){let l=t.length;this.checkAll=l===this.fieldNames.length,this.isIndeterminate=l>0&&l<this.fieldNames.length},showData(t){this.dialogFormVisible=!0},confirmShow(){if(this.tempCols=[],this.checkedFileds.length<1)this.$message.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u9879\u6570\u636E"),this.dialogFormVisible=!0;else{for(var t=0;t<this.fieldNames.length;t++)for(var l=0;l<this.checkedFileds.length;l++)this.fieldNames[t].prop==this.checkedFileds[l]&&this.tempCols.push(this.fieldNames[t]);this.cols=this.tempCols,this.dialogFormVisible=!1}},initEchart01(){let t=this.data,l=this.selectItem.data.map((h,p)=>[t[p],h.partDeep]),e=this.selectItem.data.map((h,p)=>[t[p],h.partDensity.toFixed(3)+""]),i={title:{text:"\u6DF1\u5EA6\u3001\u5BC6\u5EA6\u66F2\u7EBF",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u5BC6\u5EA6"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6          ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"          \u5BC6\u5EA6",nameLocation:"end",inverse:!0,type:"value",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:l},{name:"\u5BC6\u5EA6",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:e}]};this.myChart01=I(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(i),this.echartsAll.push(this.myChart01)},initEchart02(){let t=this.data,l=this.selectItem.data.map((h,p)=>[t[p],h.partDeep]),e=this.selectItem.data.map((h,p)=>[t[p],h.partCurrent.toFixed(2)]),i={title:{text:"\u94BB\u6746\u6DF1\u5EA6\u7535\u6D41\u66F2\u7EBF",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u7535\u6D41"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6       ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"      \u7535\u6D41",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:l},{name:"\u7535\u6D41",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:e}]};this.myChart02=I(this.$refs.myChart02,null,{renderer:"svg"}),this.myChart02.setOption(i),this.echartsAll.push(this.myChart02)},initEchart03(){let t=this.data,l=this.selectItem.data.map((h,p)=>[t[p],(h.partPulp/h.partTime*60).toFixed(2)]),e=this.selectItem.data.map((h,p)=>[t[p],h.partDownSpeed.toFixed(2)]),i={title:{text:"\u6D41\u91CF\u3001\u901F\u5EA6\u53D8\u5316\u66F2\u7EBF",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6D41\u91CF","\u901F\u5EA6"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},xAxis:{type:"time",axisLabel:{interval:10,formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6D41\u91CF(L/min)",type:"value",nameLocation:"start",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]},max:100},{name:"\u901F\u5EA6(cm/min)      ",type:"value",nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6D41\u91CF",type:"line",showSymbol:!1,data:l},{name:"\u901F\u5EA6",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:e}]};this.myChart03=I(this.$refs.myChart03,null,{renderer:"svg"}),this.myChart03.setOption(i),this.echartsAll.push(this.myChart03)},initEchart04(){for(var t=[],l=0;l<this.selectItem.data.length;l++)t[Math.ceil(this.selectItem.data[l].partDeep-1)]==null&&(t[Math.ceil(this.selectItem.data[l].partDeep-1)]=0),t[Math.ceil(this.selectItem.data[l].partDeep-1)]+=this.selectItem.data[l].partAsh;var e=t.map(i);function i(p,w,m){var c={value:Number(p.toFixed(2)),name:w+1};return c}let h={title:{text:"\u6210\u6869\u7070\u91CF\u5206\u5E03",textStyle:{color:"#101D34",fontSize:16},left:"2.2%",top:"5%"},tooltip:{trigger:"item",formatter:"{a} : {c}"},grid:{top:"10%",bottom:"10%"},series:[{name:"\u6210\u6869\u7070\u91CF\u5206\u5E03",type:"funnel",width:"50%",left:"center",top:"15%",bottom:"8%",label:{show:!0},labelLine:{show:!0},data:e,sort:"none",color:"#5470c6"}]};this.myChart04=I(this.$refs.myChart04,null,{renderer:"svg"}),this.myChart04.setOption(h)},changeHandle(t){let l=this;this.tab2=t,t===1&&this.$nextTick(()=>{this.initEchart01(),this.initEchart02(),this.initEchart03(),Y(this.echartsAll),this.initEchart04(),window.onresize=function(){l.myChart01.resize(),l.myChart02.resize(),l.myChart03.resize(),l.myChart04.resize()}})},handleCommand(t){this.selectItem=this.tableData[t],this.centerDialogVisible=!0;var l=this.selectItem.beginTime,e,i=[],h=[],p=[],w=[],m=[],c=[];let d=new Map,v=new Map;for(var o=0;o<this.tableData[t].data.length;o++){l+=this.tableData[t].data[o].partTime,e=x(l*1e3).format("YYYY-MM-DD HH:mm:ss"),this.data.push(e),this.tableData[t].data[o].partDeep!=0&&this.depthReport.push(Math.ceil(this.tableData[t].data[o].partDeep));for(var y=0;y<this.depthReport.length;y++)for(var b=y+1;b<this.depthReport.length;b++)this.depthReport[y]==this.depthReport[b]&&(this.depthReport.splice(b,1),b--);if(this.tableData[t].data[o].partDeep==Math.floor(this.tableData[t].data[o].partDeep)+.25){let s={key:Math.floor(this.tableData[t].data[o].partDeep)+.25,value:Number(this.tableData[t].data[o].partPulp)};i.push(s);var _={};i.forEach(n=>{_[n.key]?_[n.key]+=n.value:_[n.key]=n.value})}if(this.tableData[t].data[o].partDeep==Math.floor(this.tableData[t].data[o].partDeep)+.5){let s={key:Math.floor(this.tableData[t].data[o].partDeep)+.5,value:Number(this.tableData[t].data[o].partPulp.toFixed(2))};h.push(s);var g={};h.forEach(n=>{g[n.key]?g[n.key]+=n.value:g[n.key]=n.value})}if(this.tableData[t].data[o].partDeep==Math.floor(this.tableData[t].data[o].partDeep)+.75){let s={key:Math.floor(this.tableData[t].data[o].partDeep)+.75,value:Number(this.tableData[t].data[o].partPulp.toFixed(2))};p.push(s);var u={};p.forEach(n=>{u[n.key]?u[n.key]+=n.value:u[n.key]=n.value})}if(this.tableData[t].data[o].partDeep==Math.floor(this.tableData[t].data[o].partDeep)){let s={key:Math.floor(this.tableData[t].data[o].partDeep),value:Number(this.tableData[t].data[o].partPulp.toFixed(2))};w.push(s);var f={};w.forEach(n=>{f[n.key]?f[n.key]+=n.value:f[n.key]=n.value})}if(m[Math.ceil(this.tableData[t].data[o].partDeep-1)]==null&&(m[Math.ceil(this.tableData[t].data[o].partDeep-1)]=0),m[Math.ceil(this.tableData[t].data[o].partDeep-1)]+=Number(this.tableData[t].data[o].partAsh.toFixed(2)),c[Math.ceil(this.tableData[t].data[o].partDeep-1)]==null&&(c[Math.ceil(this.tableData[t].data[o].partDeep-1)]=0),c[Math.ceil(this.tableData[t].data[o].partDeep-1)]=Number(this.tableData[t].data[o].partCurrent.toFixed(2)),this.tableData[t].data[o].partDeep>0&&this.tableData[t].data[o].partDownSpeed>0)if(d.get(Math.ceil(this.tableData[t].data[o].partDeep))==null){let s=[];s.push(this.tableData[t].data[o].partDownSpeed),d.set(Math.ceil(this.tableData[t].data[o].partDeep),s)}else{let s=d.get(Math.ceil(this.tableData[t].data[o].partDeep));s.push(this.tableData[t].data[o].partDownSpeed),d.set(Math.ceil(this.tableData[t].data[o].partDeep),s)}if(this.tableData[t].data[o].partDownSpeed<0)if(v.get(Math.ceil(this.tableData[t].data[o].partDeep))==null){let s=[];s.push(this.tableData[t].data[o].partDownSpeed),v.set(Math.ceil(this.tableData[t].data[o].partDeep),s)}else{let s=v.get(Math.ceil(this.tableData[t].data[o].partDeep));s.push(this.tableData[t].data[o].partDownSpeed),v.set(Math.ceil(this.tableData[t].data[o].partDeep),s)}}var S=[];for(let s=0;s<c.length;s++){let n={key:s,value:c[s]};S.push(n)}S.forEach(s=>{this.partcurrent[s.key]?this.partcurrent[s.key]+=s.value:this.partcurrent[s.key]=s.value});var D=[];v.forEach(function(s){D.push(s)});var C=[],k=0;for(let s=0;s<D.length;s++){for(let F=0;F<D[s].length;F++)k+=D[s][F];let n=Math.abs((k/D[s].length).toFixed(2));C.push(n),k=0}C=C.reverse();var E=[];for(let s=0;s<C.length;s++){let n={key:s,value:C[s]};E.push(n)}E.forEach(s=>{this.upspeed[s.key]?this.upspeed[s.key]+=s.value:this.upspeed[s.key]=s.value});var a=[];d.forEach(function(s){a.push(s)});var r=[],A=0;for(let s=0;s<a.length;s++){for(let F=0;F<a[s].length;F++)A+=a[s][F];let n=Number((A/a[s].length).toFixed(2));r.push(n),A=0}var M=[];for(let s=0;s<r.length;s++){let n={key:s,value:r[s]};M.push(n)}M.forEach(s=>{this.downspeed[s.key]?this.downspeed[s.key]+=s.value:this.downspeed[s.key]=s.value});var L=[];for(let s=0;s<m.length;s++){let n={key:s,value:m[s]};L.push(n)}L.forEach(s=>{this.ashReport[s.key]?this.ashReport[s.key]+=s.value:this.ashReport[s.key]=s.value}),this.depthReport.unshift(0),this.depthReport.splice(this.depthReport.length-1,1),this.pulpReport=Object.assign(_,g,u,f)},selectionChange(t){this.checkedData=t.reverse();var l=[];for(let a=0;a<t.length;a++)l.push(t[a].data);var e=[],i=[],h=[],p=[];for(let a=0;a<l.length;a++){for(let r=0;r<l[a].length;r++)l[a][r].partDownSpeed>0&&e.push([l[a][r].partDeep,l[a][r].partTime,l[a][r].partDownSpeed]),l[a][r].partDownSpeed<0&&p.push([l[a][r].partDeep,l[a][r].partTime,l[a][r].partDownSpeed]);i.push(e),h.push(p),p=[],e=[]}var w=[];for(let a=0;a<i.length;a++){for(let r=1;r<i[a].length;r++)if(i[a][r-1][0]>i[a][r][0])var m=r;(m==0||m==null)&&(m=i[a].length),w.push(m),m=0}var c=[],d=[];for(let a=0;a<i.length;a++)c.push(i[a].slice(0,w[a])),d.push(i[a].slice(w[a]));var v=0,o=0;for(let a=0;a<c.length;a++){for(let r=0;r<c[a].length;r++)v+=c[a][r][1],o+=c[a][r][1]*c[a][r][2];o/v=="Infinity"||c[a].length==0?this.checkedData[a].speed1=0:this.checkedData[a].speed1=(o/v).toFixed(2),v=0,o=0}var y=0,b=0;for(let a=0;a<d.length;a++){for(let r=0;r<d[a].length;r++)y+=d[a][r][1],b+=d[a][r][1]*d[a][r][2];b/y=="Infinity"||d[a].length==0?this.checkedData[a].speed2=0:this.checkedData[a].speed2=(b/y).toFixed(2),y=0,b=0}var _=[];for(let a=0;a<h.length;a++){for(let r=1;r<h[a].length;r++)if(h[a][r-1][0]<h[a][r][0])var g=r;(g==0||g==null)&&(g=h[a].length),_.push(g),g=0}var u=[],f=[];for(let a=0;a<h.length;a++)u.push(h[a].slice(0,_[a])),f.push(h[a].slice(_[a]));var S=0,D=0;for(let a=0;a<u.length;a++){for(let r=0;r<u[a].length;r++)S+=u[a][r][1],D+=u[a][r][1]*u[a][r][2];D/S=="Infinity"||u[a].length==0?this.checkedData[a].speed3=0:this.checkedData[a].speed3=Math.abs((D/S).toFixed(2)),S=0,D=0}var C=0,k=0;for(let a=0;a<f.length;a++){for(let r=0;r<f[a].length;r++)C+=f[a][r][1],k+=f[a][r][1]*f[a][r][2];k/C=="Infinity"||f[a].length==0?this.checkedData[a].speed4=0:this.checkedData[a].speed4=Math.abs((k/C).toFixed(2)),C=0,k=0}this.checkedData.startDate=x(this.checkedData[0].beginTime*1e3).format("YYYY-MM-DD HH:mm:ss"),this.checkedData.endDate=x(this.checkedData[this.checkedData.length-1].endTime*1e3).format("YYYY-MM-DD HH:mm:ss"),this.checkedData.milePartNo=this.checkedData[this.checkedData.length-1].milePartNo,this.checkedId=[];for(var E=0;E<t.length;E++)this.checkedId.push(t[E]._id);t.length==this.tableData.length?this.totalChecked=!0:this.totalChecked&&(this.totalChecked=!1)},totalChange(t){t?(this.$refs.table.clearSelection(),this.$refs.table.toggleAllSelection()):this.$refs.table.clearSelection()},handleSizeChange(t){const l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.pageSize=t,T(this.tab,0,this.device,this.pageSize,this.pileDescribe).then(e=>{this.tableData=e.content,this.total=e.totalElements,this.warnReason(),l.close()}),setTimeout(()=>{l.close()},6e3)},handleCurrentChange(t){const l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.currentPage=t,T(this.tab,this.currentPage-1,this.device,this.pageSize,this.pileDescribe).then(e=>{this.tableData=e.content,this.total=e.totalElements,this.warnReason(),l.close()}),setTimeout(()=>{l.close()},6e3)},toFirstPage(){this.handleCurrentChange(1)},toLastPage(){this.handleCurrentChange(Math.ceil(this.total/this.pageSize))}}},P={};var O=z(j,$,V,!1,B,"00538f19",null,null);function B(t){for(let l in P)this[l]=P[l]}var Q=function(){return O.exports}();export{Q as default};
