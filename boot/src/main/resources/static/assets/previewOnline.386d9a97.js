import{g as d}from"./gTabs.5d419200.js";import{e as h,p as u,d as f,b as v,c as I,f as U,q as w}from"./api.14e937c3.js";import{h as o,i as p}from"./moment.fa453fbd.js";import{b as S}from"./b4.8568b0da.js";import{_ as g,a as _,b as C,c as b,d as j}from"./c-i1.7c1a6071.js";import{n as m}from"./index.0cb1b95f.js";/* empty css                                                          */var W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABy0lEQVRIie3Wu2sVQRSA8V8cxX9BMDAp0mijBBvBx1WwnYB2okgU7MQHWIhFMASbiFpZWJiIveAWNoLEB1ho4W20EXQKQaxsJSyxuBu4XHT33rBJIfmaw545e76Z2WUYttgkxuoGc84ghrQNFzCP57ksZtZqYkiLWM5l8bj/3RhjrXh708xiSB3cx75/THasaQEji2NIT3Bm1KbDsK1h/MRGSIcR78ciVvuTMaSJGFInhjRRpQ7GkHa2Js5l8SOXxXkcwJu+oSO4UkW4iM8xpJPDiof6q9eIIc1jHNexG9+xgHN9Za9w2Xi3W9e7aasH+VLF01iq4iBH8bap0ajiNR6gU8VBVnB3o8Q38K2K/TzD3lwWs00NGg+Qv5HLYg5zEENawidcymXxctge6xLHkGZxFfeq1MIoUkbY6hjScb2/GW5joorrYpizehJ3MF2l3ueyWMGvanxd4toVx5Bu6X2/6bq61sW4hh1tS4cRH9I7iZqYbFWcy6Kby6KDU/haU3ozhvQ6hjTVirhvAk+xBw9ryg7jQwzpUQxpVyviSv4b7xrKxjCDj62JR+TFZou7OJbL4mzb4lUDt5Hq+afeZWAql8XyiD23+E/5A0HPcluNPvyEAAAAAElFTkSuQmCC",K=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name",attrs:{title:s.name}},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u94BB\u6746\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"pipeStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u6D46\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"nozzleStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalSlurry"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalSlurry!=null?"(L)":""))])])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalAsh"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalAsh!=null?"(kg)":""))])])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{ref:"barparent",staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),e.pile.length==1?t("div",{staticClass:"value"},[e._v(" "+e._s(e.pile[0].pileDescribe||"")+" ")]):e._e(),e.pile.length==0?t("div",{staticClass:"value"},[e._v("--")]):e._e(),e.pile.length>1?t("el-select",{staticClass:"btnpile",model:{value:e.defaultpile,callback:function(s){e.defaultpile=s},expression:"defaultpile"}},e._l(e.pile,function(s){return t("el-option",{key:s.index,attrs:{label:s.pileDescribe,value:s.pileId}})}),1):e._e()],1),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])]),t("li",{class:e.pipeStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])]),t("li",{class:e.nozzleStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("sta2filters")(e.real.nozzleStatus)))])])])])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6C34\u7070\u6BD4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.waterCementRatio)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u5BC6\u5EA6")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.density,3)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v(e._s(e.designDownSpeed)+" cm/min")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v(e._s(e.designUpSpeed)+" cm/min")])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u6D41\u91CF\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6301\u7EED\u65F6\u957F(min)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e.real.lasttime))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u6D46\u91CF(L)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalSlurry,1)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u7070\u91CF(kg)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalAsh,1)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6BB5\u6D46\u91CF(L)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.partSlurry,1)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6BB5\u7070\u91CF(kg)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.partAsh,1)))])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),e.real.current!=-9999?t("p",[e._v(" \u7535\u6D41"),t("em",[e._v(e._s(e._f("numfilters")(e.real.current))+"(A)")])]):e._e(),e.real.flow!=-9999?t("p",[e._v(" \u6D41\u91CF"),t("em",[e._v(e._s(e._f("numfilters")(e.real.flow))+"(L/min)")])]):e._e(),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"})])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},E=[];const R={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:S,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,designDepth:30,designUpSpeed:"-",designDownSpeed:"-",image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"\u505C\u94BB",timer:null,deviceKey:"",pileId:"",fields:"",pile:[{pileDescribe:"--",pileId:""}],defaultpile:"",real:{current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:100,y:0,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}],ispileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("HH:mm:ss")},numfilters(e,i){return i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i)},startTimefilters(e){return e?e.startTime==null?"-":e.startTime:"-"},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},sta2filters(e){switch(e){case"1":return"\u55B7\u6D46";case"0":return"\u6B62\u55B7";default:return e}},pilefilter(e){return e==null?"--":e}},watch:{centerDialogVisible1(e,i){this.tab2=0,this.timer&&clearInterval(this.timer),e==!1&&(this.datachange(),this.videonull())}},methods:{datachange(){this.ispileIds=!0,this.designDepth=30,this.pile=[],this.defaultpile="",this.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},closePop(e){this[e]=!1},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(this.getOption1(e,this.deep,this.flow))},getOption1(e,i,t){return{title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:24},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u6D41\u91CF"]},grid:{top:"23%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m    ",type:"value",nameLocation:"end",inverse:!0,max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"\u6D41\u91CF(L/min)",type:"value",nameLocation:"start",inverse:!1,max:120,min:0,nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:i,markPoint:{data:[{type:"max"}]}},{name:"\u6D41\u91CF",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:t}]}},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getdata(),this.videonull()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history"),this.videonull(),clearInterval(this.timer)),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo"),this.videonull(),clearInterval(this.timer)),e==3&&(clearInterval(this.timer),this.datachange(),this.video())},getPileIds(){u(this.selectItem.key).then(e=>{if(e!=null){this.pile=e;let t=!0;for(var i=0;i<this.pile.length;i++)this.defaultpile==this.pile[i].pileId&&(this.defaultpile=this.pile[i].pileId,this.ispileIds=!1,t=!1);t&&(this.defaultpile=this.pile[0].pileId,this.ispileIds=!1)}})},getdata(){f(this.selectItem.key,this.defaultpile,"realTime,flow,deep,pipeStatus").then(e=>{const i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var t=0;t<e.length;t++){let a=o(e[t].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),l=[],r=[];l.push(a,e[t].flow.toFixed(2)),r.push(a,e[t].deep.toFixed(2)),this.flow.push(l),this.deep.push(r)}this.initEchart01(!1);var s=e[e.length-1];s!=null&&(s.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):s.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):s.pipeStatus=="3"?this.pileStatusStr="\u4E0B\u94BB":s.pipeStatus=="4"&&this.pilefilter=="\u63D0\u94BB",this.depth=s.deep,this.myFun(s.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.defaultpile).then(a=>{if(a!=null){this.ispileIds==!0&&this.getPileIds(),this.real=a,this.coordinates.center=[this.real.longitude,this.real.latitude],this.coordinates.position=[this.real.longitude,this.real.latitude],this.setAngle(this.real.xAngle,this.real.yAngle),this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.ispileIds=!0,this.recordStatusClass="",this.real.deep="--",this.real.speed="--",this.real.current="--",this.real.flow="--"),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth?(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"):this.pipeStatusClass="",this.depth=this.real.deep,this.real.nozzleStatus==0?this.nozzleStatusClass="":this.nozzleStatusClass="on";let l=o(a.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if((this.flow.length==0||this.flow[this.flow.length-1][0]!==l)&&a.flow!=="--"){let r=[],n=[];r.push(l,a.flow.toFixed(2)),n.push(l,a.deep.toFixed(2)),this.flow.push(r),this.deep.push(n),this.myChart01.setOption(this.getOption1(!1,this.deep,this.flow))}this.real.lasttime=((a.realTime-a.startTime)/60).toFixed(0),this.myFun(this.real.deep)}else this.ispileIds=!0,this.designDepth=30,this.pile=[],this.defaultpile="",this.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.image="stop",this.myChart01.setOption(this.getOption1(!0,this.deep,this.flow)),this.myFun(this.real.deep);i.close()})},3e3),setTimeout(()=>{i.close()},6e3)})},video(){this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.playerOptions=[];for(let e=0;e<this.cameraLive.length;e++){let i={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[e].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(i)}},videonull(){this.playerOptions=[{sources:[{type:"application/x-mpegURL",src:""}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5"}]},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];switch(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive!=null&&(this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.videonull()),this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=S:this.coordinates.icon=W),this.index=t,s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getPileIds(),this.getdata(),this.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"-":JSON.parse(this.selectItem.content).designUpSpeed,this.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"-":JSON.parse(this.selectItem.content).designDownSpeed;break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},myFun(e){var i=this;i.y=Number(e).toFixed(2),this.designDepth=JSON.parse(this.selectItem.content).designDepth==null?30:JSON.parse(this.selectItem.content).designDepth+5,i.ztTop=100-e/this.designDepth*98+"%"}}},x={};var q=m(R,K,E,!1,G,"74b77c90",null,null);function G(e){for(let i in x)this[i]=x[i]}var Z=function(){return q.exports}(),B=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u6D46\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime||"","nozzleStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime||"","totalSlurry"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalSlurry!=null?"(L)":""))])])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime||"","totalAsh"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalAsh!=null?"(kg)":""))])])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",[t("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u901A\u9053")]),e.pile.length==1?t("div",{staticClass:"value"},[e._v(e._s(e.pile[0].pileDescribe||""))]):e._e(),e.pile.length==0?t("div",{staticClass:"value"},[e._v("--")]):e._e(),e.pile.length>1?t("el-select",{staticClass:"btnpile",model:{value:e.defaultpile,callback:function(s){e.defaultpile=s},expression:"defaultpile"}},e._l(e.pile,function(s){return t("el-option",{key:s.index,attrs:{label:s.channelId,value:s.pileId}})}),1):e._e()],1),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])])])]),t("div",{staticStyle:{clear:"both"}})])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u5B54\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.real.pileDescribe))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6C34\u7070\u6BD4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.waterAsh)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u704C\u6D46\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("modefilters")(e.real.processMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u53C2\u6570\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("parfilters")(e.real.paramType)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u704C\u6D46\u65B9\u6CD5")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("metfilters")(e.real.processMethod)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",[e._v(e._s(e.real.lasttime)+"\u5206\u949F")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u5CF0\u503C\u538B\u529B")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.pressurePeak))+"mpa")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.totGrout))+"L")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.totAsh))+"kg")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u5355\u4F4D\u6D46\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.perGrout))+"L")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u5355\u4F4D\u7070\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.perAsh))+"kg")])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6CE8\u6D46\u538B\u529B\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top",staticStyle:{height:"50px"}},[t("h2",[e._v("\u5B9E\u65F6\u6570\u636E")])]),t("div",{staticClass:"item_bottom_out"},[t("div",{staticClass:"item_bottomL"},[t("h3",[e._v("\u6CE8\u6D46L/min")]),t("b",{staticClass:"item_b"},[e._v(e._s(e._f("numfilters")(e.real.flow)))])]),t("div",{staticClass:"item_bottomL"},[t("h3",[e._v("\u8FDB\u6D46L/min")]),t("b",{staticClass:"item_b"},[e._v(e._s(e._f("numfilters")(e.real.flowIn)))])]),t("div",{staticClass:"item_bottomL"},[t("h3",[e._v("\u8FD4\u6D46L/min")]),t("b",{staticClass:"item_b"},[e._v(e._s(e._f("numfilters")(e.real.flowOut)))])]),t("div",{staticClass:"item_bottomL"},[t("h3",[e._v("\u538B\u529Bmpa")]),t("b",{staticClass:"item_b"},[e._v(e._s(e._f("numfilters")(e.real.pressure)))])]),t("div",{staticClass:"item_bottomL"},[t("h3",[e._v("\u5BC6\u5EA6g/cm\xB3")]),t("b",{staticClass:"item_b"},[e._v(e._s(e._f("numfilters")(e.real.density)))])])]),t("div",{staticStyle:{width:"100%",height:"50%"}},[t("div",{ref:"sirclemyChart01",style:{width:"33%",height:"100%",float:"left"}}),t("div",{ref:"sirclemyChart02",style:{width:"33%",height:"100%",float:"left"}}),t("div",{ref:"sirclemyChart03",style:{width:"33%",height:"100%",float:"left"}}),t("div",{staticStyle:{clear:"both"}})])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:" sizes,slot, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot,jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},X=[];const Q={components:{gTabs:d},props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data(){return{coordinates:{center:[0,0],zoom:14,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b10.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,bottomLdata:[],recordStatusClass:"",timer:null,deviceKey:"",pileId:"",pile:[{channelId:"--",pileId:""}],defaultpile:"",real:{channelId:2,density:0,densityAsh:0,densitySand:0,densityStuff1:0,densityStuff2:0,densityStuff3:0,deviceKey:"-",disAsh:-9999,disGrout:-9999,flow:0,flowIn:0,flowOut:0,holeLatitude:0,holeLongitude:0,latitude:0,lifting:0,longitude:0,nozzleStatus:0,paramType:"",partDescribe:"0",perAsh:0,perGrout:0,pileDescribe:"1",pileId:0,pressure:0,pressurePeak:0,processMethod:"",processMode:"",realTime:0,recordStatus:0,rssi4G:0,rssiLORA:0,sandAsh:0,startTime:0,totAsh:0,totGrout:0,version:"1.00",waterAsh:0,waterRate:0,xash1:0,xash2:0,xash3:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},o1filters(e){return e==null?"-":e},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},numfilters(e){return parseFloat(e).toFixed(2)},stafilters(e){switch(e){case 1:return"\u8BB0\u5F55\u4E2D";case 2:return"\u6682\u505C";case 0:return"\u7ED3\u675F";default:return e}},parfilters(e){return e==0?"\u4E8C\u53C2\u6570":e==1?"\u4E09\u53C2\u6570":e==2?"\u56DB\u53C2\u6570":"-"},metfilters(e){return e==0?"\u5927\u5FAA\u73AF":e==1?"\u5C0F\u5FAA\u73AF":"-"},modefilters(e){return e==0?"\u704C\u6D46\u65BD\u5DE5\u8BB0\u5F55":e==1?"\u5C01\u5B54\u65BD\u5DE5\u8BB0\u5F55":e==2?"\u7B80\u6613\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==3?"\u5355\u70B9\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==4?"\u4E94\u70B9\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==5?"\u88C2\u9699\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==6?"\u5E37\u5E55\u704C\u6D46":e==7?"\u56FA\u7ED3\u704C\u6D46":e==8?"\u5CA9\u6EB6\u6CE8\u6D46":"-"}},watch:{centerDialogVisible1(e,i){e==!1&&(this.watchData(),this.timer&&clearInterval(this.timer))}},methods:{watchData(){this.ispileIds=!0,this.pile=[],this.defaultpile="",this.real={channelId:2,density:0,densityAsh:0,densitySand:0,densityStuff1:0,densityStuff2:0,densityStuff3:0,deviceKey:"-",disAsh:-9999,disGrout:-9999,flow:0,flowIn:0,flowOut:0,holeLatitude:0,holeLongitude:0,latitude:0,lifting:0,longitude:0,nozzleStatus:0,paramType:"",partDescribe:"0",perAsh:0,perGrout:0,pileDescribe:"1",pileId:0,pressure:0,pressurePeak:0,processMethod:"",processMode:"",realTime:0,recordStatus:0,rssi4G:0,rssiLORA:0,sandAsh:0,startTime:0,totAsh:0,totGrout:0,version:"1.00",waterAsh:0,waterRate:0,xash1:0,xash2:0,xash3:0},this.flow=[],this.deep=[],!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),!(this.sirclemyChart01===void 0||this.sirclemyChart01._disposed)&&this.sirclemyChart01.dispose())},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6CE8\u6D46","\u538B\u529B"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6CE8\u6D46 ",type:"value",inverse:!1,nameLocation:"start",nameGap:20,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" \u538B\u529B",type:"value",inverse:!1,nameLocation:"start",nameGap:20,max:10,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6CE8\u6D46",type:"line",showSymbol:!1,data:this.deep},{name:"\u538B\u529B",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},sircleEchart01(){let e={tooltip:{formatter:"{b} : {c}"},series:[{name:"Pressure",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}",fontSize:15},max:300,radius:"100%",data:[{value:this.real.flow.toFixed(2),name:"\u6CE8\u6D46"}]}]};this.sirclemyChart01=p(this.$refs.sirclemyChart01,null,{renderer:"svg"}),this.sirclemyChart01.setOption(e)},sircleEchart02(){let e={tooltip:{formatter:"{b} : {c}"},series:[{name:"Pressure",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}",fontSize:16},max:300,radius:"100%",data:[{value:this.real.flowIn.toFixed(2),name:"\u8FDB\u6D46"}]}]};this.sirclemyChart02=p(this.$refs.sirclemyChart02,null,{renderer:"svg"}),this.sirclemyChart02.setOption(e)},sircleEchart03(){let e={tooltip:{formatter:"{b} : {c}"},series:[{name:"Pressure",type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}",fontSize:16},max:300,radius:"100%",data:[{value:this.real.flowOut.toFixed(2),name:"\u8FD4\u6D46"}]}]};this.sirclemyChart03=p(this.$refs.sirclemyChart03,null,{renderer:"svg"}),this.sirclemyChart03.setOption(e)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&this.timer&&(clearInterval(this.timer),this.watchData())},getpileIds(){u(this.selectItem.key).then(e=>{if(e!=null){this.pile=e;let t=!0;for(var i=0;i<this.pile.length;i++)this.defaultpile==this.pile[i].pileId&&(this.defaultpile=this.pile[i].pileId,this.ispileIds=!1,t=!1);t&&(this.defaultpile=this.pile[0].pileId,this.ispileIds=!1)}})},getData(){f(this.selectItem.key,this.defaultpile,"realTime,pressure,flow").then(e=>{const i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var t=0;t<e.length;t++){let s=o(e[t].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),a=[],l=[];a.push(s,e[t].pressure.toFixed(2)),l.push(s,e[t].flow.toFixed(2)),this.flow.push(a),this.deep.push(l)}this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.timer=setInterval(()=>{v(this.selectItem.key,this.defaultpile).then(s=>{if(s!=null){this.ispileIds==!0&&this.getpileIds(),this.real=s,this.coordinates.center=[this.real.longitude,this.real.latitude],this.coordinates.position=[this.real.longitude,this.real.latitude],this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0);let a=o(s.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow[this.flow.length-1][0]!=a){let l=[],r=[];l.push(a,s.pressure.toFixed(2)),r.push(a,s.flow.toFixed(2)),this.flow.push(l),this.deep.push(r),this.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0)}this.initEchart01(!1),this.sircleEchart01(),this.sircleEchart02(),this.sircleEchart03()}else this.ispileIds=!0,this.initEchart01(!0);i.close()})},3e3),setTimeout(()=>{i.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=require("@/assets/images/map/b10.png"):this.coordinates.icon=require("@/assets/images/map/a9.png")),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{this.sircleEchart01(),this.sircleEchart02(),this.sircleEchart03(),window.onresize=function(){i.myChart01.resize()}}),this.getpileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},k={};var ee=m(Q,B,X,!1,te,"11004a90",null,null);function te(e){for(let i in k)this[i]=k[i]}var se=function(){return ee.exports}(),ie=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u94BB\u6746\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"pipeStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u6D46\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"nozzleStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalSlurry"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalSlurry!=null?"(L)":""))])])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalAsh"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalAsh!=null?"(kg)":""))])])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pilefilter")(e.pile.pileDescribe)))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])]),t("li",{class:e.pipeStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])]),t("li",{class:e.nozzleStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("sta2filters")(e.real.nozzleStatus)))])])])])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6C34\u7070\u6BD4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.waterCementRatio)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("recordfilters")(e.real.recordMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u55B7\u5C04\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pumpfilters")(e.real.pumpMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u55B7\u5C04\u538B\u529B")]),t("div",{staticClass:"value"},[e._v("- mpa")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v(e._s(e.designUpSpeed)+" cm/min")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u95F4\u9694")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("intervalfilters")(e.real)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u94BB\u6746\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pipfilters")(e.real.pipeMode)))])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6D46\u91CF\u3001\u6D46\u538B\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",{staticClass:"item_center"},[e._v(e._s(e.real.lasttime)+" min")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u55B7\u5C04\u65F6\u957F")]),t("b",{staticClass:"item_center"},[e._v("- min")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalPulp,1))+" L")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalAsh,1))+" kg")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u6C34\u91CF")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalWater,1))+" L")])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u6D41\u91CF"),t("em",[e._v(e._s(e._f("numfilters")(e.real.pulp))+"(L/min)")])]),t("p",[e._v("\u538B\u529B"),t("em",[e._v(e._s(e._f("numfilters")(e.real.pulpPressure))+"(Mpa)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},ae=[];const le={components:{gTabs:d},props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,designUpSpeed:"-",recordStatusClass:"",pipeStatusClass:"",nozzleStatusClass:"",depth:0,pileStatusStr:"\u505C\u94BB",image:"stop",pagecount:100,timer:null,deviceKey:"",pileId:"",pile:[],real:{air:0,airPressure:0,deep:0,density:0,deviceKey:"-",latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partPulp:0,pileDescribe:"-",pileId:0,pipeMode:"",pipeStatus:"0",pulp:0,pulpPressure:0,pumpMode:"",realTime:0,recodeInterval:0,recordMode:"0",recordStatus:"3",returnPulp:0,returnPulpPressure:0,rotateSpeed:0,signal4g:23,signalLora:0,speed:0,startTime:0,totalAir:0,totalAsh:0,totalPulp:0,totalReturnPulp:0,totalWater:0,version:"0",vertical:0,water:0,waterCementRatio:0,waterPressure:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],isPileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},startTimefilters(e){return e?e.startTime==null?"-":e.startTime:"-"},pilefilter(e){return e==null?"--":e},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("HH:mm:ss")},pulpfilters(e){},numfilters(e,i){return i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i)},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},sta1filters(e){return e=="1"?"\u4E0B\u94BB":e=="2"?"\u63D0\u94BB":e=="3"?"\u590D\u4E0B":e=="4"?"\u590D\u63D0":"\u505C\u6B62"},sta2filters(e){switch(e){case"1":return"\u55B7\u6D46";case"0":return"\u6B62\u55B7";default:return e}},recordfilters(e){switch(e){case"1":return"\u6DF1\u5EA6\u6A21\u5F0F";case"2":return"\u65F6\u95F4\u6A21\u5F0F";case"0":return"-";default:return e}},intervalfilters(e){switch(e.recordMode){case"1":return e.recodeInterval+"cm";case"2":return e.recodeInterval+"s";case"0":return"-";default:return e}},pumpfilters(e){if(e=="1")return"\u5355\u7BA1";if(e=="2")return"\u4E8C\u91CD\u7BA1";if(e=="3")return"\u4E09\u91CD\u7BA1";if(e=="")return"-"},pipfilters(e){return e=="1"?"\u5355\u6746":e=="2"?"\u63A5\u6746":"-"}},watch:{centerDialogVisible1(e,i){e==!1&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData(){this.isPileIds=!0,this.pile=[],this.real={air:0,airPressure:0,deep:0,density:0,deviceKey:"-",latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partPulp:0,pileDescribe:"-",pileId:0,pipeMode:"",pipeStatus:"0",pulp:0,pulpPressure:0,pumpMode:"",realTime:0,recodeInterval:0,recordMode:"0",recordStatus:"3",returnPulp:0,returnPulpPressure:0,rotateSpeed:0,signal4g:23,signalLora:0,speed:0,startTime:0,totalAir:0,totalAsh:0,totalPulp:0,totalReturnPulp:0,totalWater:0,version:"0",vertical:0,water:0,waterCementRatio:0,waterPressure:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(this.getOption1(e,this.deep,this.flow))},getOption1(e,i,t){return{title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"45%"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6D46\u91CF","\u6D46\u538B"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6D46\u91CF ",type:"value",inverse:!1,nameLocation:"start",max:80,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" \u6D46\u538B",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6D46\u91CF",type:"line",showSymbol:!1,data:t},{name:"\u6D46\u538B",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:i}]}},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getPileId(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.isPileIds=!1)})},getData(){let e=this;f(this.selectItem.key,this.pileId,"realTime,pulp,pulpPressure,pipeStatus").then(i=>{const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var s=0;s<i.length;s++){let l=o(i[s].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),r=[],n=[];r.push(l,i[s].pulp.toFixed(2)),n.push(l,i[s].pulpPressure.toFixed(2)),this.flow.push(r),this.deep.push(n)}this.initEchart01(!1);var a=i[i.length-1];a!=null&&(a.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):a.pipeStatus=="3"?this.pileStatusStr="\u4E0B\u94BB":a.pipeStatus=="4"&&this.pilefilter=="\u63D0\u94BB",this.depth=a.deep,e.myFun(a.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(l=>{if(l!=null){this.isPileIds==!0&&this.getPileId(),this.real=l,this.setAngle(this.real.xAngle,this.real.yAngle),this.coordinates.position=[this.real.longitude,this.real.latitude],this.coordinates.center=[this.real.longitude,this.real.latitude],this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.isPileIds=!0),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth?(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"):this.pipeStatusClass="",this.depth=this.real.deep,this.real.nozzleStatus==0?this.nozzleStatusClass="":this.nozzleStatusClass="on";let r=o(l.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow[this.flow.length-1][0]!=r){let n=[],c=[];n.push(r,l.pulp.toFixed(2)),c.push(r,l.pulpPressure.toFixed(2)),this.flow.push(n),this.deep.push(c),this.real.lasttime=((l.realTime-l.startTime)/60).toFixed(0),this.myChart01.setOption(this.getOption1(!1,this.deep,this.flow)),e.myFun(this.real.deep)}}else this.isPileIds=!0,this.pile=[],this.real={air:0,airPressure:0,deep:0,density:0,deviceKey:"-",latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partPulp:0,pileDescribe:"-",pileId:0,pipeMode:"",pipeStatus:"0",pulp:0,pulpPressure:0,pumpMode:"",realTime:0,recodeInterval:0,recordMode:"0",recordStatus:"3",returnPulp:0,returnPulpPressure:0,rotateSpeed:0,signal4g:23,signalLora:0,speed:0,startTime:0,totalAir:0,totalAsh:0,totalPulp:0,totalReturnPulp:0,totalWater:0,version:"0",vertical:0,water:0,waterCementRatio:0,waterPressure:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.myChart01.setOption(this.getOption1(!0,this.deep,this.flow)),this.image="stop",e.myFun(this.real.deep);t.close()})},3e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]]),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"-":JSON.parse(this.selectItem.content).designUpSpeed,this.getPileId(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},P={};var re=m(le,ie,ae,!1,ne,"19e9eae7",null,null);function ne(e){for(let i in P)this[i]=P[i]}var oe=function(){return re.exports}(),ce=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipeTime")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u94BB\u6746\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"pipeStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u6D46\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"nozzleStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalSlurry"))),t("span",[e._v(e._s(s.realtime&&s.realtime.totalSlurry!=null?"(L)":""))])])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalAsh"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalAsh!=null?"(kg)":""))])])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.work,callback:function(s){e.$set(e.form,"work",s)},expression:"form.work"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",[t("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pilefilter")(e.pile.pileDescribe)))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status",staticStyle:{width:"20rem",float:"right"}},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])]),t("li",{class:e.pipeStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])]),t("li",{class:e.nozzleStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("sta2filters")(e.real.nozzleStatus)))])])])]),t("div",{staticStyle:{clear:"both"}})])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6C34\u7070\u6BD4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.waterCementRatio)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("recordfilters")(e.real.recordMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6DF1\u5EA6\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("deepModefilters")(e.real.deepMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v(e._s(e.designUpSpeed)+" cm/min")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v(e._s(e.designDownSpeed)+" cm/min")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u95F4\u9694")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("intervalfilters")(e.real)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u89E3\u6790\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("qfRtkfilters")(e.real.qfRtk)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6D41\u91CF(L/min)")]),t("ul",{staticClass:"item_ul_flow"},[t("li",{staticClass:"item_flow"},[t("h6",[e._v("1")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.flow1)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("2")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.flow2)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("3")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.flow3)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("4")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.flow4)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("5")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.flow5)))])]),t("div",{staticStyle:{clear:"both"}})])]),t("div",{staticClass:"item"},[t("h3",[e._v(e._s(e._f("devicefilters")(e.real.deviceMode)))]),t("ul",[t("li",{staticClass:"item_flow"},[t("h6",[e._v("1")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.pressure1)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("2")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.pressure2)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("3")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.pressure3)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("4")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.pressure4)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("5")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.pressure5)))])]),t("div",{staticStyle:{clear:"both"}})])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u6D41\u91CF\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"},[t("h2",[e._v("\u7535\u5B50\u5730\u56FE")])]),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6301\u7EED\u65F6\u957F(min)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e.real.lasttime))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u5BC6\u5EA6(g/cm\xB3)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.density)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u6D46\u91CF(L)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalSlurry,1)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u7070\u91CF(kg)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalAsh,1)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6BB5\u6D46\u91CF(L)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.averageSlurry,1)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6BB5\u7070\u91CF(kg)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.averageAsh,1)))])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u603B\u6D41\u91CF"),t("em",[e._v(e._s(e._f("numfilters")(e.real.flow))+"(L/min)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},pe=[];const me={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,designUpSpeed:"-",designDownSpeed:"-",recordStatusClass:"",pipeStatusClass:"",nozzleStatusClass:"",depth:0,pileStatusStr:"\u505C\u94BB",image:"stop",timer:null,deviceKey:"",pileId:"",pile:[],real:{air:0,airPressure:0,altitude:0,antennaHeight:0,averageAsh:0,averageSlurry:0,deep:0,deepMode:"0",density:0,deviceKey:"-",deviceMode:1,flow:0,flow1:0,flow2:0,flow3:0,flow4:0,flow5:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partFlow:0,partFlow1:0,partFlow2:0,partFlow3:0,partFlow4:0,partFlow5:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure1:0,pressure2:0,pressure3:0,pressure4:0,pressure5:0,qfRtk:0,realTime:0,recordInterval:"1",recordMode:"0",recordStatus:"3",speed:0,starRtk:0,startTime:0,totalAir:0,totalAsh:0,totalFlow:0,totalFlow1:0,totalFlow2:0,totalFlow3:0,totalFlow4:0,totalFlow5:0,totalSlurry:0,version:"-",verticality:0,waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipeTime(e,i){return e?e[i]=="1970-01-01 08:00:00"||e[i]==null?"-":e[i]:"-"},ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},pilefilter(e){return e==null?"--":e},startTimefilters(e){return e?e.startTime==null?"-":e.startTime:"-"},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("HH:mm:ss")},numfilters(e,i){return i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i)},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},sta2filters(e){switch(e){case"1":return"\u55B7\u6D46";default:return"\u6B62\u55B7"}},recordfilters(e){switch(e){case"0":return"\u6DF1\u5EA6\u6A21\u5F0F";case"1":return"\u65F6\u95F4\u6A21\u5F0F"}},intervalfilters(e){if(e.recordInterval==="0")return e.recordMode==="1"?"5s":"20cm";if(e.recordInterval==="1")return e.recordMode==="1"?"10s":"25cm";if(e.recordInterval==="2")return e.recordMode==="1"?"30s":"50cm";if(e.recordInterval==="3")return e.recordMode==="1"?"60s":"100cm"},deepModefilters(e){switch(e){case"1":return"RTK";default:return"\u7F16\u7801\u5668"}},qfRtkfilters(e){switch(e){case 1:return"\u5355\u70B9\u89E3";case 2:return"\u4F2A\u8DDD\u5DEE\u5206";case 4:return"\u56FA\u5B9A\u89E3";case 5:return"\u6D6E\u52A8\u89E3";default:return"\u65E0\u6548"}},devicefilters(e){return e!==1?"\u538B\u529B(MPa)":"\u7535\u6D41(A)"}},watch:{centerDialogVisible1(e,i){e==!1&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData(){this.ispileIds=!0,this.pile=[],this.real={air:0,airPressure:0,altitude:0,antennaHeight:0,averageAsh:0,averageSlurry:0,deep:0,deepMode:"0",density:0,deviceKey:"-",deviceMode:1,flow:0,flow1:0,flow2:0,flow3:0,flow4:0,flow5:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partFlow:0,partFlow1:0,partFlow2:0,partFlow3:0,partFlow4:0,partFlow5:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure1:0,pressure2:0,pressure3:0,pressure4:0,pressure5:0,qfRtk:0,realTime:0,recordInterval:"1",recordMode:"0",recordStatus:"3",speed:0,starRtk:0,startTime:0,totalAir:0,totalAsh:0,totalFlow:0,totalFlow1:0,totalFlow2:0,totalFlow3:0,totalFlow4:0,totalFlow5:0,totalSlurry:0,version:"-",verticality:0,waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.depth=0,this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.myChart01.dispose(),this.image="stop"},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.myChart01.setOption(this.getoption1(e,this.deep,this.flow))},getoption1(e,i,t){return{title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u603B\u6D41\u91CF"]},grid:{top:"25%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" \u603B\u6D41\u91CF(L/min)",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]},max:300}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:i,markPoint:{data:[{type:"max"}]}},{name:"\u603B\u6D41\u91CF",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:t}]}},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getpileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;f(this.selectItem.key,this.pileId,"realTime,flow,deep,pipeStatus").then(i=>{const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var s=0;s<i.length;s++){let l=o(i[s].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),r=[],n=[];r.push(l,i[s].flow.toFixed(2)),n.push(l,i[s].deep.toFixed(2)),this.flow.push(r),this.deep.push(n)}this.initEchart01(!1);var a=i[i.length-1];a!=null&&(a.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):a.pipeStatus=="3"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="4"&&(this.pilefilter=="\u63D0\u94BB",this.image="up"),this.depth=a.deep,e.myFun(a.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(l=>{if(l!=null){this.ispileIds==!0&&this.getpileIds(),this.real=l,this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.setAngle(this.real.xAngle,this.real.yAngle),this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth?(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"):this.real.pipeStatusClass=="",this.depth=this.real.deep,this.real.nozzleStatus=="1"?this.nozzleStatusClass="on":this.nozzleStatusClass="";let r=o(l.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow[this.flow.length-1][0]!==r){let n=[],c=[];n.push(r,l.flow.toFixed(2)),c.push(r,l.deep.toFixed(2)),this.flow.push(n),this.deep.push(c),this.myChart01.setOption(this.getoption1(!1,this.deep,this.flow))}this.real.lasttime=((l.realTime-l.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.ispileIds=!0,this.myChart01.setOption(this.getoption1(!1,this.deep,this.flow)),e.myFun(this.real.deep);t.close()})},3e3),setTimeout(()=>{t.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=require("@/assets/images/map/b2.png"):this.coordinates.icon=require("@/assets/images/map/a2.png")),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"-":JSON.parse(this.selectItem.content).designUpSpeed,this.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"-":JSON.parse(this.selectItem.content).designDownSpeed,this.getpileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/30*98+"%"}}},D={};var de=m(me,ce,pe,!1,he,"3d4fce1d",null,null);function he(e){for(let i in D)this[i]=D[i]}var ue=function(){return de.exports}(),fe=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",[t("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.pile.pileDescribe))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])])])]),t("div",{staticStyle:{clear:"both"}})])]),t("div",{staticClass:"bottom left_bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("recordfilters")(e.real.recordMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u95F4\u9694")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("intervalfilters")(e.real)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6869\u957F(m)")]),t("ul",{staticClass:"item_ul_flow"},[t("li",{staticClass:"item_flow"},[t("h6",[e._v("1")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length1)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("2")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length2)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("3")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length3)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("4")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length4)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("5")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length5)))])])])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u65F6\u957F(s)")]),t("ul",{staticClass:"item_ul_flow"},[t("li",{staticClass:"item_flow"},[t("h6",[e._v("1")]),t("p",[e._v(e._s(e.real.time1))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("2")]),t("p",[e._v(e._s(e.real.time2))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("3")]),t("p",[e._v(e._s(e.real.time3))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("4")]),t("p",[e._v(e._s(e.real.time4))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("5")]),t("p",[e._v(e._s(e.real.time5))])])])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u538B\u529B\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"},[t("h2",[e._v("\u7535\u5B50\u5730\u56FE")])]),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6301\u7EED\u65F6\u957F(min)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e.real.lasttime))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6700\u5927\u6DF1\u5EA6(m)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.maxDeep)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6DB2\u538B\u529B(MPa)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.waterPressure)))])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u5782\u76F4\u5EA6(%)")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.verticality)))])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u538B\u6869\u529B"),t("em",[e._v(e._s(e._f("numfilters")(e.real.pressure))+"(MPa)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},ve=[];const ge={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",image:"stop",depth:0,pileStatusStr:"\u505C\u94BB",timer:null,deviceKey:"",pileId:"",fields:"",pile:[],real:{deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"1",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"-",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"0",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"0",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("HH:mm:ss")},numfilters(e,i){return i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i)},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},recordfilters(e){switch(e){case"1":return"\u65F6\u95F4\u6A21\u5F0F";case"2":return"\u6DF1\u5EA6\u6A21\u5F0F";default:return e}},intervalfilters(e){if(e.recordInterval==="0")return e.recordMode==="1"?"5s":"20cm";if(e.recordInterval==="1")return e.recordMode==="1"?"10s":"25cm";if(e.recordInterval==="2")return e.recordMode==="1"?"30s":"50cm";if(e.recordInterval==="3")return e.recordMode==="1"?"60s":"100cm"}},watch:{centerDialogVisible1(e,i){e==!1&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData(){this.ispileIds=!0,this.pile=[],this.real={deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"1",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"-",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"0",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"0",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u538B\u6869\u529B"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m ",type:"value",inverse:!0,nameLocation:"end",axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"\u538B\u6869\u529B",type:"value",inverse:!1,nameLocation:"start",nameTextStyle:{padding:[10,15,0,0]},splitLine:{show:!1}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"\u538B\u6869\u529B",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getdata()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getPileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getdata(){let e=this;f(this.selectItem.key,this.pileId,"realTime,pressure,deep,pipeStatus").then(i=>{const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var s=0;s<i.length;s++){let l=o(i[s].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),r=[],n=[];r.push(l,i[s].pressure.toFixed(2)),n.push(l,i[s].deep.toFixed(2)),this.flow.push(r),this.deep.push(n)}this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1);var a=i[i.length-1];a!=null&&(a.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):a.pipeStatus=="3"?this.pileStatusStr="\u4E0B\u94BB":a.pipeStatus=="4"&&this.pilefilter=="\u63D0\u94BB",this.depth=a.deep,e.myFun(a.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(l=>{if(l!=null){this.ispileIds==!0&&this.getPileIds(),this.real=l,this.setAngle(this.real.xAngle,this.real.yAngle),this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth?(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"):this.pipeStatusClass="",this.depth=this.real.deep;let r=o(l.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow[this.flow.length-1][0]!==r){let n=[],c=[];n.push(r,l.pressure.toFixed(2)),c.push(r,l.deep.toFixed(2)),this.flow.push(n),this.deep.push(c),this.initEchart01(!1)}this.real.lasttime=((l.realTime-l.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.ispileIds=!0,this.pile=[],this.real={deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"1",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"-",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"0",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"0",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.initEchart01(!0),this.image="stop",e.myFun(this.real.deep);t.close()})},3e3),setTimeout(()=>{t.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=require("@/assets/images/map/b1.png"):this.coordinates.icon=require("@/assets/images/map/a1.png")),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getPileIds(),this.getdata();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},T={};var _e=m(ge,fe,ve,!1,Ce,"2fa374d5",null,null);function Ce(e){for(let i in T)this[i]=T[i]}var be=function(){return _e.exports}(),Se=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u6D46\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"nozzleStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalSlurry"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalSlurry!=null?"(L)":""))])])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalAsh"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalAsh!=null?"(kg)":""))])])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",[t("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u5B54\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pilefilter")(e.pile.pileDescribe)))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])])])]),t("div",{staticStyle:{clear:"both"}})])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u5B54\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.real.pileDescribe))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6C34\u7070\u6BD4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.waterAsh)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u704C\u6D46\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("modefilters")(e.real.processMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u53C2\u6570\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("parfilters")(e.real.paramType)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u704C\u6D46\u65B9\u6CD5")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("metfilters")(e.real.processMethod)))])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6301\u7EED\u65F6\u957F")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.lasttime,0))+" \u5206\u949F")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u5CF0\u503C\u538B\u529B")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.pressurePeak))+" mpa")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.totGrout))+" L")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.totAsh))+" kg")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u5355\u4F4D\u6D46\u91CF")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.perGrout))+" L")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u5355\u4F4D\u7070\u91CF")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.perAsh))+" kg")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6CE8\u6D46")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.flow))+" L/min")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u8FDB\u6D46")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.flowIn))+" L/min")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u8FD4\u6D46")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.flowOut))+" L/min")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u538B\u529B")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.pressure))+" map")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u5BC6\u5EA6")]),t("p",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.density))+" g/cm\xB3")])])])])])]),t("el-col",{staticClass:"col",staticStyle:{height:"100%"},attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6CE8\u6D46\u538B\u529B\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"}),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},ye=[];const we={components:{gTabs:d},props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b3.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",timer:null,deviceKey:"",pileId:"",pile:[],real:{recordStatus:3,startTime:0,xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},pilefilter(e){return e==null?"--":e},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},numfilters(e,i){return i==null&&(i=2),e==null?"-":isNaN(e)?e:parseFloat(e).toFixed(i)},stafilters(e){switch(e){case 1:return"\u8BB0\u5F55\u4E2D";case 2:return"\u6682\u505C";case 3:return"\u7ED3\u675F";default:return e}},parfilters(e){return e==0?"\u4E8C\u53C2\u6570":e==1?"\u4E09\u53C2\u6570":e==1?"\u56DB\u53C2\u6570":"-"},metfilters(e){return e==0?"\u5927\u5FAA\u73AF":e==1?"\u5C0F\u5FAA\u73AF":"-"},modefilters(e){return e==0?"\u704C\u6D46\u65BD\u5DE5\u8BB0\u5F55":e==1?"\u5C01\u5B54\u65BD\u5DE5\u8BB0\u5F55":e==2?"\u7B80\u6613\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==3?"\u5355\u70B9\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==4?"\u4E94\u70B9\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==5?"\u88C2\u9699\u538B\u6C34\u65BD\u5DE5\u8BB0\u5F55":e==6?"\u5E37\u5E55\u704C\u6D46":e==7?"\u56FA\u7ED3\u704C\u6D46":e==8?"\u5CA9\u6EB6\u6CE8\u6D46":"-"}},watch:{centerDialogVisible1(e,i){e==!1&&(this.timer&&clearInterval(this.timer),this.getwatchData())}},methods:{getwatchData(){this.ispileIds=!0,this.flow=[],this.deep=[],!(this.myChart01===void 0||this.myChart01._disposed)&&this.myChart01.dispose()},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:28},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"3%",right:"10%",data:["\u6CE8\u6D46","\u538B\u529B"]},grid:{top:"22%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6CE8\u6D46   ",type:"value",inverse:!1,nameLocation:"start",nameTextStyle:{padding:[10,0,0,15]},axisLine:{show:!0}},{name:"  \u538B\u529B",type:"value",inverse:!1,nameLocation:"start",max:10,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6CE8\u6D46",type:"line",showSymbol:!1,data:this.deep},{name:"\u538B\u529B",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getPileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[1],this.ispileIds=!1)})},getData(){f(this.selectItem.key,this.pileId,"realTime,pressure,flow").then(e=>{const i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var t=0;t<e.length;t++){let s=o(e[t].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),a=[],l=[];a.push(s,e[t].pressure.toFixed(2)),l.push(s,e[t].flow.toFixed(2)),this.flow.push(a),this.deep.push(l)}this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(s=>{if(s!=null){this.real=s,this.ispileIds==!0&&this.getPileIds(),this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0);let a=o(s.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow.length!=0||this.flow[this.flow.length-1][0]!=a){let l=[],r=[];l.push(a,s.pressure.toFixed(2)),r.push(a,s.flow.toFixed(2)),this.flow.push(l),this.deep.push(r),this.initEchart01(!1)}this.real.lasttime=((s.realTime-s.startTime)/60).toFixed(0)}else this.ispileIds=!0,this.flow=[],this.deep=[],this.initEchart01(!0);i.close()})},3e3),setTimeout(()=>{i.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=require("@/assets/images/map/b3.png"):this.coordinates.icon=require("@/assets/images/map/a3.png")),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getPileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},z={};var Ie=m(we,Se,ye,!1,xe,"5336e958",null,null);function xe(e){for(let i in z)this[i]=z[i]}var ke=function(){return Ie.exports}(),Pe=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.pile.pileDescribe))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])])])])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("recordfilters")(e.real.recordMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u95F4\u9694")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("intervalfilters")(e.real)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u4F20\u611F\u5668\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("modefilters")(e.real.deepMode)))])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u7535\u6D41\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"},[t("h2",[e._v("\u7535\u5B50\u5730\u56FE")])]),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("num2filters")(e.real.xAngle)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("num2filters")(e.real.yAngle)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",[e._v(e._s(e.real.lasttime)+"\u5206\u949F")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6700\u5927\u6DF1\u5EA6")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.maxDeep))+"m")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u586B\u6599\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.totalWeight))+"kg")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u5782\u76F4\u5EA6")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.verticality))+"%")])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u7535\u6D41"),t("em",[e._v(e._s(e._f("numfilters")(e.real.current1))+"(A)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},De=[];const Te={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:S,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",image:"stop",depth:0,pileStatusStr:"\u505C\u94BB",timer:null,deviceKey:"",pileId:"",pile:[],real:[],flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return o(e*1e3).format("HH:mm:ss")},numfilters(e){return e==""?"-":parseFloat(e).toFixed(2)},num2filters(e){return parseFloat(e).toFixed(1)},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},recordfilters(e){return e==="1"?"\u65F6\u95F4\u6A21\u5F0F":"\u6DF1\u5EA6\u6A21\u5F0F"},intervalfilters(e){if(e.recordInterval==="0")return e.recordMode==="1"?"5s":"20cm";if(e.recordInterval==="1")return e.recordMode==="1"?"10s":"25cm";if(e.recordInterval==="2")return e.recordMode==="1"?"30s":"50cm";if(e.recordInterval==="3")return e.recordMode==="1"?"60s":"100cm"},modefilters(e){return e==="0"?"\u5355\u6746\u6A21\u5F0F":e==="1"?"\u63A5\u6746\u6A21\u5F0F":"RTK"}},watch:{centerDialogVisible1(e,i){this.timer&&clearInterval(this.timer),e==!1&&this.getwatchData()}},methods:{getwatchData(){this.ispileIds=!0,this.pile=[],this.defaultpile="",this.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u7535\u6D41"]},grid:{top:"21%",left:"4%",right:"4%",bottom:"12%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"   \u7535\u6D41A",type:"value",inverse:!1,nameLocation:"start",max:300,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep},{name:"\u7535\u6D41",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getPileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;f(this.selectItem.key,this.pileId,"realTime,current1,deep,pipeStatus").then(i=>{const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var s=0;s<i.length;s++){let l=o(i[s].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),r=[],n=[];r.push(l,i[s].current1.toFixed(2)),n.push(l,i[s].deep.toFixed(2)),this.flow.push(r),this.deep.push(n)}this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1);var a=i[i.length-1];a!=null&&(a.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):a.pipeStatus=="3"?this.pileStatusStr="\u4E0B\u94BB":a.pipeStatus=="4"&&this.pilefilter=="\u63D0\u94BB",this.depth=a.deep,e.myFun(a.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(l=>{if(l!=null){this.ispileIds==!0&&this.getPileIds(),this.real=l,this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth?(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"):this.pipeStatusClass="",this.depth=this.real.deep;let r=o(l.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow.length==0||this.flow[this.flow.length-1][0]!=r){let n=[],c=[];n.push(r,l.current1.toFixed(2)),c.push(r,l.deep.toFixed(2)),this.flow.push(n),this.deep.push(c),this.initEchart01(!1)}this.real.lasttime=((l.realTime-l.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.ispileIds=!0,this.flow=[],this.deep=[],this.pile=[],this.defaultpile="",this.real={current:0,deep:0,density:0,deviceKey:"-",expandStatus:"0",flow:0,latitude:0,longitude:0,machineKey:"-",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"-",pileId:0,pipeStatus:"0",pressure:0,processType:"00000000",realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,totalSlurry:0,version:"-",waterCementRatio:0,xAngle:0,yAngle:0,lasttime:0},this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.image="stop",this.initEchart01(!0),e.myFun(this.real.deep);t.close()})},3e3),setTimeout(()=>{t.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=S:this.coordinates.icon=S),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getPileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},N={};var ze=m(Te,Pe,De,!1,Ne,"e87852dc",null,null);function Ne(e){for(let i in N)this[i]=N[i]}var Le=function(){return ze.exports}(),Ae=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime "}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth "}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh "}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding "}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth "}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed "}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed "}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",[t("div",{staticClass:"info",staticStyle:{width:"16rem",float:"left"}},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.pile.pileDescribe))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status",staticStyle:{width:"150px",float:"right"}},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])])])]),t("div",{staticStyle:{clear:"both"}})])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("recordfilters")(e.real.recordMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u95F4\u9694")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("intervalfilters")(e.real)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6869\u957F(m)")]),t("ul",{staticClass:"item_ul_flow"},[t("li",{staticClass:"item_flow"},[t("h6",[e._v("1")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length1)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("2")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length2)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("3")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length3)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("4")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length4)))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("5")]),t("p",[e._v(e._s(e._f("numfilters")(e.real.length5)))])])])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u65F6\u957F(s)")]),t("ul",{staticClass:"item_ul_flow"},[t("li",{staticClass:"item_flow"},[t("h6",[e._v("1")]),t("p",[e._v(e._s(e.real.time1))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("2")]),t("p",[e._v(e._s(e.real.time2))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("3")]),t("p",[e._v(e._s(e.real.time3))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("4")]),t("p",[e._v(e._s(e.real.time4))])]),t("li",{staticClass:"item_flow"},[t("h6",[e._v("5")]),t("p",[e._v(e._s(e.real.time5))])])])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u6B21\u6570\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"},[t("h2",[e._v("\u7535\u5B50\u5730\u56FE")])]),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("num2filters")(e.real.xAngle)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("num2filters")(e.real.yAngle)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",[e._v(e._s(e.real.lasttime)+"\u5206\u949F")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6700\u5927\u6DF1\u5EA6")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.maxDeep))+"m")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u9524\u51FB\u6B21\u6570")]),t("b",[e._v(e._s(e.real.hammerTimes))])]),t("div",{staticClass:"item"},[t("p",[e._v("\u5782\u76F4\u5EA6")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.verticality))+"%")])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u52A0\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(m/s)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},Oe=[];const $e={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:S,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,recordStatusClass:"",image:"stop",depth:0,pileStatusStr:"\u505C\u94BB",timer:null,deviceKey:"",pileId:"",pile:[],realls:[],real:{deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"2",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"1",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"1.01",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},numfilters(e){return parseFloat(e).toFixed(2)},num1filters(e){return parseFloat(e).toFixed(3)},num2filters(e){return parseFloat(e).toFixed(1)},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},recordfilters(e){switch(e){case"1":return"\u65F6\u95F4\u6A21\u5F0F";case"0":return"\u6DF1\u5EA6\u6A21\u5F0F";default:return e}},intervalfilters(e){if(e.recordInterval==="0")return e.recordMode==="1"?"5s":"20cm";if(e.recordInterval==="1")return e.recordMode==="1"?"10s":"25cm";if(e.recordInterval==="2")return e.recordMode==="1"?"30s":"50cm";if(e.recordInterval==="3")return e.recordMode==="1"?"60s":"100cm"}},watch:{centerDialogVisible1(e,i){e==!1&&(this.getwatchDate(),this.timer&&clearInterval(this.timer))}},methods:{getwatchDate(){this.ispileIds=!0,this.pile=[],this.real={deep:0,deepMode:"0",designLength1:0,designLength2:0,designLength3:0,designLength4:0,designLength5:0,designLength6:0,designLength7:0,designLength8:0,designPileAmount:0,deviceKey:"-",deviceType:"2",hammerPower:0,hammerTimes:0,latitude:0,length1:0,length2:0,length3:0,length4:0,length5:0,longitude:0,machineKey:"",maxDeep:0,pileAmount:0,pileDescribe:"-",pileId:0,pressure:0,realTime:0,recordInterval:"0",recordMode:"1",recordStatus:"3",speed:0,startTime:0,time1:0,time2:0,time3:0,time4:0,time5:0,version:"1.01",verticality:0,waterPressure:0,weight:0,xAngle:0,yAngle:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:16},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u6B21\u6570"]},grid:{top:"23%",left:"3%",right:"3%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m ",type:"value",inverse:!0,max:80,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"    \u6B21\u6570",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep},{name:"\u6B21\u6570",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchDate())},getPileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;f(this.selectItem.key,this.pileId,"realTime,hammerTimes,deep,pipeStatus").then(i=>{const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var s=0;s<i.length;s++){let l=o(i[s].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),r=[],n=[];r.push(l,i[s].hammerTimes),n.push(l,i[s].deep.toFixed(2)),this.flow.push(r),this.deep.push(n)}this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1);var a=i[i.length-1];a!=null&&(a.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):a.pipeStatus=="3"?this.pileStatusStr="\u4E0B\u94BB":a.pipeStatus=="4"&&this.pilefilter=="\u63D0\u94BB",this.depth=a.deep,e.myFun(a.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(l=>{if(l!=null){this.ispileIds==!0&&this.getPileIds(),this.real=l,this.setAngle(this.real.xAngle,this.real.yAngle),this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth?(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"):(this.pipeStatusClass="",this.image="stop"),this.depth=this.real.deep;let r=o(l.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow.length==0||this.flow[this.flow.length-1][0]!=r){let n=[],c=[];n.push(r,l.hammerTime),c.push(r,l.deep.toFixed(2)),this.flow.push(n),this.deep.push(c),this.initEchart01(!1)}this.real.lasttime=((l.realTime-l.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.ispileIds=!0,this.initEchart01(!0),e.myFun(this.real.deep);t.close()})},3e3),setTimeout(()=>{t.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=S:this.coordinates.icon=S),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getPileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},L={};var Je=m($e,Ae,Oe,!1,Me,"1e4e4ff7",null,null);function Me(e){for(let i in L)this[i]=L[i]}var Fe=function(){return Je.exports}(),Ve=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.name,callback:function(s){e.$set(e.form,"name",s)},expression:"form.name"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.company,callback:function(s){e.$set(e.form,"company",s)},expression:"form.company"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.min,callback:function(s){e.$set(e.form,"min",s)},expression:"form.min"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.length,callback:function(s){e.$set(e.form,"length",s)},expression:"form.length"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.weight,callback:function(s){e.$set(e.form,"weight",s)},expression:"form.weight"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.margin,callback:function(s){e.$set(e.form,"margin",s)},expression:"form.margin"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.radius,callback:function(s){e.$set(e.form,"radius",s)},expression:"form.radius"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.upspeed,callback:function(s){e.$set(e.form,"upspeed",s)},expression:"form.upspeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.downspeed,callback:function(s){e.$set(e.form,"downspeed",s)},expression:"form.downspeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},Ye=[];const He={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data(){return{timer:null,deviceKey:"",pileId:"",fields:"",selectItem:[],centerDialogVisible:!1,form:{name:"",company:"",min:"",length:"",weight:"",margin:"",radius:"",upspeed:"",downspeed:""}}},methods:{handleCommand(e){let i=e.split("-")[0],t=e.split("-")[1];switch(this.selectItem=this.onlineList[i],t){case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){}}},A={};var Ue=m(He,Ve,Ye,!1,je,"1e37dcdb",null,null);function je(e){for(let i in A)this[i]=A[i]}var We=function(){return Ue.exports}(),Ke=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u94BB\u6746\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"pipeStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u7070\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"nozzleStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalAsh"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalAsh!=null?"(kg)":""))])])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pilefilter")(e.pile.pileDescribe)))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])]),t("li",{class:e.pipeStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])]),t("li",{class:e.nozzleStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("sta2filters")(e.real.nozzleStatus)))])])])])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v("- cm/min")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v("- cm/min")])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u7070\u91CF\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"},[t("h2",[e._v("\u7535\u5B50\u5730\u56FE")])]),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",{staticClass:"item_center"},[e._v(e._s(e.real.lasttime)+" min")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6700\u5927\u6DF1\u5EA6")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.maxDeep,1))+" m")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.totalAsh,1))+" kg")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6BB5\u7070\u91CF")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.partAsh))+" kg")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7070\u7F50\u4F59\u91CF")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.weight))+" kg")])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u7535\u6D41"),t("em",[e._v(e._s(e._f("numfilters")(e.real.current))+"(A)")])]),t("p",[e._v("\u55B7\u7070\u538B\u529B"),t("em",[e._v(e._s(e._f("numfilters")(e.real.pressure))+"(Mpa)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table m-tab-addAsh"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.addWeight,border:""}},[t("el-table-column",{attrs:{type:"index",label:"\u5E8F\u53F7",width:"200",align:"center"}}),t("el-table-column",{attrs:{prop:"beginTime",label:"\u5F00\u59CB\u65F6\u95F4",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._v(" "+e._s(e._f("timefilters")(s.row.beginTime))+" ")]}}])}),t("el-table-column",{attrs:{prop:"endTime",label:"\u7ED3\u675F\u65F6\u95F4",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._v(" "+e._s(e._f("timefilters")(s.row.endTime))+" ")]}}])}),t("el-table-column",{attrs:{prop:"weight",label:"\u52A0\u7070\u91CF(kg)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._v(" "+e._s(e._f("numfilters")(s.row.weight))+" ")]}}])})],1),t("el-footer",{staticClass:"m-footer-addAsh"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage,"page-size":e.pagesSize,layout:"slot, prev, pager, next",total:e.totalpage},on:{"current-change":e.handleCurrentChangeweight}},[t("button",{staticClass:"lastPage",on:{click:e.toWeightFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage,"page-size":e.pagesSize,layout:"slot,jumper",total:e.totalpage},on:{"current-change":e.handleCurrentChangeweight}},[t("button",{staticClass:"lastPage",on:{click:e.toWeightLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==4,expression:"tab2 == 4"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot,jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},Ee=[];const Re={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b7.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,currentPage:1,pagesSize:10,totalpage:0,addWeight:[{beginTime:1642063786,deviceKey:"MP01123412341234",endTime:1642063797,realTime:1642063798,version:"1.00",weight:2.155098}],image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"\u505C\u94BB",timer:null,deviceKey:"",pileId:"",pile:[],real:{current:0,deep:0,deviceKey:"",latitude:0,longitude:0,machineKey:"0",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"",pileId:0,pipeStatus:"0",pressure:0,realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,version:"0",vertical:0,weight:0,xAngle:0,yAngle:0,lasttime:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{timefilters(e){return o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},pilefilter(e){return e==null?"--":e},ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("HH:mm:ss")},numfilters(e,i){return i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i)},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},sta2filters(e){switch(e){case"1":return"\u55B7\u7070";default:return"\u6B62\u55B7"}}},watch:{centerDialogVisible1(e,i){this.tab2=0,this.timer&&clearInterval(this.timer),e==!1&&this.getwatchData()}},methods:{getwatchData(){this.ispileIds=!0,this.pile=[],this.real={current:0,deep:0,deviceKey:"",latitude:0,longitude:0,machineKey:"0",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"",pileId:0,pipeStatus:"0",pressure:0,realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,version:"0",vertical:0,weight:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},handleCurrentChangeweight(e){const i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.currentPage=e,I(this.currentPage,this.pagesSize,this.selectItem.key).then(t=>{this.addWeight=t.content,this.totalpage=t.totalElements,i.close()})},toWeightFirstPage(){this.handleCurrentChangeweight(1)},toWeightLastPage(){this.handleCurrentChangeweight(Math.ceil(this.totalpage/this.pagesSize))},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:30},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u7070\u91CF"]},grid:{top:"22%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m  ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" \u7070\u91CFkg",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"\u7070\u91CF",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==3&&I(1,10,this.selectItem.key).then(t=>{this.addWeight=t.content,this.totalpage=t.totalElements}),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==4&&this.timer&&(clearInterval(this.timer),this.getwatchData())},getPileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;f(this.selectItem.key,this.pileId,"realTime,totalAsh,deep,pipeStatus").then(i=>{const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var s=0;s<i.length;s++){let l=o(i[s].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),r=[],n=[];r.push(l,i[s].totalAsh.toFixed(2)),n.push(l,i[s].deep.toFixed(2)),this.flow.push(r),this.deep.push(n)}this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1);var a=i[i.length-1];a.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):a.pipeStatus=="3"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="4"&&(this.pilefilter=="\u63D0\u94BB",this.image="up"),this.depth=a.deep,e.myFun(a.deep),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(l=>{if(l!=null){this.ispileIds==!0&&this.getPileIds(),this.real=l,this.setAngle(this.real.xAngle,this.real.yAngle),this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.ispileIds=!0,this.recordStatusClass="",this.real.deep="--",this.real.speed="--",this.real.current="--",this.real.pressure="--"),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth&&(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"),this.depth=this.real.deep,this.real.nozzleStatus==1?this.nozzleStatusClass="on":this.nozzleStatusClass="";let r=o(l.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow[this.flow.length-1][0]!==r){let n=[],c=[];n.push(r,l.totalAsh.toFixed(2)),c.push(r,l.deep.toFixed(2)),this.flow.push(n),this.deep.push(c),this.initEchart01(!1)}this.real.lasttime=((l.realTime-l.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.ispileIds=!0,this.pile=[],this.real={current:0,deep:0,deviceKey:"",latitude:0,longitude:0,machineKey:"0",maxDeep:0,nozzleStatus:"0",partAsh:0,partSlurry:0,pileDescribe:"",pileId:0,pipeStatus:"0",pressure:0,realTime:0,recordStatus:"3",speed:0,startTime:0,totalAsh:0,version:"0",vertical:0,weight:0,xAngle:0,yAngle:0,lasttime:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.initEchart01(!0),this.image="stop",this.myFun(this.real.deep);t.close()})},3e3)})},handleCommand(e){let i=e.split("-")[0],t=e.split("-")[1];if(this.selectItem=this.onlineList[i],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u540E\u53F0\u7070\u7F50"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u540E\u53F0\u7070\u7F50"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let s=0;s<this.cameraLive.length;s++){let a={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[s].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(a)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=require("@/assets/images/map/b7.png"):this.coordinates.icon=require("@/assets/images/map/a6.png")),t){case"0":{this.centerDialogVisible1=!0,this.getPileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},O={};var qe=m(Re,Ke,Ee,!1,Ge,"5f81280e",null,null);function Ge(e){for(let i in O)this[i]=O[i]}var Ze=function(){return qe.exports}(),Be=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u94BB\u6746")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"pipeStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u6D46")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"nozzleStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalSlurry"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalSlurry!=null?"(L)":""))])])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"totalAsh"))+" "),t("span",[e._v(e._s(s.realtime&&s.realtime.totalAsh!=null?"(kg)":""))])])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.pile.pileDescribe))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])]),t("li",{class:e.pipeStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])]),t("li",{class:e.nozzleStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("sta2filters")(e.real.nozzleStatus)))])])])])]),t("div",{staticClass:"bottom"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u6C34\u7070\u6BD4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.waterCementRatio)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v("- cm/min")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6")]),t("div",{staticClass:"value"},[e._v("- cm/min")])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u6D41\u91CF\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"}),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{staticClass:"icon"},[t("img",{attrs:{src:j,alt:""}})]),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("num2filters")(e.real.xAngle)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("num2filters")(e.real.yAngle)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",[e._v(e._s(e.real.lasttime)+"\u5206\u949F")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6700\u5927\u6DF1\u5EA6")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.maxDeep))+"m")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u7D2F\u8BA1\u6D46\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.totalSlurry))+"L")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.totalAsh))+"kg")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6BB5\u6D46\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.partSlurry))+"L")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6BB5\u7070\u91CF")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.partAsh))+"kg")])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u6D41\u91CF1"),t("em",[e._v(e._s(e._f("numfilters")(e.real.flow))+"(L/min)")])]),t("p",[e._v("\u6D41\u91CF2"),t("em",[e._v(e._s(e._f("numfilters")(e.real.flow))+"(L/min)")])]),t("p",[e._v("\u603B\u6D41\u91CF"),t("em",[e._v(e._s(e._f("numfilters")(e.real.flow))+"(L/min)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},Xe=[];const Qe={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b8.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"\u505C\u94BB",timer:null,deviceKey:"",pileId:"",pile:[],real:{recordStatus:"3",nozzleStatus:"0",pipeStatus:"0",startTime:0,xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},numfilters(e){return e==null?"-":parseFloat(e).toFixed(2)},num1filters(e){return parseFloat(e).toFixed(3)},num2filters(e){return parseFloat(e).toFixed(1)},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},sta1filters(e){return e=="1"?"\u4E0B\u94BB":e=="2"?"\u63D0\u94BB":e=="3"?"\u590D\u4E0B":e=="4"?"\u590D\u63D0":"\u505C\u6B62"},sta2filters(e){switch(e){case"1":return"\u55B7\u6D46";case"0":return"\u6B62\u55B7";default:return e}}},watch:{centerDialogVisible1(e,i){e==!1&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData(){this.ispileIds=!0,this.pile=[],this.real={recordStatus:"3",nozzleStatus:"0",pipeStatus:"0",startTime:0,xAngle:0,yAngle:0},this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u6D41\u91CF"]},grid:{top:"23%",left:"4%",right:"5.5%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m  ",type:"value",inverse:!0,max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:"\u6D41\u91CF(L/min)",type:"value",inverse:!1,nameLocation:"start",max:100,splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep},{name:"\u6D41\u91CF",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getpileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;f(this.selectItem.key,this.pileId,"realTime,flow,deep,pipeStatus").then(i=>{const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var s=0;s<i.length;s++){let l=o(i[s].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),r=[],n=[];r.push(l,i[s].flow.toFixed(2)),n.push(l,i[s].deep.toFixed(2)),this.flow.push(r),this.deep.push(n)}this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1);var a=i[i.length-1];a!=null&&(a.pipeStatus=="1"?(this.pileStatusStr="\u4E0B\u94BB",this.image="down"):a.pipeStatus=="2"?(this.pileStatusStr="\u63D0\u94BB",this.image="up"):a.pipeStatus=="3"?this.pileStatusStr="\u4E0B\u94BB":a.pipeStatus=="4"&&this.pilefilter=="\u63D0\u94BB",this.depth=a.deep,e.myFun(a.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(l=>{if(l!=null){this.ispileIds==!0&&this.getpileIds(),this.real=l,this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0),this.real.deep>this.depth?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.deep<this.depth?(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up"):this.pipeStatusClass="",this.depth=this.real.deep,this.real.nozzleStatus==0?this.nozzleStatusClass="":this.nozzleStatusClass="on";let r=o(l.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow.length==0||this.flow[this.flow.length-1][0]!=r){let n=[],c=[];n.push(r,l.flow.toFixed(2)),c.push(r,l.deep.toFixed(2)),this.flow.push(n),this.deep.push(c),this.initEchart01(!1)}this.real.lasttime=((l.realTime-l.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.ispileIds=!0,this.flow=[],this.deep=[],this.initEchart01(!0),e.myFun(this.real.deep);t.close()})},3e3),setTimeout(()=>{t.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=require("@/assets/images/map/b8.png"):this.coordinates.icon=require("@/assets/images/map/a8.png")),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getpileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},$={};var et=m(Qe,Be,Xe,!1,tt,"88d3d1c4",null,null);function tt(e){for(let i in $)this[i]=$[i]}var st=function(){return et.exports}(),it=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pilefilter")(e.pile.pileDescribe)))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])]),t("li",{class:e.pileStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])])])]),t("div",{staticStyle:{clear:"both"}})]),t("div",{staticClass:"bottom bottomdata"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u7535\u6D41")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.current))+" A")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("recordModefilters")(e.real.recordMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u95F4\u9694")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("Intervalfilters")(e.real)))])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u7535\u6D41\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"}),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",[e._v(e._s(e.real.lasttime)+"\u5206\u949F")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6700\u5927\u6DF1\u5EA6")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.maxDeep))+"m")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6700\u5927\u7535\u6D41")]),t("b",[e._v(e._s(e._f("numfilters")(e.maxCurrents))+"A")])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v(e._s(e.pileStatusSpeed)),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u7535\u6D41"),t("em",[e._v(e._s(e._f("numfilters")(e.real.current))+"(A)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},at=[];const lt={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:S,controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,ztdepth:0,pileStatusSpeed:"\u901F\u5EA6",pileStatusStr:"\u505C\u94BB",recordStatusClass:"",pileStatusClass:"",image:"stop",timer:null,deviceKey:"",pileId:"",pile:[],real:{startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0,maxCurrents:0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},pilefilter(e){return e==null?"--":e},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},recordModefilters(e){if(e=="0")return"\u6DF1\u5EA6\u6A21\u5F0F";if(e=="1")return"\u65F6\u95F4\u6A21\u5F0F"},Intervalfilters(e){if(e.recordMode=="0"){if(e.recordInterval=="0")return"20cm";if(e.recordInterval=="1")return"25cm";if(e.recordInterval=="2")return"50cm";if(e.recordInterval=="3")return"100cm"}else if(e.recordMode=="1"){if(e.recordInterval=="0")return"5s";if(e.recordInterval=="1")return"10s";if(e.recordInterval=="2")return"30s";if(e.recordInterval=="3")return"60s"}},numfilters(e,i){return e==null?"-":(i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i))},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},downSpeed(e){return e>0?parseFloat(e).toFixed(2):0},upSpeed(e){return e<0?parseFloat(e).toFixed(2):0}},watch:{centerDialogVisible1(e,i){e==!1&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData(){this.ispileIds=!0,this.flow=[],this.deep=[],this.pile=[],this.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},this.ztdepth=0,this.pileStatusStr="\u505C\u94BB",this.pileStatusSpeed="\u901F\u5EA6",this.recordStatusClass="",this.pileStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u7535\u6D41"]},grid:{top:"23%",left:"4%",right:"4%",bottom:"5%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m ",type:"value",inverse:!0,max:30,axisLine:{show:!0},nameTextstyle:{padding:[15,0,0,15]}},{name:" \u7535\u6D41(A)",type:"value",inverse:!1,nameLocation:"start",max:300,nameTextstyle:{padding:[25,15,0,0]},splitLine:{show:!1}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"\u7535\u6D41",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getpileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;var i=[];f(this.selectItem.key,this.pileId,"realTime,current,deep").then(t=>{const s=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var a=0;a<t.length;a++){i.push(t[a].current);let r=o(t[a].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),n=[],c=[];n.push(r,t[a].current.toFixed(2)),c.push(r,t[a].deep.toFixed(2)),this.flow.push(n),this.deep.push(c)}this.maxCurrents=Math.max(...i),this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1);var l=t[t.length-1];l!=null&&(this.ztdepth=l.deep,e.myFun(l.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(r=>{if(r!=null){this.ispileIds==!0&&this.getpileIds(),this.real=r,r.current>this.maxCurrents&&(this.maxCurrents=r.current),this.setAngle(this.real.xAngle,this.real.yAngle),this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0),this.real.deep>this.ztdepth?(this.pileStatusStr="\u94BB\u5B54",this.pileStatusSpeed="\u94BB\u5B54\u901F\u5EA6",this.pileStatusClass="on",this.image="down"):this.real.deep<this.ztdepth&&(this.pileStatusStr="\u8D77\u62D4",this.pileStatusSpeed="\u8D77\u62D4\u901F\u5EA6",this.pileStatusClass="on",this.image="up"),this.ztdepth=this.real.deep;let n=o(r.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow.length==0||this.flow[this.flow.length-1][0]!=n){let c=[],y=[];c.push(n,r.current.toFixed(2)),y.push(n,r.deep.toFixed(2)),this.flow.push(c),this.deep.push(y),this.initEchart01(!1)}this.real.lasttime=((r.realTime-r.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.ispileIds=!0,this.flow=[],this.deep=[],this.pile=[],this.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},this.ztdepth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pileStatusClass="",this.initEchart01(!0),e.myFun(this.real.deep);s.close()})},3e3),setTimeout(()=>{s.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]]),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getpileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},J={};var rt=m(lt,it,at,!1,nt,"2420baec",null,null);function nt(e){for(let i in J)this[i]=J[i]}var ot=function(){return rt.exports}(),ct=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top",staticStyle:{background:"#0B85E3"}},[t("div",{staticClass:"right"},[t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.name,callback:function(s){e.$set(e.form,"name",s)},expression:"form.name"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.company,callback:function(s){e.$set(e.form,"company",s)},expression:"form.company"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.min,callback:function(s){e.$set(e.form,"min",s)},expression:"form.min"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.length,callback:function(s){e.$set(e.form,"length",s)},expression:"form.length"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.weight,callback:function(s){e.$set(e.form,"weight",s)},expression:"form.weight"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.margin,callback:function(s){e.$set(e.form,"margin",s)},expression:"form.margin"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.radius,callback:function(s){e.$set(e.form,"radius",s)},expression:"form.radius"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.upspeed,callback:function(s){e.$set(e.form,"upspeed",s)},expression:"form.upspeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.downspeed,callback:function(s){e.$set(e.form,"downspeed",s)},expression:"form.downspeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},pt=[];const mt={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data(){return{timer:null,deviceKey:"",pileId:"",fields:"",selectItem:[],centerDialogVisible:!1,form:{name:"",company:"",min:"",length:"",weight:"",margin:"",radius:"",upspeed:"",downspeed:""}}},methods:{handleCommand(e){let i=e.split("-")[0],t=e.split("-")[1];switch(this.selectItem=this.onlineList[i],t){case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){}}},M={};var dt=m(mt,ct,pt,!1,ht,"3478c2be",null,null);function ht(e){for(let i in M)this[i]=M[i]}var ut=function(){return dt.exports}(),ft=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u94BB\u6746\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"pipeStatus")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u55B7\u7070\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"nozzleStatus")))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01 m-pop-echart-two"},[t("el-row",{staticClass:"row echart"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pilefilter")(e.pile.pileDescribe)))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.StatusPileStarts))])]),t("li",{class:e.pipeStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])]),t("li",{class:e.nozzleStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.StatusAsh))])])])])]),t("div",{staticClass:"bottom bottomdata"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.StartTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u5F84")]),t("div",{staticClass:"value"},[e._v(e._s(e.real.pileWidth))])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u7070\u91CF\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",{staticClass:"item_center"},[e._v(e._s(e.lastTime)+"min")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6700\u5927\u6DF1\u5EA6")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.MaxDeeps))+" m")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u7D2F\u8BA1\u7070\u91CF")]),t("b",{staticClass:"item_center"},[e._v("- kg")])]),t("div",{staticClass:"item"},[t("p",{staticClass:"item_center"},[e._v("\u6BB5\u7070\u91CF")]),t("b",{staticClass:"item_center"},[e._v(e._s(e._f("numfilters")(e.real.ash))+" kg")])])])]),t("div",{staticClass:"picbox"},[t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.depth))+"(m)")])]),t("p",[e._v("\u901F\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u7535\u6D41"),t("em",[e._v(e._s(e._f("numfilters")(e.real.current))+"(A)")])]),t("p",[e._v("\u55B7\u7070\u538B\u529B"),t("em",[e._v(e._s(e._f("numfilters")(e.real.pressure))+"(Mpa)")])])])])]),t("div",{staticClass:"ashEchart"},[t("div",{staticStyle:{width:"100%",height:"100%"}},[t("div",{ref:"myChart02",style:{width:"100%",height:"100%"}})])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot,jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},vt=[];const gt={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b7.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,lastTime:0,StartTime:"\u505C\u6B62\u4E2D",StatusPileStarts:"\u7ED3\u675F",StatusAsh:"\u6B62\u55B7",image:"stop",pipeStatusClass:"",nozzleStatusClass:"",recordStatusClass:"",depth:0,pileStatusStr:"\u505C\u94BB",timer:null,deviceKey:"",pileId:"",pile:[],real:{ash:0,ashedDepth:0,current:0,dataType:1,depth:0,deviceKey:"2019032201",jianli:"JL00000001",latitude:33,longitude:45,pileDescribe:"",pileId:0,pileWidth:0,pressure:0,realTime:0,speed:0,storeSeq:1,userName:"TEST",xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,scale:1,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}],ispileIds:!0,MaxDeeps:0,ashErrornum:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],videoCamera:!1}},filters:{timefilters(e){return o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},pilefilter(e){return e==null?"--":e},ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return e=="\u505C\u6B62\u4E2D"?"\u505C\u6B62\u4E2D":o(e*1e3).format("HH:mm:ss")},numfilters(e,i){return i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i)}},watch:{centerDialogVisible1(e,i){this.tab2=0,this.timer&&clearInterval(this.timer),e==!1&&(this.videofalse(),this.getwatchData())}},methods:{getwatchData(){this.lastTime=0,this.MaxDeeps=0,this.ispileIds=!0,this.pile=[],this.real={ash:0,ashedDepth:0,current:0,dataType:1,depth:0,deviceKey:"2019032201",jianli:"JL00000001",latitude:33,longitude:45,pileDescribe:"",pileId:0,pileWidth:0,pressure:0,realTime:0,speed:0,storeSeq:1,userName:"TEST",xAngle:0,yAngle:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.MaxDeeps=0,!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:30},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u7070\u91CF"]},grid:{top:"15%",left:"4%",right:"4%",bottom:"13%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m  ",type:"value",inverse:!0,nameLocation:"end",max:30,axisLine:{show:!0},nameTextStyle:{padding:[10,0,0,15]}},{name:" \u7070\u91CFkg",type:"value",inverse:!1,nameLocation:"start",splitLine:{show:!1},nameTextStyle:{padding:[10,15,0,0]}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"\u7070\u91CF",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},initEchart02(){let e={title:{textStyle:{color:"#101D34",fontSize:30},left:"center",top:"center"},tooltip:{trigger:"axis"},grid:{top:"1%",left:"4%",right:"1%",bottom:"1%",containLabel:!0},yAxis:{type:"category",data:[0,1+"m",2+"m",3+"m",4+"m",5+"m",6+"m",7+"m",8+"m",9+"m",10+"m",11+"m",12+"m",13+"m",14+"m",15+"m",16+"m",17+"m",18+"m",19+"m",20+"m",21+"m",22+"m",23+"m",24+"m",25+"m",26+"m",27+"m",28+"m",29+"m",30+"m"],inverse:!0,position:"right"},xAxis:{type:"value",axisLine:{show:!0},inverse:!0},series:[{data:this.ashErrornum,type:"line",showSymbol:!1}]};this.myChart02.setOption(e)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData(),this.videofalse()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history"),this.videofalse(),clearInterval(this.timer)),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo"),this.videofalse(),clearInterval(this.timer)),e==3&&(this.timer&&(clearInterval(this.timer),this.getwatchData()),this.video())},getPileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;var i=[];f(this.selectItem.key,"","realTime,depth,ash").then(t=>{const s=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var a=0;a<t.length;a++){i.push(t[a].depth);let r=o(t[a].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),n=[],c=[];n.push(r,t[a].ash.toFixed(2)),c.push(r,t[a].depth.toFixed(2)),this.flow.push(n),this.deep.push(c),this.ashErrornum[Math.ceil(t[a].depth-1)]==null&&(this.ashErrornum[Math.ceil(t[a].depth-1)]=0),this.ashErrornum[Math.ceil(t[a].depth-1)]+=Number(t[a].ash.toFixed(2))}i==""?this.MaxDeeps=0:this.MaxDeeps=Math.max(...i),this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1),this.myChart02=p(this.$refs.myChart02,null,{renderer:"svg"}),this.initEchart02();var l=t[t.length-1];l==null?(this.StatusAsh="\u6B62\u55B7",this.nozzleStatusClass=""):(this.depth=l.depth,this.StartTime=t[0].realTime,this.lastTime=((l.realTime-t[0].realTime)/60).toFixed(1),e.myFun(l.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(r=>{if(r!=null){this.ispileIds==!0&&this.getPileIds(),this.real=r,r.depth>this.MaxDeeps&&(this.MaxDeeps=r.depth),this.setAngle(this.real.xAngle,this.real.yAngle),this.coordinates.position=[r.longitude,r.latitude],this.coordinates.center=[r.longitude,r.latitude],this.real!=null?(this.recordStatusClass="on",this.StatusPileStarts="\u5F00\u59CB"):(this.recordStatusClass="",this.StatusPileStarts="\u7ED3\u675F",this.ispileIds=!0),this.real.ash!=0?(this.StatusAsh="\u55B7\u7070",this.nozzleStatusClass="on"):(this.StatusAsh="\u6B62\u55B7",this.nozzleStatusClass=""),this.real.speed>0?(this.pileStatusStr="\u4E0B\u94BB",this.pipeStatusClass="on",this.image="down"):this.real.speed<0&&(this.pileStatusStr="\u63D0\u94BB",this.pipeStatusClass="on",this.image="up");let n=o(r.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow.length==0||this.flow[this.flow.length-1][0]!==n){let c=[],y=[];c.push(n,r.ash.toFixed(2)),y.push(n,r.depth.toFixed(2)),this.flow.push(c),this.deep.push(y),this.initEchart01(!1)}e.myFun(this.real.depth)}else this.ispileIds=!0,this.pile=[],this.real={ash:0,ashedDepth:0,current:0,dataType:1,depth:0,deviceKey:"2019032201",jianli:"JL00000001",latitude:33,longitude:45,pileDescribe:"",pileId:0,pileWidth:0,pressure:0,realTime:0,speed:0,storeSeq:1,userName:"TEST",xAngle:0,yAngle:0},this.flow=[],this.deep=[],this.depth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pipeStatusClass="",this.nozzleStatusClass="",this.initEchart01(!0),this.image="stop",this.myFun(this.real.depth);s.close()})},3e3)})},video(){this.playerOptions=[];for(let e=0;e<this.cameraLive.length;e++){let i={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[e].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(i)}},videofalse(){this.playerOptions=[{sources:[{type:"application/x-mpegURL",src:""}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5"}]},handleCommand(e){let i=e.split("-")[0],t=e.split("-")[1];switch(this.selectItem=this.onlineList[i],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive!=null&&(this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.videofalse()),this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.selectItem.onlineStatus==0?this.coordinates.icon=require("@/assets/images/map/b7.png"):this.coordinates.icon=require("@/assets/images/map/a6.png")),t){case"0":{this.centerDialogVisible1=!0,this.getPileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},F={};var _t=m(gt,ft,vt,!1,Ct,"1cee8908",null,null);function Ct(e){for(let i in F)this[i]=F[i]}var bt=function(){return _t.exports}(),St=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name",attrs:{title:s.name}},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},yt=[];const wt={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],data(){return{index:0,designDepth:30,deviceKey:"",pileId:"",fields:"",pile:[{pileDescribe:"--",pileId:""}],selectItem:[],centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""}}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("HH:mm:ss")},numfilters(e,i){return i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i)},startTimefilters(e){return e?e.startTime==null?"-":e.startTime:"-"},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},sta2filters(e){switch(e){case"1":return"\u55B7\u6D46";case"0":return"\u6B62\u55B7";default:return e}},pilefilter(e){return e==null?"--":e}},methods:{closePop(e){this[e]=!1},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},handleCommand(e){let i=e.split("-")[0],t=e.split("-")[1];switch(this.selectItem=this.onlineList[i],this.index=i,t){case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}}}},V={};var It=m(wt,St,yt,!1,xt,"f784c432",null,null);function xt(e){for(let i in V)this[i]=V[i]}var kt=function(){return It.exports}(),Pt=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("el-container",{staticClass:"row-con row-previewOnline"},[t("div",{staticClass:"m-previewOnline"},[t("ul",{staticClass:"ul-previewOnline"},e._l(e.onlineList,function(s,a){return t("li",{key:s.id,class:{offline:!s.onlineStatus==1}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"right"},[t("div",{staticClass:"status"},[t("span",{staticClass:"icon"}),s.onlineStatus==1?t("span",{staticClass:"value"},[e._v("\u5728\u7EBF")]):t("span",{staticClass:"value"},[e._v("\u79BB\u7EBF")])]),t("el-dropdown",{attrs:{trigger:"click",placement:"top-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"more icon-more"}),t("el-dropdown-menu",{staticClass:"g-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:a+"-"+0}},[t("span",{staticClass:"icon icon01"}),t("span",{staticClass:"name"},[e._v("\u8FD0\u884C\u72B6\u6001")])]),t("el-dropdown-item",{attrs:{command:a+"-"+1}},[t("span",{staticClass:"icon icon02"}),t("span",{staticClass:"name"},[e._v("\u5386\u53F2\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+2}},[t("span",{staticClass:"icon icon03"}),t("span",{staticClass:"name"},[e._v("\u9884\u8B66\u4FE1\u606F")])]),t("el-dropdown-item",{attrs:{command:a+"-"+3}},[t("span",{staticClass:"icon icon04"}),t("span",{staticClass:"name"},[e._v("\u8F6C\u573A\u8BB0\u5F55")])]),t("el-dropdown-item",{attrs:{command:a+"-"+4}},[t("span",{staticClass:"icon icon05"}),t("span",{staticClass:"name"},[e._v("\u8BBE\u8BA1\u53C2\u6570")])])],1)],1)],1),t("div",{staticClass:"left"},[t("div",{staticClass:"pic",style:{"background-image":"url("+e.iconImg+")"}}),t("div",{staticClass:"type"},[e._v(e._s(s.typeName||""))]),t("div",{staticClass:"name"},[e._v(e._s(s.name||""))])])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"item"},[t("h4",[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(s.key||""))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"startTime")))])]),t("div",{staticClass:"item"},[t("h4",[e._v("\u8BB0\u5F55\u72B6\u6001")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("ofiltersPipe")(s.realtime,"recordStatus")))])])])])])}),0)])]),t("el-dialog",{staticClass:"m-pop",attrs:{title:"\u8BBE\u8BA1\u53C2\u6570-"+e.selectItem.key,visible:e.centerDialogVisible},on:{"update:visible":function(s){e.centerDialogVisible=s}}},[t("div",{staticClass:"m-params-edit"},[t("div",{staticClass:"g-notifacition"},[t("span",{staticClass:"icon"}),t("span",{staticClass:"value"},[e._v("\u8BBE\u8BA1\u53C2\u6570\u53EA\u6709\u7BA1\u7406\u5458\u53EF\u4EE5\u4FEE\u6539")])]),t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form}},[t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:24}},[t("h3",[e._v("\u5DE5\u7A0B\u540D\u79F0")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"},model:{value:e.form.projectName,callback:function(s){e.$set(e.form,"projectName",s)},expression:"form.projectName"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u65BD\u5DE5\u5355\u4F4D")]),t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u65BD\u5DE5\u5355\u4F4D"},model:{value:e.form.worker,callback:function(s){e.$set(e.form,"worker",s)},expression:"form.worker"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6700\u77ED\u6210\u6869\u65F6\u95F4(min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6700\u77ED\u6210\u6869\u65F6\u95F4"},model:{value:e.form.minPileTime,callback:function(s){e.$set(e.form,"minPileTime",s)},expression:"form.minPileTime"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u6869\u957F(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u6869\u957F"},model:{value:e.form.designDepth,callback:function(s){e.$set(e.form,"designDepth",s)},expression:"form.designDepth"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6C34\u6CE5\u63BA\u91CF(kg/m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6C34\u6CE5\u63BA\u91CF"},model:{value:e.form.designAsh,callback:function(s){e.$set(e.form,"designAsh",s)},expression:"form.designAsh"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u95F4\u8DDD(m)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u95F4\u8DDD"},model:{value:e.form.designPilePadding,callback:function(s){e.$set(e.form,"designPilePadding",s)},expression:"form.designPilePadding"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u6869\u5F84(cm)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u6869\u5F84"},model:{value:e.form.pileWidth,callback:function(s){e.$set(e.form,"pileWidth",s)},expression:"form.pileWidth"}})],1)],1),t("el-form-item",{staticClass:"item"},[t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u63D0\u94BB\u901F\u5EA6"},model:{value:e.form.designUpSpeed,callback:function(s){e.$set(e.form,"designUpSpeed",s)},expression:"form.designUpSpeed"}})],1),t("el-col",{attrs:{span:12}},[t("h3",[e._v("\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6(cm/min)")]),t("el-input",{attrs:{type:"number",min:0,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u8BA1\u4E0B\u94BB\u901F\u5EA6"},model:{value:e.form.designDownSpeed,callback:function(s){e.$set(e.form,"designDownSpeed",s)},expression:"form.designDownSpeed"}})],1)],1),t("el-form-item",{staticClass:"item submit"},[t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"btn submit-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u4FDD\u5B58")]),t("el-button",{staticClass:"btn",on:{click:function(s){return e.closePop("centerDialogVisible")}}},[e._v("\u53D6\u6D88")])],1)],1)],1)],1)]),t("el-dialog",{directives:[{name:"el-dialog-drag",rawName:"v-el-dialog-drag"}],staticClass:"m-pop m-pop-detail",attrs:{visible:e.centerDialogVisible1},on:{"update:visible":function(s){e.centerDialogVisible1=s}}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("gTabs",{attrs:{current:e.tab2,list:e.tab2List},on:{change:e.changeHandle}})],1)]),t("div",{staticClass:"dialog-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2===0,expression:"tab2 === 0"}],staticClass:"m-tab-table m-tab-echartTable"},[t("div",{staticClass:"m-pop-echart m-pop-echart-f01"},[t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner inner1"},[t("div",{staticClass:"m-statusinfo"},[t("div",{staticClass:"top"},[t("h3",[e._v(e._s(e.selectItem.name))]),t("div",{staticClass:"info"},[t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u6869\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("pilefilter")(e.pile.pileDescribe)))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"tit"},[e._v("\u8BBE\u5907\u7F16\u53F7")]),t("div",{staticClass:"value"},[e._v(e._s(e.selectItem.key))])])]),t("div",{staticClass:"status"},[t("ul",{staticClass:"ul-status"},[t("li",{class:e.recordStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e._f("stafilters")(e.real.recordStatus)))])]),t("li",{class:e.pileStatusClass},[t("div",{staticClass:"btn"},[e._v(e._s(e.pileStatusStr))])])])]),t("div",{staticStyle:{clear:"both"}})]),t("div",{staticClass:"bottom bottomdata"},[t("div",{staticClass:"item"},[t("h3",[e._v("\u5F00\u59CB\u65F6\u95F4")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("datafilters")(e.real.startTime)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u7535\u6D41")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("numfilters")(e.real.current))+" A")])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u6A21\u5F0F")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("recordModefilters")(e.real.recordMode)))])]),t("div",{staticClass:"item"},[t("h3",[e._v("\u8BB0\u5F55\u95F4\u9694")]),t("div",{staticClass:"value"},[e._v(e._s(e._f("Intervalfilters")(e.real)))])])])])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("h2",[e._v("\u6DF1\u5EA6\u3001\u7535\u6D41\u65F6\u95F4\u66F2\u7EBF")]),t("div",{ref:"myChart01",style:{width:"100%",height:"100%"}})])])],1),t("el-row",{staticClass:"row"},[t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"m-box m-map"},[t("div",{staticClass:"top"}),t("div",{staticClass:"con"},[t("div",{staticClass:"mapDiv"},[t("tdt-map",{attrs:{center:e.coordinates.center,zoom:e.coordinates.zoom,controls:e.coordinates.controls}},[t("tdt-marker",{attrs:{position:e.coordinates.position,icon:e.coordinates.icon,draggable:e.coordinates.draggable}}),t("tdt-control",{attrs:{position:"topright",visible:e.coordinates.visible}})],1)],1)])])]),t("el-col",{staticClass:"col",attrs:{span:12}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"m-datab1"},[t("div",{staticClass:"top"},[t("div",{staticClass:"left"},[t("div",{ref:"angle",staticClass:"icon"}),t("div",{staticClass:"t1"},[t("p",[e._v("X"),t("b",[e._v(e._s(e._f("numfilters")(e.real.xAngle,1)))])]),t("p",[e._v("Y"),t("b",[e._v(e._s(e._f("numfilters")(e.real.yAngle,1)))])])])]),t("div",{staticClass:"oh"},[t("div",{staticClass:"item"},[t("p",[e._v("\u6301\u7EED\u65F6\u957F")]),t("b",[e._v(e._s(e.real.lasttime)+"\u5206\u949F")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6700\u5927\u6DF1\u5EA6")]),t("b",[e._v(e._s(e._f("numfilters")(e.real.maxDeep))+"m")])]),t("div",{staticClass:"item"},[t("p",[e._v("\u6700\u5927\u7535\u6D41")]),t("b",[e._v(e._s(e._f("numfilters")(e.maxCurrents))+"A")])])])]),t("div",{staticClass:"picbox"},[t("img",{staticClass:"bg",attrs:{src:g,alt:""}}),t("div",{staticClass:"databar"},[t("div",{staticClass:"data",style:{bottom:e.ztTop}},[t("img",{class:e.image,attrs:{src:_,alt:""}}),t("img",{staticClass:"zt",attrs:{src:C,alt:""}}),t("div",{staticClass:"info"},[t("p",[t("b",[e._v(e._s(e.pileStatusStr))])]),t("p",[e._v("\u6DF1\u5EA6"),t("em",[e._v(e._s(e._f("numfilters")(e.real.deep))+"(m)")])]),t("p",[e._v(e._s(e.pileStatusSpeed)),t("em",[e._v(e._s(e._f("numfilters")(e.real.speed))+"(cm/min)")])]),t("p",[e._v("\u7535\u6D41"),t("em",[e._v(e._s(e._f("numfilters")(e.real.current))+"(A)")])]),t("img",{staticClass:"line",attrs:{src:b,alt:""}})])])])])])])])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==1,expression:"tab2 == 1"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==2,expression:"tab2 == 2"}],staticClass:"m-tab-table"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tab2==3,expression:"tab2 == 3"}],staticClass:"m-tab-table"},[t("div",{staticClass:"block"},[t("el-carousel",{staticClass:"swiper_video",attrs:{trigger:"click",autoplay:!1,arrow:"never"}},e._l(e.cameraLive,function(s,a){return t("el-carousel-item",{key:a,staticClass:"swiper_item",attrs:{label:a+1}},[t("video-player",{ref:"videoPlayer",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{options:e.playerOptions[a]}})],1)}),1)],1)])])]),t("el-footer",{staticClass:"m-selectAll"},[t("div",{staticClass:"right"},[t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"sizes,slot,  prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toFirstPage}},[t("i",{staticClass:"el-icon-d-arrow-left"})])]),t("el-pagination",{staticClass:"pages",attrs:{"current-page":e.currentPage4,"page-sizes":[4,8,12,16],"page-size":e.pageSize,layout:"slot , jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("button",{staticClass:"lastPage",on:{click:e.toLastPage}},[t("i",{staticClass:"el-icon-d-arrow-right"})])])],1)])],1)},Dt=[];const Tt={props:["onlineList","iconImg","total","currentPage4","handleCurrentChange","handleSizeChange","pageSize","toLastPage","toFirstPage"],components:{gTabs:d},data(){return{coordinates:{center:[0,0],zoom:11,draggable:!1,position:[0,0],icon:require("@/assets/images/map/b4.png"),controls:["Zoom","Scale",{name:"MapType",position:"topright",mapTypes:[{title:"\u5730\u56FE",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:"TMAP_NORMAL_MAP"},{title:"\u536B\u661F",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:"TMAP_SATELLITE_MAP"}]}],visible:!0,copyright:!0},cameraLive:[],playerOptions:[],message:String,index:0,ztdepth:0,pileStatusSpeed:"\u901F\u5EA6",pileStatusStr:"\u505C\u94BB",recordStatusClass:"",pileStatusClass:"",image:"stop",timer:null,deviceKey:"",pileId:"",pile:[],real:{startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},flow:[],deep:[],selectItem:[],ztTop:0,y:0,centerDialogVisible:!1,form:{projectName:"",worker:"",minPileTime:"",designDepth:"",designAsh:"",designPilePadding:"",pileWidth:"",designUpSpeed:"",designDownSpeed:""},centerDialogVisible1:!1,tab2:0,tab2List:[],ispileIds:!0,maxCurrents:0}},filters:{ofiltersPipe(e,i){return e?e[i]==null?"-":e[i]:"-"},pilefilter(e){return e==null?"--":e},datafilters(e){return e==0?"\u505C\u6B62\u4E2D":o(e*1e3).format("YYYY-MM-DD HH:mm:ss")},recordModefilters(e){if(e=="0")return"\u6DF1\u5EA6\u6A21\u5F0F";if(e=="1")return"\u65F6\u95F4\u6A21\u5F0F"},Intervalfilters(e){if(e.recordMode=="0"){if(e.recordInterval=="0")return"20cm";if(e.recordInterval=="1")return"25cm";if(e.recordInterval=="2")return"50cm";if(e.recordInterval=="3")return"100cm"}else if(e.recordMode=="1"){if(e.recordInterval=="0")return"5s";if(e.recordInterval=="1")return"10s";if(e.recordInterval=="2")return"30s";if(e.recordInterval=="3")return"60s"}},numfilters(e,i){return e==null?"-":(i==null&&(i=2),isNaN(e)?e:parseFloat(e).toFixed(i))},stafilters(e){switch(e){case"1":return"\u8BB0\u5F55\u4E2D";case"2":return"\u6682\u505C";case"3":return"\u7ED3\u675F";default:return e}},downSpeed(e){return e>0?parseFloat(e).toFixed(2):0},upSpeed(e){return e<0?parseFloat(e).toFixed(2):0}},watch:{centerDialogVisible1(e,i){e==!1&&(this.getwatchData(),this.timer&&clearInterval(this.timer))}},methods:{getwatchData(){this.ispileIds=!0,this.flow=[],this.deep=[],this.pile=[],this.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},this.ztdepth=0,this.pileStatusStr="\u505C\u94BB",this.pileStatusSpeed="\u901F\u5EA6",this.recordStatusClass="",this.pileStatusClass="",!(this.myChart01===void 0||this.myChart01._disposed)&&(this.myChart01.dispose(),this.image="stop")},setAngle(e,i){let t={tooltip:{show:!1,trigger:"axis",formatter:"x: "+e+"<br />y :"+i},grid:{left:"0",top:"0",right:"0",bottom:"0"},xAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},yAxis:{type:"value",min:"-15",max:"15",axisLabel:{show:!1}},series:[{symbolSize:10,data:[[e,i]],type:"scatter"}]};this.angle==null&&(this.angle=p(this.$refs.angle)),this.angle.setOption(t)},initEchart01(e){let i={title:{show:e,text:"\u6682\u65E0\u6570\u636E",textStyle:{color:"#101D34",fontSize:20},left:"center",top:"center"},tooltip:{trigger:"axis"},legend:{top:"5%",right:"10%",data:["\u6DF1\u5EA6","\u7535\u6D41"]},grid:{top:"23%",left:"4%",right:"4%",bottom:"5%",containLabel:!0},toolbox:{right:"3%",top:"3%",feature:{saveAsImage:{}}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:[{name:"\u6DF1\u5EA6m ",type:"value",inverse:!0,max:30,axisLine:{show:!0},nameTextstyle:{padding:[15,0,0,15]}},{name:" \u7535\u6D41(A)",type:"value",inverse:!1,nameLocation:"start",max:300,nameTextstyle:{padding:[25,15,0,0]},splitLine:{show:!1}}],series:[{name:"\u6DF1\u5EA6",type:"line",showSymbol:!1,data:this.deep,markPoint:{data:[{type:"max"}]}},{name:"\u7535\u6D41",yAxisIndex:1,type:"line",splitLine:{lineStyle:{type:"dashed"}},showSymbol:!1,data:this.flow}]};this.myChart01.setOption(i)},changeHandle(e){let i=this;this.tab2=e,e==0&&(this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getData()),e==1&&(sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history")),e==2&&(sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo")),e==3&&(clearInterval(this.timer),this.getwatchData())},getpileIds(){u(this.selectItem.key).then(e=>{e!=null&&(this.pile=e[0],this.ispileIds=!1)})},getData(){let e=this;var i=[];f(this.selectItem.key,this.pileId,"realTime,current,deep").then(t=>{const s=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var a=0;a<t.length;a++){i.push(t[a].current);let r=o(t[a].realTime*1e3).format("YYYY-MM-DD HH:mm:ss"),n=[],c=[];n.push(r,t[a].current.toFixed(2)),c.push(r,t[a].deep.toFixed(2)),this.flow.push(n),this.deep.push(c)}this.maxCurrents=Math.max(...i),this.myChart01=p(this.$refs.myChart01,null,{renderer:"svg"}),this.initEchart01(!1);var l=t[t.length-1];l!=null&&(this.ztdepth=l.deep,e.myFun(l.deep)),this.timer=setInterval(()=>{v(this.selectItem.key,this.pileId).then(r=>{if(r!=null){this.ispileIds==!0&&this.getpileIds(),this.real=r,r.current>this.maxCurrents&&(this.maxCurrents=r.current),this.setAngle(this.real.xAngle,this.real.yAngle),this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.real.recordStatus=="1"?this.recordStatusClass="on":this.real.recordStatus=="2"?this.recordStatusClass="pause":this.real.recordStatus=="3"&&(this.recordStatusClass="",this.ispileIds=!0),this.real.deep>this.ztdepth?(this.pileStatusStr="\u94BB\u5B54",this.pileStatusSpeed="\u94BB\u5B54\u901F\u5EA6",this.pileStatusClass="on",this.image="down"):this.real.deep<this.ztdepth&&(this.pileStatusStr="\u8D77\u62D4",this.pileStatusSpeed="\u8D77\u62D4\u901F\u5EA6",this.pileStatusClass="on",this.image="up"),this.ztdepth=this.real.deep;let n=o(r.realTime*1e3).format("YYYY-MM-DD HH:mm:ss");if(this.flow.length==0||this.flow[this.flow.length-1][0]!=n){let c=[],y=[];c.push(n,r.current.toFixed(2)),y.push(n,r.deep.toFixed(2)),this.flow.push(c),this.deep.push(y),this.initEchart01(!1)}this.real.lasttime=((r.realTime-r.startTime)/60).toFixed(0),e.myFun(this.real.deep)}else this.ispileIds=!0,this.flow=[],this.deep=[],this.pile=[],this.real={startTime:0,recordStatus:"3",nozzleStatus:"0",xAngle:0,yAngle:0},this.ztdepth=0,this.pileStatusStr="\u505C\u94BB",this.recordStatusClass="",this.pileStatusClass="",this.initEchart01(!0),e.myFun(this.real.deep);s.close()})},3e3),setTimeout(()=>{s.close()},6e3)})},handleCommand(e){let i=this,t=e.split("-")[0],s=e.split("-")[1];if(this.selectItem=this.onlineList[t],this.cameraLive=JSON.parse(this.selectItem.cameraLive),this.cameraLive==null)this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"}];else{this.tab2List=[{name:"\u8FD0\u884C\u72B6\u51B5"},{name:"\u5386\u53F2\u8BB0\u5F55"},{name:"\u9884\u8B66\u4FE1\u606F"},{name:"\u5B9E\u65F6\u76D1\u63A7"}],this.playerOptions=[];for(let a=0;a<this.cameraLive.length;a++){let l={playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:this.cameraLive[a].liveUrl}],notSupportedMessage:"\u6B64\u89C6\u9891\u6682\u65E0\u6CD5\u64AD\u653E,\u8BF7\u7A0D\u540E\u518D\u8BD5",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};this.playerOptions.push(l)}}switch(this.selectItem.position==""?this.selectItem.position="0,0":(this.coordinates.position=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]],this.coordinates.center=[this.selectItem.position.split(",")[0],this.selectItem.position.split(",")[1]]),s){case"0":{this.centerDialogVisible1=!0,this.$nextTick(()=>{window.onresize=function(){i.myChart01.resize()}}),this.getpileIds(),this.getData();break}case"1":{sessionStorage.type=this.selectItem.type,sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/history");break}case"2":{sessionStorage.deviceKey=this.selectItem.key,this.$router.push("/alertInfo");break}case"3":{this.$router.push("/previewOnline#");break}case"4":{this.centerDialogVisible=!0,this.form.projectName=JSON.parse(this.selectItem.content).projectName==null?"":JSON.parse(this.selectItem.content).projectName,this.form.worker=JSON.parse(this.selectItem.content).worker==null?"":JSON.parse(this.selectItem.content).worker,this.form.minPileTime=JSON.parse(this.selectItem.content).minPileTime==null?"":JSON.parse(this.selectItem.content).minPileTime,this.form.designDepth=JSON.parse(this.selectItem.content).designDepth==null?"":JSON.parse(this.selectItem.content).designDepth,this.form.designAsh=JSON.parse(this.selectItem.content).designAsh==null?"":JSON.parse(this.selectItem.content).designAsh,this.form.designPilePadding=JSON.parse(this.selectItem.content).designPilePadding==null?"":JSON.parse(this.selectItem.content).designPilePadding,this.form.pileWidth=JSON.parse(this.selectItem.content).pileWidth==null?"":JSON.parse(this.selectItem.content).pileWidth,this.form.designUpSpeed=JSON.parse(this.selectItem.content).designUpSpeed==null?"":JSON.parse(this.selectItem.content).designUpSpeed,this.form.designDownSpeed=JSON.parse(this.selectItem.content).designDownSpeed==null?"":JSON.parse(this.selectItem.content).designDownSpeed;break}}},destroyed(){this.timer&&clearInterval(this.timer)},onSubmit(){h(this.form,this.selectItem.id).then(e=>{this.onlineList[this.index].content=JSON.stringify(this.form)}),this.centerDialogVisible=!1},closePop(e){this[e]=!1},myFun(e){var i=this;i.y=Number(e).toFixed(2),i.ztTop=100-e/40*100+"%"}}},Y={};var zt=m(Tt,Pt,Dt,!1,Nt,"72e2f207",null,null);function Nt(e){for(let i in Y)this[i]=Y[i]}var Lt=function(){return zt.exports}(),At=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row-history"},[t("div",{staticClass:"m-topNav"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.tab,callback:function(s){e.tab=s},expression:"tab"}},e._l(e.tabList,function(s){return t("el-tab-pane",{key:s.name,attrs:{label:s.label,name:s.name}})}),1)],1),t(e.tab,{tag:"component",attrs:{iconImg:e.iconImg,onlineList:e.onlineList,pageSize:e.pageSize,total:e.total,currentPage4:e.currentPage4,handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange,toLastPage:e.toLastPage,toFirstPage:e.toFirstPage}})],1)},Ot=[];const $t={name:"previewOnline",components:{gTabs:d,JBZ:Z,GH:se,GYXPZ:oe,GFZ:ue,GZ:be,GJ:ke,CGSZ:Le,CP:Fe,HTZJ:We,FPZ:Ze,DK:st,CFG:ot,XWZ:ut,ZKFPZ:bt,DP:kt,LG:Lt},data(){return{tab:"JBZ",iconImg:"",pageSize:8,total:0,currentPage4:1,tabList:[{label:"\u56FA\u5316\u571F",name:"0"},{label:"\u7C89\u55B7\u6869",name:"1"},{label:"\u9AD8\u538B\u65CB\u55B7\u6869",name:"2"},{label:"\u5DE5\u6CD5\u6869",name:"3"},{label:"\u6C89\u7BA1\u7802\u6869",name:"4"},{label:"\u6405\u62CC\u6869",name:"5"}],onlineList:[{id:"1",icon:"@/assets/images/previewOnline/icon-list01.png",typeName:"\u6405\u62CC\u6869",name:"\u53CC\u5934\u6405\u62CC\u6869\u6D4B\u8BD5",key:"MX02808020020100",startTime:"2021-04-14 10:34",createAt:1540102966,online:!0,status:1,zuangan:"\u4E0B\u94BB",penhui:"\u55B7\u7070",weight:126.26}],selectItem:{}}},mounted(){U().then(e=>{this.tabList=e,sessionStorage.type!=null?this.tab=sessionStorage.type:this.tab=this.tabList[0].name,this.iconImg="/src/assets/images/previewOnline/"+this.tab+".png",w(this.pageSize,0,this.tab).then(i=>{this.onlineList=i.result.records,this.total=i.result.total})})},filters:{datafilters(e){return o(e*1e3).format("YYYY-MM-DD HH:mm:ss")}},methods:{handleSizeChange(e){this.pageSize=e,w(this.pageSize,0,this.tab).then(i=>{this.onlineList=i.result.records,this.total=i.result.total})},handleCurrentChange(e){const i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.currentPage4=e,w(this.pageSize,this.currentPage4,this.tab).then(t=>{this.onlineList=t.result.records,this.total=t.result.total,i.close()}),setTimeout(()=>{i.close()},6e3)},toFirstPage(){this.handleCurrentChange(1)},toLastPage(){this.handleCurrentChange(Math.ceil(this.total/this.pageSize))},handleClick(){const e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.iconImg="@assets/images/previewOnline/"+this.tab+".png",this.currentPage4=1,w(this.pageSize,0,this.tab).then(i=>{this.onlineList=i.result.records,this.total=i.result.total,sessionStorage.type=this.tab,e.close()}),setTimeout(()=>{e.close()},6e3)}}},H={};var Jt=m($t,At,Ot,!1,Mt,"320b7c88",null,null);function Mt(e){for(let i in H)this[i]=H[i]}var Kt=function(){return Jt.exports}();export{Kt as default};
