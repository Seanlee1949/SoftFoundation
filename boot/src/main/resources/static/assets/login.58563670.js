import{l as r}from"./api.595e2602.js";import{n as l}from"./index.ee77bd4e.js";var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("el-container",{staticClass:"body-main body-main-login"},[e("el-row",{staticClass:"m-login"},[e("el-col",{staticClass:"left",attrs:{span:12}},[e("div",{staticClass:"top"},[e("h2",[t._v("\u8F6F\u57FA\u5904\u7406\u76D1\u6D4B\u7CFB\u7EDF")])])]),e("el-col",{staticClass:"right",attrs:{span:12}},[e("div",{staticClass:"login"},[e("h2",[t._v("\u6B22\u8FCE\u767B\u5F55")]),e("el-form",{staticClass:"form",attrs:{"label-width":"0",model:t.formLabelAlign}},[e("el-form-item",{staticClass:"item",attrs:{required:""}},[e("span",{staticClass:"icon icon-phone"}),e("el-input",{staticClass:"input",attrs:{placeholder:"\u8BF7\u5728\u6B64\u8F93\u5165\u7528\u6237\u540D"},model:{value:t.formLabelAlign.userName,callback:function(i){t.$set(t.formLabelAlign,"userName",i)},expression:"formLabelAlign.userName"}})],1),e("el-form-item",{staticClass:"item",attrs:{required:""}},[e("span",{staticClass:"icon icon-password"}),e("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"\u8BF7\u5728\u6B64\u8F93\u5165\u5BC6\u7801"},model:{value:t.formLabelAlign.passWord,callback:function(i){t.$set(t.formLabelAlign,"passWord",i)},expression:"formLabelAlign.passWord"}})],1),e("el-form-item",{staticClass:"item",attrs:{required:""}},[e("el-checkbox-group",{attrs:{"text-color":"#0B85E3"},model:{value:t.formLabelAlign.isChecked,callback:function(i){t.$set(t.formLabelAlign,"isChecked",i)},expression:"formLabelAlign.isChecked"}},[e("el-checkbox",{attrs:{"false-label":0,"true-label":1,label:"\u8BB0\u4F4F\u8D26\u53F7",name:"isChecked"}})],1)],1),e("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(i){return t.submit()}}},[t._v("\u767B\u5F55")])],1)],1)])],1),e("a",{staticClass:"num",attrs:{href:"https://beian.miit.gov.cn ",target:"_blank"}},[t._v("\u6D59ICP\u590714033869\u53F7-3")])],1)},c=[];const m={name:"Login",data(){return{labelPosition:"right",formLabelAlign:{userName:"",passWord:"",isChecked:!1}}},watch:{isChecked(t){t?this.setCookie():this.clearCookie()}},mounted(){this.getCookie()},methods:{setCookie(t,s,e,i){const o=new Date;o.setTime(o.getTime()+24*60*60*1e3*e),window.document.cookie=`userName=${t}; path=/; expires=${o.toGMTString()}`,window.document.cookie=`passWord=${window.btoa(s)}; path=/; expires=${o.toGMTString()}`,window.document.cookie=`isChecked=${!0}; path=/; expires=${o.toGMTString()}`,o.setTime(o.getTime()+24*60*60*1e3*15),window.document.cookie=`token=${i};path=/;domain=hzcjkj.com;expires=${o.toGMTString()}`},submit(){this.formLabelAlign.userName==""||this.formLabelAlign.passWord==""?this.$message.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"):r(this.formLabelAlign.userName,this.formLabelAlign.passWord).then(t=>{t.success===!1?this.$message.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"):(sessionStorage.clear(),sessionStorage.token=t.token,sessionStorage.name=t.clientUser.name,this.setCookie(this.formLabelAlign.userName,this.formLabelAlign.passWord,7,t.token),this.$router.push("/index"))})},getCookie(){if(document.cookie.length>0){const t=document.cookie.split(";");for(let s in t){const e=t[s].split("=");e[0]=e[0].replace(/\s+/g,""),e[1]=e[1].replace(/\s+/g,""),e[0]=="userName"?this.formLabelAlign.userName=e[1]:e[0]=="passWord"?this.formLabelAlign.passWord=window.atob(e[1]):e[0]=="checked"&&(this.formLabelAlign.isChecked=JSON.parse(e[1]))}!this.formLabelAlign.userName==""&&!this.formLabelAlign.passWord==""&&this.submit()}},clearCookie(){this.setCookie("","",-1)}},created(){var t=this;document.onkeydown=function(s){var e=window.event.keyCode;t.$route.path=="/login"&&e==13&&t.submit("/index")}}},a={};var d=l(m,n,c,!1,u,"07cf077d",null,null);function u(t){for(let s in a)this[s]=a[s]}var h=function(){return d.exports}();export{h as default};
